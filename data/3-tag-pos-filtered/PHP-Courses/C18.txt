php
(et
mysql)

introduction

html
:
page
destiner
à
être
publier
sur
internet
texte
à
afficher
+
instruction
de
mise
en
page

d’instructions
de
calcul
de
traitement
conditionnels


site
de
en
riches
en
information
nécessité
croissante
d’améliorer
contenu
site

mettre
à
jour
manuelles
complexes




exemple
:
modifier
l'entête
sur
pages!
!
besoin
de
réponse
spécifiques
lier
à
bd
par
exemple
passage
de
site
statiques
à
site
dynamiques

web
dynamique
–
coter
client

traiter
par
navigateur
:

résultat
variables
en
fonction
navigateur

nécessiter
de
test
importants

indépendant


serveur
de
rechargement
de
page,
être
faire
en
local
confiance
:

source
programme
disponibles

donnée
envoyer
serveur
fiables

base
de
donnée
stocker
chez
client
?

web
dynamique
–
coter
serveur

l'interprétation
être
réaliser
par
serveur
:

indépendant
de
machine
navigateur

"compatible"
avec
navigateur



échange
concerner
html
(ou
json
autre)
source
être
sur
serveur
invisibles
besoin
d'échanges
entre
navigateur
serveur

rechargement

ajax…
de
page
à
modification

web
dynamique
–
client
serveur

falloir
deux!
!

script
côté
client
(javascript)
:
calcul
traitement
simples

mettre
à
jour
de
page
web
sans
rechargement
(ajax)


script
côté
serveur
(php
autre)
:
calculs,
traitement
conséquents

requête
vers
base
de
donnée

opération
sécuriser


le
langage
php
-
histoire



php
:
hypertext
preprocessor
premier
version
de
php
(personal
home
page
)
sortir
en
1995
version
5.0
actuelle
être
sortir
en
2004
:


version
4.0
n'est
maintenir
depuis
août
2008.
environ
75%
site
web
dynamiques
utiliser
php.

le
langage
php


langage
pour
création
d’applications
web
exécution
coter
serveur

indépendant
de
plate-forme
utiliser

facile
à
combiner
avec
serveur
web
bd

logiciel



en
(wampserver,
easyphp,
…).
gratuit,
coder
source
disponible
ecriture
de
script
simples
inclusion
directe
de
php
dans
html

le
langage
php

programme
s'exécutant
côté
serveur
web

extension
.php
pour
page
php

fichier
pouvoir
contenir
html

fichier
.php
être
stocker
sur
serveur

désigner
par
url
:
http://www.lip6.fr/page.php

chargement
de
l'url
provoquer
l'exécution
côté
serveur

script
php
aller
créer
html

exemple

vouloir
créer
page
web

pour
nombre
quelconque
de
valeur
(venant
d'un
formulaire
par
exemple).
<html>
<body>
1
:
1
<br
/>
2
:
4
<br
/>
3
:
9
<br
/>
</body>
</html>

version
javascript

insertion
de
javascript
avec
balise
<script>
boucler
for
classique

affichage
contenu
via
document.write

concaténation
de
chaîne
avec
signe
+


exécuter
par
navigateur
<html>
<body>
<script
type="text/javascript">
for(var
i=1;i<=3;i++)
document.write(i+"
:
"+i*i+"<br
/>");
</script>
</body>
</html>

version
php

insertion
de
php
avec
balise
<?php
boucler
for
classique

affichage
contenu
via
echo

concaténation
de
chaîne
avec
signe


exécuter
par
serveur
envoyer
navigateur
<html>
<body>
<?php
for
($i=1
;
$i<=3
;
$i++)
echo
$i."
:
".($i*$i)."<br
/>";
?>
</body>
</html>

différence
entre
javascript
php

javascript
:
navigateur
demander
fichier
html

fichier
html
(contenant
javascript)
être
envoyer

navigateur
exécuter
javascript

l'affichage
être
faire
de
manière
dynamique


php
:
navigateur
demander
fichier
php

serveur
exécuter
code
php
envoyer
résultat

page
envoyer
navigateur
être
afficher


code
php
–
autre
version

seules
partie
dynamiques
être
faire
en
php
reste
être
html
de
base

lisible

<html>
<body>
<?php
for
($i=1
;
$i<=3
;
$i++)
{
?>
<?php
echo
$i
?>
:
<?php
echo
$i*$i;
?><br
/>
<?php
}
?>
</body>
</html>

code
php
–
autre
version

fichier
html
être
créer
en
php
:

syntaxe
lourde
<?php
echo
"<html>\n";
echo
"<body>\n";
for
($i=1
;
$i<=3
;
$i++
)
{
echo
$i."
:
".($i*$i)."<br
/>\n";
}
echo
"</body>\n";
echo
"</html>\n";
?>

php
-
syntaxe

variables

variables

variable
être
précéder
de
$


type
:


$i
être
variable
s'appelle
i
entiers,
réels,
chaîne
de
caractères,
objet
de
déclaration
explicite,
l'affectation
d'une
valeur
suffire


affectation
par
valeur
:
$i=0
affectation
par
(référence)
variable
:
$j
=
&$i


changement
de
type
automatique
:


modification
de
$i
modifier
$j
(comme
pointeur
en
c)
$compteur="premier";
valeur
par
défaut
avant
l'affectation

attention
essayer
de
lire
contenu!
!

variables

variable
locale


visible
à
l’intérieur
d’un
contexte
d’utilisation
variable
globale


visible
dans
script
utilisation
de
l’instruction
"global"
pour
accéder
à
variable
globale
dans
contexte
locaux
$var
=
1;
function
test(){
global
$var;
echo
$var;
}

chaînes
de
caractère

création/affectation
entre
guillemet


concaténation
avec
signe
.


$test="a";
$test="bonjour"
.
"au
revoir";
substitution
possible
de
variables
à
l'intérieur
d'une
chaîne
:


"x
$test
x"
être
similaire
à
"x
".$test."
x"
de
substitution
avec
apostrophe


'x
$test
x';
//
"x
$test
x"
encodage
caractère
spéciaux
obligatoire
:

\$
\\
\n
\t
\"…

création
de
variables
dynamique

possibilité
de
créer
variable
dynamique
:

création
à
partir
contenu
d'une
autre
variable.
$var="test";
$$var="test2";
//
similaire
à
$test="test2";
echo
"$var
$test
${$var}";
//
affiche
"test
test2
test2"
//
similaire
avec
tableau
$nom_variable
=
array("val0",
"val1");
${$nom_variable[0]}
=
"x";

opérations
sur
chaîne

longueur
d'une
chaîner
strlen

strlen($str)

comparaison
==

$x

==
$y
concaténation
.

$x.$y

nombreuses
fonction
de
manipulation
disponibles

fonctions
sur
chaîne

afficher
chaîne
de
caractère
:


retourner
morceau
d'un
chaîne
:
substr($chaine,
$debut,
$longueur)



$debut
pouvoir
être
négatif
:
partir
de
fin
$longueur
être
facultatif
:
fin
de
chaîne
être
retourner
couper
chaîne
en
morceau
avec
délimiteur
:


echo
$chaine;
…
$tableau
=
explode($delimiteur,
$chaine);

instructions

instructions
conditionnelles

if
then
else

définition
spéciale
pour
else
if
(pas
obligatoire)
if
(cond)
{
...
}
elseif
(cond)
{
...
}
else
{
...
}
//
version
courte
:
(condition)?instructionsivrai:instructionsifaux;

instructions
conditionnelles

switch
(…)
{
case
…
:
…
;
}
switch
(expression)
{
case
"1"
:
...
;
break;
case
"2"
:
...
;
break;
case
"3"
:
...
;
break;
default
:
...
}

boucles

boucle
for
:

for

(
initialisation
;
condition
;
increment
)
{
...
}
boucle
while
:

while
(condition)
{
...
}

do
{
...
}
while
(condition);

instructions
conditionnelles

saut
inconditionnel


arrêt
inconditionnel


continue
:
terminer
l'itération
courante
de
boucle
break
:
terminer
boucle
arrêt
d'exécution
script

exit
:
terminer
script
for
($i=1;
$i<=10;
$i++)
{
if
($i
==
5)
continue;
echo
$i."<br
/>";
}
for
($i=1;
$i<=10;
$i++)
{
if
($i
==
5)
break;
echo
$i."<br
/>";
}
//
afficher
valeur
sauf
5
//
afficher
jusqu'à
5
(exclu)

tableaux

les
tableau

création
à
l’aide
de
fonction
array()

$tableau

=
array(1,
"deux",
3);
tableau
à
dimension

élément
pouvoir
être
de
différents
type

l’index
d’un
tableau
commencer
à
0

fonction
:

count()
pour
avoir
nombre
d’éléments
d’un
tableau

tableaux
simples

association
numéro
-
valeur
//
création
tableau
$tableau
=
array(valeur0,
valeur1,...,
valeurn);
//
affectation
d'un
élément
$tableau[indice]
=
valeur;
//
récupération
d'un
élément
$variable
=
$tableau[indice];
//
parcourir
version
1
for
($i=0;
$i<count($tableau)
;
$i++)
echo
$i."
".$tableau[$i]."<br
/>";
//
parcourir
version
2
foreach($tableau
avoir
$valeur)
echo
$valeur."<br
/>";

tableaux
associatifs

association
clé
d'index
-
valeur
//
création
tableau
$tableau
=
array(cle0
=>
val0,
cle1
=>
val1,...,
clen
=>
valn);
//
affectation
d'un
élément
$tableau["cle"]
=
valeur;
//
récupération
d'un
élément
$variable
=
$tableau["cle"];
//
parcourir
version
1
foreach($tableau
avoir
$cle
=>
$valeur)
echo
$cle."
".$valeur."<br
/>;
//
parcourir
version
2
reset($tableau);
while
(list($cle,
$valeur)
=
each($tableau))
echo
$cle."
".$valeur."<br
/>;

tableaux
multidimensionnels

de
méthode
de
création
native
:

imbriquer
tableaux.
//
création
d'un
tableau
à
deux
dimension
$tab1
=
array(val0,
val1,...,
valn);
$tab2
=
array(val0,
val1,...,
valn);
$tableau
=
array($tab1,
$tab2);
//
affectation
d'un
élément
$tableau[indice][indice]
=
$variable;
//
récupération
d'un
élément
$variable
=
$tableau[indice][indice];
//
parcourir
for
($i=0
;
$i<count($tableau)
;
$i++)
for
($j=0
;
$j<count($tableau[$i])
;
$j++)
echo
$i."
".$j."
".$tableau[$i][$j]."<br
/>";

fonctions
sur
tableau

tailler
d'un
tableau
:


compter
nombre
d'occurrences
valeur
d'un
tableau
:



$tab2
=
array_map("fonction",
$tab);
filtrage
par
fonction
(supprime
élément
vérifier
critère)
:


sort($tab);
//
selon
valeur
ksort($tab);
//
selon
clef
mappage
par
fonction
(applique
fonction
à
éléments)
:


$tab2
=
array_count_values($tab);
tri
:


count()
$tab2
=
array_filter($tab,
"fonction")
intervertir
clef
valeur
:

$tab2
=
array_flip($tab);

fonctions

fonctions

de
typage
argument

valeur
de
retour


récursivité
possible
<?php
//
définition
de
fonction
factorielle
function
factorielle($n)
{
if
($n<2)
return
1;
else
return
$n*factorielle($n-1);
}
//
appel
de
fonction
afficahage
résultat
echo
factorielle(3);
?>

fonctions

valeur
par
défaut
possibles
pour
argument




argument
pouvoir
avoir
valeur
par
défaut
function
racine($x,
$racine=2)
{}
appel
:
racine($a,
$b)
racine($a)
valeur
par
défaut
pour
derniers
argument

racine($x=4,$degre)
impossible
//
seul
argument
$degre
valoir
2
par
défaut
function
racine($x,$degre=2){
return
pow($x,1/$degre);
}
racine(27,3);
//
retourner
racine
cubique
de
27
racine(16);
//
retourner
racine
carrer
de
16

fonctions

nombre
d’arguments
inconnu
:

func_num_args()
:
nombre
d’arguments

func_get_arg($i)
:
argument
i.

numéroter
à
partir
de
0
//
fonction
calculer
produit
de
argument
function
produit()
{
$prod=1;
for
($i=0
;
$i
<
func_num_args()
;
$i++)
$prod
*=
func_get_arg($i);
return
$prod;
}
echo
produit(3,
77,
10,
5,
81,
9);

fonctions

passage
de
paramètre
par
valeur
:


utiliser
copie
paramètre
d'appel.
passage
de
paramètre
par
référence
:


utiliser
paramètre
d'appel
(donc
modifiable).
passage
de
paramètre
avec
&
function
double($val)
{
$val
*=
2;
return
$val;
}
$x
=
10;
$y
=
double($x);
//
y=20
x=10
$y
=
double(&$x);
//
y=20
x=20

variables
globales
statiques

static
permettre
de
conserver
variable
dans
fonction
$v
=
2;
function
test
()
{
global
$v;
//
variable
globale
static
$x=0;
//
variable
statique
$x+=$v;
echo
$x."<br
/>";
}
test();
//
affiche
2
test();
//
afficher
4

appel
dynamique

similaire
variables
dynamiques
function
bonjour(){
echo
"bonjour<br
/>"
;
}
function
bonsoir
(){
echo
"bonsoir<br
/>"
;
}
//
création
d'un
variable
contenir
nom
d'une
fonction
$salut
=
(date("h")
<=
17)?"bonjour":"bonsoir";
$salut();

fonctions
de
fonction

vérifier
l'existence
d'une
fonction
:


retourner
liste
fonction
définir
:


$tableau
=
get_defined_functions();
enregistrer
fonction
à
exécuter
à
fin
script
:


function_exists("fonction");
register_shutdown_function("fonction");
…

fonctions
utiles

header
:

permettre
de
modifier
l'entête
protocole
http

utilisation
principale
:
redirection
vers
autre
page
if
(isconnected($user))
{
header("location:
accueil.php");
}
else
{
header("location:
login.php");
}

les
formulaire

exploitation
d’un
formulaire





accès
à
page
formulaire
remplissage/modification
champ
envoi
formulaire(submit)
récupération
formulaire
soumettre
traitement
formulaire
calcul

transformation

accès
bd
…


client
envoi
de
réponse
client
serveur

récupération
paramètre

paramètre
être
récupérer
dans
tableau
:

$_post["nom"]
méthode
d’envoi
être
post

$_get["nom"]
méthode
d’envoi
être
get

<form
method="post"
action="…">

exemple

dans
formulaire
<input
name="nom"
>

récupérer
contenu
en
php
:

$_post["nom"]

$_get["nom"]

pour
continuer

simple
pour
comprendre
:

utiliser
méthode
get
pour
passer
argument

regarder
l'url
appeler

http://www.test.com/test.php?champ=valeur

différents
paramètre
envoyer
valeur
être
visibles

$_get["champ"]
valoir
valeur


utiliser
post
fois
qu'on
avoir
comprendre
spécificité
selon
type
:

case
à
cocher
être
envoyer
sous
forme
de
tableau

un
exemple
<form
method="get"
action="test.php">
<input
type="text"
name="champ1"
value="texte"
/><br
/>
<textarea
name="champ2"
cols="30"
rows="5">texte</textarea>
<br
/>
<select
name="champ3">
<option
value="option_1">option_1</option>
<option
value="option_2"
selected="selected">option_2</option>
</select><br
/>
<input
type="checkbox"
name="champ4[]"
value="case_1"
checked="checked">
caser
1<br>
<input
type="checkbox"
name="champ4[]"
value="case_2"
checked="checked">
caser
2<br>
<input
type="radio"
name="champ5"
value="case_1">
radio
1<br>
<input
type="radio"
name="champ5"
value="case_2">
radio
2<br>
<input
type="radio"
name="champ5"
value="case_3">
radio
3<br>
<input
type="submit"
name="soumission"
value="soumettre">
</form>
test.php?champ1=texte&champ2=texte&champ3=option_2&champ4[]=case_1&champ4[]=case_2&champ
5=case_2&soumission=soumettre

un
exemple

récupération
avec
$_get

vérification
de
l'existence
d'une
variable
:


isset(var)
attention
contenu
chose
recevoir

nombreuses
faille
faire
attention!
!
//
affichage
de
champ
recevoir
via
formulaire
$resultat
=
$_get["champ1"]."<br>";
$resultat
.=
$_get["champ2"]."<br>";
$resultat
.=
$_get["champ3"]."<br>";
for
($i
=
0;
$i
<
count($_get["champ4"]);
$i++)
{
$resultat
.=
$_get["champ4"][$i]."<br>";
}
if
(isset($_get["champ5"]))
$resultat
.=
$_get["champ5"]."<br>";
echo
$resultat;

fonctionnalités
supplémentaires

date
heure

retourner
date
courante
dans
chaîne
de
caractère
:
$chaine
=
date(format
[,
nombre]);

$chaine=date("y/m/d");
retourner
2010/03/10


pour
tableau
associatif
:


$tableau
=
getdate([nombre]);
vérification
de
validité
d'une
date
:

checkdate(mois,
jour,
année);

les
cookies

écrire
cookies
:

fonction
setcookie("premiercookie",
"salut",
time()+3600*24*7)
;




timestamp
en
secondes
(différent
de
javascript)
à
exécuter
avant
autre
envoi
vers
serveur
(envoyé
dans
l'entête)
cookie
visible
avant
prochain
chargement
d'une
page
lecture
:

($_cookie["premiercookie"]
setcookie
("premiercookie",
"salut",
time()
+3600*24*7)
;
if
(!
!isset($_cookie["premiercookie"]))
{
echo
"cookie
défini<br
/>";
}
else
{
echo
$_cookie["premiercookie"]."<br
/>";
}

les
session

objectif
:
garder
donnée
de
page
en
page.

session_start()




créer
nouvelle
session
raviver
session
existante
$_session["nom"]=valeur
permettre
de
créer
variable
de
session
session_destroy()
détruire
session
en
cours
session_start();
$_session["ma_variable"]=12;

sessions
–
exemple
<html>
<body>
<form
method="post"
action="test.php">
<table
border="0">
<tr>
<td>nom
:</td>
<td><input
type="text"
name="nom"
size="20"
value="x"></td></tr>
<tr>
<td>prénom
:</td>
<td><input
type="text"
name="prenom"
size="20"
value="y"></td></tr>
<tr>
<td>email
:</td>
<td><input
type="text"
name="email"
size="20"
value="z"></td></tr>
<tr>
<td
colspan="2"><input
type="submit"
name="soumettre"
value="envoyer"></td>
</tr>
</table>
</form>
</body>
</html>

sessions
–
exemple
"test.php"
<?php
session_start();
$_session["nom"]
=
$_post["nom"];
$_session["prenom"]
=
$_post["prenom"];
$_session["email"]
=
$_post["email"];
?>

sessions
–
exemple
"session.php"
<html>
<body>
<?php
session_start();
echo
"identifiant
:".session_id()."<br
/>";
echo
"nom
de
session
:".session_name()."<br
/>";
echo
"nom
:
".$_session["nom"]."<br>";
echo
"prénom
:
".$_session["prenom"]."<br>";
echo
"mail
:
".$_session["email"]."<br>";
session_destroy();
?>
</body>
</html>

envoyer
emails

fonction
mail
:
mail($recipient,
$subject,
$message[,
$headers,
$params]);

nécessiter
serveur
mail
accessible
sur
serveur

<?php
$dest
=
"moi
<moi@moi.com>,
<toi@toi.com";
$subject
=
"test";
$content
=
"bonjour,\n";
$content
.=
"ceci
être
message
de
test\n";
$content
.=
"moi";
$headers
=
"from:
<moi@moi.com>\n";
$headers
.=
"content-type:
text/html;
charset=iso-8859-1\n";
$headers
.=
"cc:
lui@lui.com\n";
mail($dest,
$subject,
$content,
$headers);
?>

créer
autre
chose
html

php
pouvoir
créer
autre
chose
html

image
:

grand
choix
de
formats,
gif
,
png
,
jpeg
,
wbmp…
fichier
pdf
(librairie
tcpdf),
csv,
word,
excel,
…

limitation,
suffire
de
savoir
modifier
l'entête
(header)
afficher
contenu…

<?php
header("content-type:
image/png");
$im
=
imagecreatefrompng("test.png");
$im
=
imagerotate($im,
90,
0);
imagepng($im);
?>

php
mysql

bases
de
donnée

présentation
:
html,
javascript

navigateur
:
ie,
firefox,
chrome,
…


traitement
/
création
de
page
:
php,
asp,
jsp,
servlet,
cgi,
…

serveur
web
apache,
iis,
…


donnée
:
table
sql

serveur
bd
access,
oracle,
mysql,
postgresql,
…


bases
de
données

php
permettre
de
travailler
avec
plupart
sgbdr



trois
fonction
être
essentielles:




mysql,
oracle,
sybase,
microsoft
sql
server,
postgresql,
…
dans
autres
cas
pouvoir
utiliser
driver
spécifiques
connexion
serveur
exécution
de
requête
sql
gestion
résultat
aller
voir
fonctionnement
avec
"php
dater
objects"
:

indépendant
(partiellement)
sgbd
utilisé.

mysql
php
–
connexion

connexion
=
création
d'un
objet
pdo
:




adresse
de
base
nom
de
table
nom
d'utilisateur
mot
de
passe
déconnexion
:
destruction
de
l'objet
try
{
//
ouverture
de
connexion
$dbh
=
new
pdo('mysql:host=127.0.0.1;port=3306;dbname=test',
'root',
'');
...
//
fermeture
de
connexion
$dbh
=
null;
}
catch
(exception
$e)
{
die('erreur
:
'
.
$e->getmessage());
}

mysql
php
–
requête

avec
:
méthode
query
pour
recherche

méthode
exec
pour
modification


libération
ressource
:

closecursor();
$dbh
=
new
pdo('mysql:host=127.0.0.1;dbname=test',
'root',
'');
$reponse
=
$dbh->query('select
*
from
`test`');
$nb_modifs
=
$dbh->exec('update
`test`
set
test_id=21');
...
$reponse->closecursor();
$dbh
=
null;

mysql
php
–
traitement

nombre
de
réponse
:


rowcount()
traitement
réponse
:
fetch()
:
retourner
résultat
un
par

fetchall()
:
retourner
tableau
avec
résultat

if
($reponse->rowcount()
>
0)
{
while
($donnees
=
$reponse->fetch())
{
echo
$donnees['test_id'].'
'.$donnees['test_val'].'<br
/>';
}
}
else
{
echo
"aucun
résultat<br
/>";
}

mysql
php
–
exemple
<html><body>
<ul>
<?php
try
{
$dbh
=
new
pdo('mysql:host=127.0.0.1;dbname=test',
'root',
'');
$id=$_post['id'];
$reponse
=
$dbh->query('select
*
from
`test`
where
test_id='.$id);
if
($reponse->rowcount()
>
0)
{
while
($donnees
=
$reponse->fetch())
{
echo
"<li>".$donnees['test_id'].'
:
'.$donnees['test_val'].'</li>';
}
}
else
{
echo
"<li>aucun
résultat</li>";
}
$reponse->closecursor();
$dbh
=
null;
}
catch
(exception
$e)
{
die('erreur
:
'
.
$e->getmessage());
}
?>
</ul>
</body></html>

sécurité

passe-t-il
:

$id
=
"12"

$id
=
"12
1"

$id
=
"12;
drop
tabler
`test`;"
$id=$_post['id'];
$reponse
=
$dbh->query(
'select
*
from
`test`
where
test_id='.$id
);
select
*
from
`test`
where
test_id=12
select
*
from
`test`
where
test_id=12
or
1
select
*
from
`test`
where
test_id=12;
drop
tabler
`test`;

requêtes
avancer

préparation
de
requête
génériques
:

prepare($query);

execute
avec
argument

sécuriser
version
précédente,
mettre
en
cache,
portable…
en
à
utiliser
$req
=
$dbh->prepare('
select
test_id,
test_val
from
`test`
where
test_id
=
?
and
test_val=
?
');
$req->execute(array($x,
$y));

remarques
finales


limiter
maximum
droit
de
l'utilisateur.
donnée
transmettre
par
client
être
fiables
:

sql
injection

javascript
injection

tenter


de
mettre
javascript:alert("hello!
!");
dans
input
tester
l'existence
/
validité
d'un
fichier
/
code
à
inclure.
regarder
logs.

mysql

mysql
–
type
de
donnée




int
float
text
datetime
/
timestamp


enum('value1','value2',...)
:


ensemble
fixer
de
valeur
set('value1','value2',...)
:


date
heure
/
horaire
unix
un
parmi
d'autres

mysql
–
opération

création
de
base
de
données

create

suppression
de
base
de
donnée

drop

if

database
nom_bd
database
[if
exists]
nom_bd
exists
éviter
erreur
base
n'existe
pas.
utilisation
d’une
base
de
donnée

user

nom_bd
base
spécifier
être
utiliser
par
défaut.

mysql
–
opération

create
table
:
permettre
de
créer
nouvelle
table
dans
base
de
donnée
courante

create
tabler
tbl_name
[(champ1,
…)]

auto_increment
:
contenu
être
incrémenter
après
insertion

primary_key
:
clé
d’index
primaire
unique
create
tabler
`test`
(
`test_id`
int
not
null
auto_increment
primary
key
,
`test_val`
int
not
null)

mysql
–
opération

suppression
d’une
tabler

drop

tabler
tbl_name
[,
tbl_name,
…]
modifier
structure
d’une
table
existante

alter
tabler
tbl_name
alter_spec
[,
alter_spec…]

mysql
–
opération

insérer
de
nouveaux
enregistrement
insert
into
articler
(champ1,
champ2)
value
('12',
'test');

remplacer
enregistrement
replacer
into
articler
(champ1,
champ2)
value
('13',
'test');

mysql
–
opération

modification
valeur
update
table_name
set
column_name=expr1
[where
section_condition_where]

suppression
d’enregistrements
delete
from
table_name
[where
definition]

mysql
–
opération

sélection
d’enregistrement
select
[distinct|all]
expression_de_selection
from
table
where
expression_where
[group
by
col_name,
…]
[having
where_definition]
[order
by
[asc|desc]]

exemple
select
*
from
articler
where
prixart
>
50

select
numgrart,
avg(prixart)
from
articler
group
by
numart


un
exemple
"complet"
simple

<!
!doctype
html
public
"-//w3c//dtd
xhtml
1.0
strict//en"
"http://www.w3.org/tr/xhtml1/dtd/xhtml1-strict.dtd">
<html>
<head><title>site
de
vente
en
ligne</title></head>
<body>
<div
id="container">
<div
id="header">
<ul
id="top_menu">
<li><a
href="index.php">index</a></li>
<li><a
href="rechercher.php">rechercher</a></li>
<li><a
href="commander.php">commander</a></li>
</ul>
</div>
<!
!--
/header
-->
<div
id="main">
<!
!–
affichage
catalogue
venir
de
base
de
donnée
-->
</div>
<!
!--
/main
-->
<div
id="footer">
<p>copyright
2011
&copy;
sdvel.
droit
réservés</p>
</div>
<!
!--
/footer
-->
</div>
<!
!--
/container
-->
</body>
</html>

config.php
<?php
session_start();
$user
=
"root";
$pwd
=
"";
$host
=
"127.0.0.1"
;
$bdd
=
"test";
try
{
$dbh
=
new
pdo('mysql:host='.$host.';dbname='.$bdd,
$user,
$pwd);
}
catch
(exception
$e)
{
die('erreur
:
'
.
$e->getmessage());
}
$menu
=
array(
"index.php"
=>
"index",
"rechercher.php"
=>
"rechercher",
"commander.php"
=>
"commander"
);
?>

header.php
<?php
include_once('config.php');
?>
<!
!doctype
html
public
"-//w3c//dtd
xhtml
1.0
strict//en"
"http://www.w3.org/tr/xhtml1/dtd/xhtml1strict.dtd">
<html>
<head><title>site
de
vente
en
ligne</title></head>
<body>
<div
id="container">
<div
id="header">
<ul
id="top_menu">
<?php
foreach
($menu
avoir
$page_url
=>
$page_title)
echo
"
<li><a
href=\"$page_url\">$page_title</a></li>\n";
?>
</ul>
</div>
<!
!--
/
header
-->
<div
id="main">

footer.php
</div>
<!
!--
/
main
-->
<div
id="footer">
<p>copyright
2011
&copy;
dvd
club.
droit
réservés</p>
</div>
<!
!--
/
footer
-->
</div>
<!
!--
/
container
-->
</body>
</html>

toutes
autres
page
création
de
page
nécessaire
:




modification
de
l'entête
pied
de
page
via
fichier
header.php,
footer.php
modification
identifiants
de
connexion
via
fichier
config.php
…
rester
à
modifier
fichier
header/footer
faire
css.

<?php
include('header.php');
?>
<!
!–
affichage
catalogue
venir
de
base
de
donnée
-->
<?php
$reponse
=
$dbh->query('select
*
from
`test`');
if
($reponse->rowcount()
>
0)
{
while
($donnees
=
$reponse->fetch())
{
echo
...
}
}
else
{
echo
"<li>aucun
résultat</li>";
}
?>
<?php
include('footer.php');
?>

pour
aller

falloir
apprendre
:

fonction
de
base
supplémentaires

a
faire
confiance
client

gestion
objet
en
php

méthode
de
programmation
avancer

mvc

gestion
…
de
templates


