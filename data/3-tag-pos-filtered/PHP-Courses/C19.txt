php
:
intro
–
html
–
wamp
–
premier
programme
https://openclassrooms.com/courses/concevez-votre-site-web-avec-php-et-mysql/introduction-a-php
http://php.net/manual/fr/langref.php
http://www.w3schools.com/php/
open
class
room
sommaire
sommaire
...................................................................................................................................
1
intro-html-wamp-premiers
programme
................................................................................
3
1.
introduction
php
.........................................................................................................................
3
exemple
exercices...................................................................................................................................
3
objectif
cours
.........................................................................................................................................
3
site
dynamique
site
statique
–
rôle
de
l’utilisateur
de
l’administrateur
............................................
4
historique
php
.........................................................................................................................................
5
architecture
client
serveur
...........................................................................................................................
6
principe
php
:
écrire
code
html
......................................................................................................
9
2.
rappel
html
-
css
.........................................................................................................................12
html
de
base
:
h1-h6,
p,
br,
img................................................................................................................
12
squelette
html
............................................................................................................................................
12
css
de
base
.................................................................................................................................................
13
charger
exemple
html
...............................................................................................................
14
exemple
1
:
page
de
base
....................................................................................................................
14
exemple
2
:
page
de
base
avec
lien
vers
formulaire
.................................................................
15
exemple
3
:
page
de
base
avec
lien
vers
formulaire
dans
tableau
......................................
17
3.
outil
de
développement
...........................................................................................................19
outil
pour
fonctionnement
d’un
site
web............................................................................................
19
outil
de
développement
php-mysql
.......................................................................................................
20
4.
installation
de
wamp......................................................................................................................22
5.
premier
usage
de
wamp
..............................................................................................................23
1
:
démarrer
wamp
...................................................................................................................................
23
2
:
installer
l’icône
wamp
dans
barre
d’icône
..................................................................
23
3
:
passer
wamp
en
français
......................................................................................................................
23
4
:
consulter
serveur
dans
gestionnaire
tâche
........................................................................
24
5
:
tester
wamp
:
afficher
page
wampserver
.......................................................................................
25
6
:
aller
dans
dossier
projet
:
c:\wamp64\www,
créer
dossier
«
home
»
...............................
25
7
:
afficher
contenu
de
«
home
»
dans
page
wampserver
................................................................
25
8
:
accéder
dossier
«
home
»
dans
page
wampserver
.....................................................................
25
premier
programme
en
php
.........................................................................................................26
9
:
premier
programme
php
.......................................................................................................................
26
10
:
fichier
index.php
.................................................................................................................................
27
11
:
deuxième
programme
php..................................................................................................................
28
12
:
consulter
contenu
dossier
d’un
site
en
ligne!
!........................................................................
29
wamp
-
version
détailler
(on
pouvoir
passer!
!)
........................................................................................30
php
–
intro
–
html
–
wamp
–
premier
programme
–
page
1/53

0
:
reprise
détailler
paragraphe
précédent
:
premier
usage
-
résumer
............................................
30
1
:
tester
wamp
.........................................................................................................................................
30
2
:
travailler
avec
fichier
php
.............................................................................................................
32
3
:
paramétrages
divers
..............................................................................................................................
37
4
:
phpmyadmin
.........................................................................................................................................
37
5
:
paramétrage
installation
:
display_errors
display_startup_errors
...........................................
37
mamp
–
version
détailler
...................................................................................................................39
1
:
principes.................................................................................................................................................
39
2
:
lancer
mamp
........................................................................................................................................
39
3
:
problème
d’installation
–
problème
de
port
.........................................................................................
39
4
:
accès
projet
web
...........................................................................................................................
39
5
:
phpmyadmin
.........................................................................................................................................
39
6
:
fichier
php.ini
........................................................................................................................................
40
trois
exemple
de
l’instruction
echo
(ou
print)
.................................................................................41
charger
installer
exemple
...............................................................................................................
41
exemple
1
:
code
html
minimum..............................................................................................................
41
exemple
2
:
code
html
minimum
avec
echo
php
................................................................................
42
exemple
3
:
page
html
standard
avec
echo
php
.................................................................................
43
exercice
echo
..............................................................................................................................................
44
principe
généraux
code
php
................................................................................................................
45
8.
gestion
erreur
.........................................................................................................................46
affichage
erreur
-
rappel
...................................................................................................................
46
principaux
message
d’erreurs
...................................................................................................................
46
tp
:
gestion
erreur
-
variables
display_errors
display_startup_errors
à
.................................
47
inclusion
de
fichier
php
–
factorisation
code
html
....................................................................48
rappel
sur
balise
structurantes
html.................................................................................................
48
problème
................................................................................................................................................
48
solution
php
:
l’inclusion
de
fichier
en
php
...............................................................................................
48
exemple
:
....................................................................................................................................................
49
solution
html
:
l’inclusion
de
fichier
en
html..........................................................................................
50
tp
:
includes
................................................................................................................................................
51
10.
documentation
.............................................................................................................................52
principe
.....................................................................................................................................................
52
exemple
d’usage
:
php.net
.........................................................................................................................
52
edition
:
février
2019
php
–
intro
–
html
–
wamp
–
premier
programme
–
page
2/53

intro-html-wamp-premiers
programme
introduction
php
exemple
exercice
exemple
cours
être
dans
fichier
zip
fournir
avec
l’article
cours
:
00-bases-dulangage.zip.
exemple
être
présenter
dans
chapitre
en
vert.
charger
fichier
mettez-le
dans
dossier
partie_2
répertoire
web
«
www
»
serveur
wamp.
exercice
à
faire
être
présenter
dans
chapitre
en
jaune.
objectifs
cours
page
web
:
html
aussi…
•
formulaire
de
contact
•
espace
membre
avec
login
pseudo,
forum,
actualités,
newsletter,
etc.
•
back
office
•
faire
circuler
information
de
page
en
page
•
faire
attention
faille
de
sécurité,
•
enregistrer
infos
dans
bd,
•
structurer
site
avec
poo
l’architecture
mvc.
php
–
intro
–
html
–
wamp
–
premier
programme
–
page
3/53

site
dynamique
site
statique
–
rôle
de
l’utilisateur
de
l’administrateur
site
statique
(web
1.0)
l’utilisateur
consulter
contenu
site
sans
fournir
d’informations
(message,
login,
etc.).
l’administrateur
ajouter
de
nouveaux
élément
dans
site
(de
nouvelles
informations,
de
nouveaux
articles,
de
nouvelles
pages)
en
revenir
dans
code,
programmant.
site
statiques
être
faire
en
html,
css
javascript
:
être
langage
client
universels.
site
dynamique
(web
2.0)
l’utilisateur
fournir
information
site
:
messages,
login,
etc.
partie
site
être
publique
(même
s’il
falloir
mot
de
passe
pour
connecter)
:
c’est
front-office.
l’administrateur
gérer
contenu
site
(ajout,
modification,
suppression
d’informations,
d’articles,
de
messages,
d’utilisateur,
modération
de
messages,
etc.)
par
partie
de
site
dédier
à
l’administration
:
c’est
back-office.
site
dynamiques
être
faire
avec
:
•
langage
client
:
html,
css
javascript
•
langage
serveur
:
php
java
c#
ruby
python
javascript
(node),
etc.
•
langage
serveur
utiliser
en
général
base
de
donnée
:
mysql,
mariadb,
oracle,
sql-server,
postgresql,
sqlite,
etc.
souvent,
associer
bd
à
langage
serveur
:
•
php-mysql,
•
java-oracle,
•
c#-sql-server.
utiliser
framework
faciliter
accélérer
travail
:
•
symfony,
laravel,
zend
(php),
•
jee
(java),
•
.net
(c#),
•
rubyonrails
(ruby),
•
django
(python).
php
–
intro
–
html
–
wamp
–
premier
programme
–
page
4/53

historique
php
php-mysql
:
début
web
2.0
grand
public.
php
:
langage
simple,
«
sale
»
(versus
java,
langage
propre).
aujourd’hui
:
php
objet,
langage
propre.
php
avoir
intégrer
aspect
sécurité.
s’utilise
avec
frameworks
(laravel,
symfony,
zend,
etc.).
https://fr.wikipedia.org/wiki/php
php
–
intro
–
html
–
wamp
–
premier
programme
–
page
5/53

architecture
client
serveur
langage
côté
client
html,
css,
javascript
application
côté
client
navigateur
:
firefox,
internet
explorer,
safari,
opera,
etc.
langage
côté
serveur
sql,
php,
c#,
java,
python,
ruby,
etc.,
application
côté
serveur
serveur
http
(ou
serveur
web)
:
apache
(php),
tomcat
(java,
jee),
iis
(c#,
.net)
serveur
sgbd
:
mysql,
oracle,
sql-server,
postgresql,
mariadb,
sqlite
remarque
:
serveur
c’est
machine
faire
fonctionner
programme
qu’on
appeler
serveur
(la
machine
être
serveur
qu’elle
contenir
programme
serveur).
programme
serveur
être
programme
tourner
24h
sur
24
avoir
caractéristique
de
avoir
d’interface
utilisateur.
seuls
d’autres
programme
pouvoir
communiquer
avec
lui.
programme
serveur
s’appelle
serveur
deamon.
serveur
mysql
sur
pc
s’appelle
mysqld,
«
d
»
pour
deamon.
php
–
intro
–
html
–
wamp
–
premier
programme
–
page
6/53

affichage
d’une
page
html
dans
navigateur
:
3
cas
possibles
:
•
local,
•
langage
serveur,
•
ajax
php
–
intro
–
html
–
wamp
–
premier
programme
–
page
7/53

exemple
:
accéder
à
page
web
php
–
intro
–
html
–
wamp
–
premier
programme
–
page
8/53

principes
php
:
écrire
code
html
ecrire
code
html
en
php
php
servir
à
écrire
code
html
dynamique,
en
aller
par
exemple
chercher
information
dans
bd.
traduction
php
en
html
navigateur
comprendre
langage
html.
serveur
web
permettre
de
traduire
code
php
en
page
html.
principe
de
traduction
1)
client
demander
fichier
html
php
:
page
web,
html
php.
2)
serveur
web
récupérer
page
html
php
traduire
en
html
(il
n’a
rien
à
faire
s’il
n’y
avoir
html.
3)
traduction
pouvoir
consister
à
inclure
d’autres
fichier
fichier
php
à
récupérer
information
dans
base
de
donnée
dans
fichiers.
4)
fin
de
traduction
produire
page
html
être
renvoyer
client
(au
navigateur).
php
–
intro
–
html
–
wamp
–
premier
programme
–
page
9/53

exemples
de
traduction
trouver
instruction
php,
serveur
apache
transformer
instruction
en
code
html
exemple
1
de
traduction
<p>
<?php
echo
"vous
être
visiteur
n°"
.$numvisiteur;
?>
</p>
balise
<p>
être
laisser
quelle.
balise
<
?php
être
traduite.
résultat
de
traduction
donnera,
variable
$numvisiteur
valoir
45
:
<p>
être
visiteur
n°
45
</p>
pouvoir
avoir
instruction
php
interroger
base
de
données.
php
–
intro
–
html
–
wamp
–
premier
programme
–
page
10/53

exemple
2
de
traduction
<p>
<?php
$reponse
=
$bdd->query
('select
prenom
from
utilisateurs
where
id=235');
echo
"bonjour
"
.$reponse;
?>
</p>
donnera,
select
revoir
bertrand
:
<p>
bonjour
bertrand
</p>
pour
fonctionner,
exemple
nécessiter
qu’on
connecter
d’abord
à
bd.
page
html
pouvoir
être
envoyer
navigateur
client
pouvoir
interpréter
afficher.
php
–
intro
–
html
–
wamp
–
premier
programme
–
page
11/53

2.
rappel
html
-
css
html
de
base
:
h1-h6,
p,
br,
img
<h1>
titrer
</h1>
h2-h6
<p>,
<br>,
<img
src
=
«
monimage.jpg
»>
<a
href=
«
url
»
…
dans
balise,
pouvoir
mettre
couple
:
attribut
=
«
valeur
»
squelette
html
<!
!doctype
html>
<html
lang="fr">
<head>
<meta
charset="utf-8"
/>
<link
rel="stylesheet"
href="style.css"
/>
<title>ma
page</title>
</head>
<body>
contenir
html
</body>
</html>
php
–
intro
–
html
–
wamp
–
premier
programme
–
page
12/53

css
de
base
principe
selecteur
{
p1
:v1
;
p2
:v2
;
…
;
pn
:vn}
selecteur
définir
balise
concernées.
couple
propriété
:
valeur.
exemple
de
sélecteur
*
(toutes
balises),
p,
h1,
h2,
etc,
#idceci
:
balise
avec
id
=
«
idceci
»
.classecela
:
balise
avec
class
=
«
classecela
»
p.classecela
:
balise
p
avec
class
=
«
classecela
»
[att]
:
balise
avoir
attribut
nommer
«
att
»
[att
=
petit]
:
balise
avec
attribut
att=«
petit
»
pseudo
classe
pseudo-classe
être
mot-clé
pouvoir
être
ajouter
à
sélecteur
d'indiquer
l'état
spécifique
dans
l'élément
devoir
être
pour
être
cibler
par
déclaration.
placer
après
selecteur
simple
être
introduire
par
«
:
»
elt
:
first-child
:
premier
enfant
d’une
balise
avoir
:
link
:
avoir
visiter
avoir
:
visited
:
avoir
visiter
elt
:
hover
:
élément
survoler
elt
:
focus
:
élément
avoir
focus
php
–
intro
–
html
–
wamp
–
premier
programme
–
page
13/53

chargez
exemple
html
http://bliaudet.free.fr/img/zip/00-rappels-html.zip
exemple
1
:
page
de
base
coder
page
avec
1
titre,
paragraphe
de
texte,
un
sous
titre,
texte,
un
image.
changer
typo
texte
=>
font-family:
comic
;
font-style:italic
;
color:
blue;
encadrer
titre
=>
border
:
solid
black
1px;
centrer
l’image
=>
text-align
:
center
;
pour
mettre
faux
texte
:
chercher
«
lorem
ipsum
dolor
»
sur
google.
site
proposer
faux
texte.
pour
couleur
nommées,
voir
par
exemple
:
http://stylescss.free.fr/couleurs.php.
exemple
1
php
–
intro
–
html
–
wamp
–
premier
programme
–
page
14/53

exemple
2
:
page
de
base
avec
lien
vers
formulaire
rappel
théoriques
sur
formulaire
balise
d’un
formulaire
<form
action=
«
page.php
»
method=get>
:
pour
regrouper
input.
l’action
définir
page
appeler
valider
de
formulaire.
méthode
être
notion
php.
<fieldset>
:
pour
mettre
cadre
input.
<legend>
:
pour
mettre
texte
sur
cadre
<input
type
=
«
text
»
name
=
«
nom
»>
type=text
pour
avoir
champ
de
saisie.
«
name
»
permettre
d’accéder
en
php
à
«
value
»
saisie.
<input
type="submit"
name="submit"
value="valider">
type
:
submit
pour
avoir
bouton
de
validation.
value
c’est
texte
affiché.
cliquer
sur
bouton,
page
faire
appel
à
l’action
de
balise
<form>
<input
type="reset"
name="reset"
value="annuler">
type
:
reset
pour
annuler
saisie
en
cours.
<input
type="hidden"
name="saisie"
value="saisie">
type
:
hydden
faire
circuler
name
value
sans
concerner
l’utilisateur
(c’est
caché).
c’est
utile
en
programmation
php.
<select>
<option>
pour
créer
menu
déroulant.
<textarea>
pour
avoir
zone
de
saisie.
autres
type
de
balise
<
input>
en
préciser
e
type
de
balise
input,
obtenir
comportement
différent
(par
exemple,
avec
type
tel,
saisir
numéro
de
téléphone,
champ
de
saisie
passe
en
rouge).
type=password
:
caractère
cachés,
email,
url,
tel,
number
(+min,
max,
step),
ranger
(+min,
max,
step
avec
curseur),
color
(firefox
proposer
palette
colorée),
date,
search,
chechobox
(+checked)
:
bouton
à
cocher,
radio
:
radio
bouton
(1
seul
parmi
plusieurs).
autres
attribut
de
balise
<
input>
attribut
maxlength
(input)
:
taille
maximum
de
saisie.
attribut
autofocus
(input)
:
dans
input
placer
curseur
dans
champ.
attribut
required
(input)
:
obliger
saisie
avant
d’envoyer
formulaire
(pas
dans
safari).
php
–
intro
–
html
–
wamp
–
premier
programme
–
page
15/53

exemple
2
code
proposer
page
de
l’exercice
1
avec
lien
vers
un
formulaire.
formulaire
renvoyer
vers
page
de
l’exercice
1
valide.
avoir
3
cas
possible
l’âge
:
<18,
18-25,
>25
)
php
–
intro
–
html
–
wamp
–
premier
programme
–
page
16/53

exemple
3
:
page
de
base
avec
lien
vers
formulaire
dans
tableau
rappel
théoriques
sur
tableau
balise
de
structure
:
<table>
<tr>
de
texte
dedans.
•
<
tabler
>
:
tableau
•
<
tr
>
:
ligne
balise
de
donnée
:
<th>
<td>
dans
ligne,
mettre
cellules.
•
<th>
:
pour
nom
de
colonne
(la
1ère
ligne).
•
<td>
:
pour
autres
cellules.
encadrement
minimum
:
<table
border>
•
<table
border>
encadrer
suivre
:
php
–
intro
–
html
–
wamp
–
premier
programme
–
page
17/53

exemple
3
pouvoir
mettre
formulaire
dans
tableau
:
avoir
même
résultat
précédemment,
sauf
zone
de
saisie
être
alignées.
php
–
intro
–
html
–
wamp
–
premier
programme
–
page
18/53

3.
outil
de
développement
outil
pour
fonctionnement
d’un
site
web
présentation
pour
faire
fonctionner
site
web,
falloir
outils,
côté
client
côté
serveur.
coter
client
:
navigateur
navigateur
interagir
l’utilisateur.
comprendre
html,
css
javascript,
comprendre
php.
côté
serveur
:
serveur
web
serveur
de
bd
1
serveur
web
(ou
serveur
http)
interagir
avec
navigateur
serveur
de
bd.
serveur
web
traduire
code
php
en
html.
comprendre
php.
serveur
de
bd
interagir
avec
serveur
web
disque
dur
pour
sauvegarder
récupérer
données.
comprendre
sql
1
pour
différence
entre
serveur
web
serveur
d’application
:
https://www.supinfo.com/articles/single/1156-difference-serveur-web.
pdf
correspondre
lien
marcher
:
http://bliaudet.free.fr/img/pdf/difference-entre-serveur-web-et-serveur-d-application.pdf
php
–
intro
–
html
–
wamp
–
premier
programme
–
page
19/53

outils
de
développement
php-mysql
présentation
pour
développer
site
web,
falloir
outil
permettre
d’écrire
code
de
faire
de
machine
serveur
pour
navigateur.
coter
client
–
partir
statique
•
html,
css
:
editeur
de
texte
(vscode,
sublimetext,
brackets,
etc.)
•
affichage
de
page
:
navigateur
•
hébergement
site
:
logiciel
ftp
côté
serveur
-
partie
dynamique
•
php
:
editeur
de
texte
•
sql
:
editeur
de
texte
•
serveur
http
:
apache
•
serveur
sgbd
:
mysql
php
–
intro
–
html
–
wamp
–
premier
programme
–
page
20/53

solutions
exister
solution
en
un
fournir
serveur
http
sgbd
qu’une
interface
utilisateur
pour
utiliser
serveur
pour
tester
code
html
php
sur
machine
de
développement
jouer
rôle
serveur
pour
en
client.
par
exemple
:
wamp
(windows,
apache,
mysql,
php),
mamp
sur
mac,
lampp
sous
linux
(un
p
en
pour
perl),
xampp.
easyphp,
etc.
solution
n’est
parfaire
supérieure
à
autre.
c’est
question
d’habitude.
choisir
wamp.
pouvoir
utiliser
xampp.
mamp
être
sur
mac.
php
–
intro
–
html
–
wamp
–
premier
programme
–
page
21/53

4.
installation
de
wamp
http://bliaudet.free.fr/article.php3?id_article=307
aller
dans
l’option
3
:
wamp
aller
télécharger
fichier
d’installation
:
wampserver3.1.4_x64.exe
(selon
version).
pendant
l’installation
:
choisir
navigateur
par
défaut
(chrome
firefox
de
préférence,
internet
explorer),
choisir
éditeur
par
défaut
(vscode
de
préférence
sublime
text).
autoriser
déblocage
pare-feu.
détail
sur
l’installation
de
wamp
:
dans
l’article
:
http://bliaudet.free.fr/article.php3?id_article=277,
poly
:
http://bliaudet.free.fr/img/pdf/01_installation_de_wamp.pdf
php
–
intro
–
html
–
wamp
–
premier
programme
–
page
22/53

5.
premier
usage
de
wamp
1
:
démarrer
wamp
falloir
autoriser
pare-feu
2
serveur
pouvoir
démarrer.
double
clic
sur
raccourci
sur
bureau
:
ca
marche!
!on
obtenir
icône
verte.
avoir
icône
rouge,
c’est
qu’aucun
serveur
n’est
démarré.
avoir
icône
orange,
c’est
qu’un
seul
serveur
être
démarré.
pouvoir
démarrer,
arrêter,
redémarrer
service
(services
=
serveurs).
2
:
installer
l’icône
wamp
dans
barre
d’icône
déplacer
l’icône
pour
qu’elle
dans
barre
icône
:
3
:
passer
wamp
en
français
icône
wamp
–
bouton
gauche
-
choix
langage
php
–
intro
–
html
–
wamp
–
premier
programme
–
page
23/53

4
:
consulter
serveur
dans
gestionnaire
tâche
•
pouvoir
regarder
processus
tourner
sur
windows
:
ctrl-alt-sup
ctrl-shiftesc.
•
falloir
afficher
détails.
•
apache
http
server
:
c’est
serveur
web.
pouvoir
en
avoir
deux,
c’est
même!
!
•
mysqld
:
c’est
serveur
de
bd
mysql.
pouvoir
en
avoir
deux,
c’est
même!
!il
pouvoir
avoir
3
:
un
de
pour
mariadb!
!
•
dans
cas,
arrêter
serveurs,
devoir
rester
aucun.
rester
falloir
arrêter!
!
php
–
intro
–
html
–
wamp
–
premier
programme
–
page
24/53

5
:
tester
wamp
:
afficher
page
wampserver
dans
navigateur
:
localhost
icône
wamp
–
bouton
droit
-
choix
localhost
(icône
wamp
:
icône
verte
dans
dans
zone
de
notification
:
en
à
droite).
page
wampserver
apparaît.
6
:
aller
dans
dossier
projet
:
c:\wamp64\www,
créer
dossier
«
home
»
icône
wamp
–
bouton
droit
-
choix
répertoire
www
mettre
dossier
:
«
home
»
dans
répertoire
www
7
:
afficher
contenu
de
«
home
»
dans
page
wampserver
icône
wamp
–
bouton
droit
-
choix
localhost
dossier
home
apparaître
dans
zone
«
projet
»
:
n’est
cliquable.
8
:
accéder
dossier
«
home
»
dans
page
wampserver
icône
wamp
–
bouton
droit
-
choix
localhost
dans
l’url,
trouver
:
localhost
ajouter
/home
:
l’url
être
:
localhost/home
arriver
sur
page
web
répertoire
home
:
php
–
intro
–
html
–
wamp
–
premier
programme
–
page
25/53

6.
premier
programme
en
php
9
:
premier
programme
php
coder
dans
dossier
«
home
»,
ajouter
fichier
test_1.php
avec
code
suivre
<
?php
echo
«<h1>hello
world
</h1>
»
;
?>
test
fichier
apparaître
dans
page
wampserver,
dans
page
de
l’url
http://localhost/home/
en
cliquer
dessus,
apparaître
page
html
correspondre
code.
pouvoir
visualiser
code
html
avec
maj-ctrl-i
(pour
firefox).
voir
code
html.
php
–
intro
–
html
–
wamp
–
premier
programme
–
page
26/53

10
:
fichier
index.php
répertoire
contenir
fichier
index.php
index.html,
être
exécuter
rentrer
dans
dossier.
dupliquer
test_1.php
en
nommer
index.php
ajouter
:
echo
«<h1>hello
world
avec
index
</h1>
»
;
vérifier
propriété.
ensuite,
renommer
index.php
en
index0.php.
vérifier
qu’il
n’y
avoir
d’exécution
automatique.
php
–
intro
–
html
–
wamp
–
premier
programme
–
page
27/53

11
:
deuxième
programme
php
coder
dans
dossier
«
home
»,
ajouter
fichier
test_2.php
avec
code
suivant
<?php
//
en
utiliser
l'url
:
//
localhost/home/helloworld.php?name=bertrand
$name
=
$_get['name'];
//
header
préciser
type
de
page
header('content-type:
text/html');
echo
'<html>';
echo
'<body>bonjour
'.
$name
.
'</body>';
echo
'</html>'
?>
test
fichier
apparaître
dans
page
wampserver,
dans
page
de
l’url
http://localhost/home/
en
cliquer
dessus,
apparaître
page
html
correspondre
code
:
avoir
bug!
!
falloir
ajouter
dans
l’url
:
?name=bertrand
marche
:
http://localhost/home/test_2.php?name=bertrand
pouvoir
visualiser
code
html
avec
maj-ctrl-i
(pour
firefox).
voir
code
html.
php
–
intro
–
html
–
wamp
–
premier
programme
–
page
28/53

12
:
consulter
contenu
dossier
d’un
site
en
ligne!
!
exemple
:
http://www.amberieunatation.fr/spip/img/jpg/
sur
site,
constater
qu’on
pouvoir
accéder
contenu
dossier!
!
pouvoir
remonter
dossier
:
http://www.amberieunatation.fr/spip/img
jusqu’à
racine
site
:
http://www.amberieunatation.fr
racine
contenir
fichier
index.php
:
c’est
page
d’accueil
site
s’affiche.
pour
éviter
problème,
pouvoir
par
exemple
mettre
fichier
index.php
dans
répertoire
renvoyer
par
exemple
sur
page
d’accueil
(fonction
header
en
php).
php
–
intro
–
html
–
wamp
–
premier
programme
–
page
29/53

wamp
-
version
détailler
(on
pouvoir
passer!
!)
0
:
reprise
détailler
paragraphe
précédent
:
premier
usage
-
résumer
chapitre
détailler
qu’on
avoir
faire
paragraphe
précédent
1
:
tester
wamp
démarrer
wamp
falloir
autoriser
pare-feu
2
serveur
pouvoir
démarrer.
double
clic
sur
raccourci
sur
bureau
:
ca
marche!
!on
obtenir
icône
verte.
passer
wamp
en
français
icône
wamp
–
bouton
gauche
-
choix
langage
tester
wamp
:
afficher
page
wampserver
dans
navigateur
:
localhost
icône
wamp
–
bouton
droit
-
choix
localhost
(icône
wamp
:
icône
verte
dans
dans
zone
de
notification
:
en
à
droite).
page
wampserver
apparaît.
php
–
intro
–
html
–
wamp
–
premier
programme
–
page
30/53

la
zone
«
projet
»
être
vide.
php
–
intro
–
html
–
wamp
–
premier
programme
–
page
31/53

2
:
travailler
avec
fichier
php
aller
dans
dossier
projet
:
c:\wamp64\www
aller
dans
c:\wamp64\www.
c’est
dans
dossier
qu’on
mettre
dossier
de
travail.
créer
dossier
«
mon-site
»,
par
exemple.
zone
«
projet
»
contenir
nom
dossier
qu’on
venir
de
créer.
accéder
projet
:
localhost/mon-site
en
entrant
localhost/mon-site
dans
navigateur,
accéder
projet
:
php
–
intro
–
html
–
wamp
–
premier
programme
–
page
32/53

php
–
intro
–
html
–
wamp
–
premier
programme
–
page
33/53

accès
direct
projet
cliquer
sur
nom
projet,
obtenir
erreur
n’accède
projet.
solution
1
:
pour
remédier
à
:
sur
l’icône
verte
wamp
:
bouton
droit
/
paramètre
wamp
/
ajouter
localhost
dans
l’url.
ca
ajouter
warning
dans
zone
«
projet
».
pouvoir
accéder
projet
en
cliquer
sur
nom.
solution
2
:
dans
dossier
projet
(c:/wampp64/www)
ouvrez
fichier
index.php.
vers
ligne
33,
après
ligne
:
$suppress_localhost
=
($wampconf['urladdlocalhost']
==
'off'
?
true
:
false);
ajouter
:
$suppress_localhost=
false;
solution
donner
mêmes
résultat
précédente,
en
compliqué!
!
php
–
intro
–
html
–
wamp
–
premier
programme
–
page
34/53

solution
3
:
«
à
main
»
dans
navigateur
:
localhost/mon-site
php
–
intro
–
html
–
wamp
–
premier
programme
–
page
35/53

création
d’un
premier
fichier
php
ouvrir
dossier
«
mon-site
»
avec
vscode
sublimetext
:
sur
nom
dossier,
ouvrir
fichier
:
new
file.
save
:
l’appelle
index.php,
trouver
dans
répertoire
mon-site.
dans
fichier
index.php
:
exécuter
fichier
php
suffire
de
cliquer
sur
dossier
«
mon-site
».
par
défaut,
fichier
«
index.php
»
être
envoyer
serveur
apache
retourne
navigateur.
php
–
intro
–
html
–
wamp
–
premier
programme
–
page
36/53

3
:
paramétrages
divers
bouton
droit
sur
l’icône
verte
wamp
langue
bouton
droit
/
language/
français
paramètre
de
wamp
«
ajouter
localhost
dans
l’url
»
:
pour
l’accès
direct
dossier
de
travail,
par
exemple.
outil
pour
tester
ports,
par
exemple
clic
sur
l’icône
verte
wamp
•
démarrer
arrêter
serveur
(services)
:
apache
mysql
•
accès
direct
à
page
localhost
•
accéder
à
phpmyadmin,
l’utilitaire
pour
gérer
bd.
•
paramétrer
apache,
mysql,
php
(amp).
4
:
phpmyadmin
accéder
à
phpmyadmin
:
http://localhost/phpmyadmin/
icône
wamp
/
phpmyadmin
5
:
paramétrage
installation
:
display_errors
display_startup_errors
fichier
php.ini
exister
fichier
php.ini
paramètre
l’usage
de
wamp
pour
php.
trouver
dans
clic
/
php
sous
mamp,
falloir
trouver
bon!
!quand
aller
dans
phpinfo,
trouver
configuration
filer
:
/applications/mamp/bin/php/php7.0.0/conf
c’est
fichier
qu’il
falloir
modifier.
variables
display_errors
=
display_startup_errors
=
variables
display_errors
display_startup_errors
permettre
d’afficher
message
d’erreur
explicites.
devoir
être
à
message
d’erreur
s’affichent.
php
–
intro
–
html
–
wamp
–
premier
programme
–
page
37/53

il
falloir
redémarrer
serveur
apache
prise
en
compte
faite.
pouvoir
voir
dans
phpinfo
de
mamp.
alternative
pour
site
en
production
attention,
message
d’erreurs
devoir
être
voir
par
utilisateurs.
pour
site
en
production,
falloir
passer
par
fichier
de
log.
regarder
dans
fichier
de
conf
php
–
intro
–
html
–
wamp
–
premier
programme
–
page
38/53
d’informations.

mamp
–
version
détailler
1
:
principe
suivre
même
logique
pour
tester
wamp.
falloir
suivre
chapitre
précédent
pour
faire
partie
pratique
revenir
dans
chapitre
pour
voir
spécificité
de
mamp.
2
:
lancer
mamp
•
falloir
autoriser
parefeu
2
serveur
pouvoir
démarrer.
•
pour
démarrer
mamp
:
application/mamp/mamp.appp
programme
proposer
d’utiliser
mamp
pro
:
évite!
!
•
préférence
:
pour
gérer
port
serveur
démarrage
automatique
serveur
•
démarrer
/
arrêter
serveur
3
:
problème
d’installation
–
problème
de
port
onglet
préférence,
menu
port
:
apache
être
sur
8080
par
défaut
4
:
accès
projet
web
localhost
:8080
dans
navigateur,
taper
:
«
localhost
:8080
».
http://localhost:8080/
page
index
of
/
apparaît.
être
vide,
contenir
projets.
page
correspondre
répertoire
:
/applications/mamp/htdocs
répertoire
être
paramétrable
dans
préférence
/serveur
web
ouvrir
page
web
start
/mon
site
web
accéder
à
page
localhost
:8080
ouvrir
page
web
start
/
site
web
5
:
phpmyadmin
accéder
à
phpmyadmin
:
http://localhost:8080/phpmyadmin
php
–
intro
–
html
–
wamp
–
premier
programme
–
page
39/53

ouvrir
page
web
start
/tools
/
phpmyadmin
6
:
fichier
php.ini
exister
fichier
php.ini
paramètre
l’usage
de
wamp
pour
php.
trouver
dans
clic
/
php
sous
mamp,
falloir
trouver
bon!
!quand
aller
dans
phpinfo,
trouver
configuration
filer
:
/applications/mamp/bin/php/php7.0.0/conf
c’est
fichier
qu’il
falloir
modifier.
php
–
intro
–
html
–
wamp
–
premier
programme
–
page
40/53

7.
trois
exemple
de
l’instruction
echo
(ou
print)
charger
installer
exemple
commencer
par
charger
dossier
zipper
:
02-premiers-programmes-echo.zip
installez-le
dans
répertoire
serveur
wamp
(www).
exemple
1
:
code
html
minimum
objectifs
simple
affichage
de
texte
sans
php.
comparaison
entre
fichier
.html
.php
code
dans
php
fichier
exemple_01_bonjourhtml.html
bonjour
sans
balise
dans
fichier
.php
<h3>bonjour
avec
balise
dans
fichier
.php</h3>
résultat
:
bonjour
sans
balise
dans
fichier
.php
bonjour
avec
balise
dans
fichier
.php
fichier
exemple_01_bonjourhtml.php
bonjour
sans
balise
dans
fichier
.php
<h3>bonjour
avec
balise
dans
fichier
.php</h3>
résultat
:
bonjour
sans
balise
dans
fichier
.php
bonjour
avec
balise
dans
fichier
.php
explication
résultat
être
même
dans
deux
cas.
fichier
.html
être
fournir
navigateur.
texte
s’affiche.
fichier
.php
être
traiter
par
serveur
apache.
contenir
de
balise
php
:
serveur
web
n’effectue
transformation.
résultat
être
transmettre
navigateur.
texte
s’affiche.
éviter
d’utiliser
fichier
html
dans
programme
côté
serveur.
php
–
intro
–
html
–
wamp
–
premier
programme
–
page
41/53

exemple
2
:
code
html
minimum
avec
echo
php
objectifs
simple
affichage
de
texte
avec
php
comparaison
entre
fichier
.html
.php
fichier
php
:
<?php
echo
"bonjour
avec
balise
php";
?>
<?php
echo
"<h3>bonjour
avec
balise
html
php</h3>";
?>
résultat
dans
navigateur
:
bonjour
sans
balise
php
bonjour
avec
balise
html
php
pager
html
générer
:
bonjour
sans
balise
php
<h3>bonjour
avec
balise
html
php</h3>
explication
•
fichier
.php
être
traiter
par
serveur
apache.
•
ligne
de
php
trouver
entre
:
<
?php
?>
•
echo
être
instruction.
instruction
être
terminer
par
un
;
•
serveur
apache
traiter
instruction
situer
entre
<
?php
?>.
echo
être
instruction
permettre
d’écrire
trouver
entre
guillemets.
•
résultat
être
fichier
html
être
transmettre
navigateur.
texte
s’affiche.
remarquer
faire
echo
en
php
d’afficher
texte
en
html,
servir
à
rien.
php
être
langage
de
programmation
permettre
de
récupérer
information
formulaire
html,
de
faire
calcul
complexes,
d’enregistrer
information
dans
bd
dans
fichier,
de
récupérer
information
dans
bd
dans
fichier,
de
remplir
tableau
avec
donnée
de
bd,
etc.
php
–
intro
–
html
–
wamp
–
premier
programme
–
page
42/53

exemple
3
:
page
html
standard
avec
echo
php
objectifs
pager
html
classique
avec
simple
affichage
de
texte
php.
comparaison
entre
fichier
.html
.php
fichier
php
:
<!
!doctype
html>
<html
lang="fr">
<head>
<meta
charset="utf-8"
/>
<title>exemple
1:
echo</title>
</head>
<body>
<?php
echo
"<h1>affichage
de
texte
html
php</h1>"
?>
<?php
echo
"<p>
php
:";
echo
"<span
style=\"color:
red;\">
ligner
écrire
avec
\"echo\"
<strong>php</strong>
</span></p>";
?>
</body>
</html>
résultat
dans
navigateur
:
affichage
de
texte
html
php
php
:
ligne
écrire
avec
"echo"
php.
page
html
générer
:
<!
!doctype
html>
<html
lang="fr">
<head>
<meta
charset="utf-8"
/>
<title>exemple
1:
echo</title>
</head>
<body>
<h1>affichage
de
texte
html
php</h1>
<p>
php
:
<span
style="color:
red;">
ligner
écrire
avec
"echo"
<strong>php</strong>
</span>
</p>
</body>
</html>
explication
php
–
intro
–
html
–
wamp
–
premier
programme
–
page
43/53

le
h1
être
mettre
dans
echo
dans
<
?php
séparer
(ça
servir
à
rien,
c’est
pour
test!
!).
<
?php
suivant
fait
:
echo
ouvre
<p>
autre
ouvre
<span>
avec
style
strong
fermer
</span>
le</p>
ouvrir
dans
précédent
echo.
pour
mettre
guillemet
dans
texte
d’un
echo
(donc
pour
afficher
guillemet
dans
code
html),
mettre
\"
exercice
echo
coder
page
précédente
avec
échos.
faut-il
en
mettre
minimum
?
php
–
intro
–
html
–
wamp
–
premier
programme
–
page
44/53

principes
généraux
code
php
régler
•
code
php
commencer
par
<
?php
(sans
espace)
finir
par
?>.
aller
parler
de
«
balise
php
».
•
pouvoir
placer
balise
php
n’importe
dans
code
html
(pas
dans
code
css!
!)
•
dans
balise
php
pouvoir
mettre
d’instructions
de
ligne
php
qu’on
veut.
•
devoir
mettre
un
;
à
fin
de
instruction
php.
•
pouvoir
mettre
commentaire
entre
/*
*/
dans
code
php.
commentaire
pouvoir
s’étaler
sur
lignes.
commentaire
disparaître
dans
code
html.
•
pouvoir
mettre
commentaire
de
fin
de
ligne
avec
//
erreur
courantes
•
parse
error
:
oublier
;
à
fin
d’une
instruction
(le
;
être
facultatif
sur
dernière
instruction
•
fichier
.htlm
à
place
d’un
fichier
.php
php
–
intro
–
html
–
wamp
–
premier
programme
–
page
45/53

8.
gestion
erreur
affichage
erreur
-
rappel
variables
display_errors
=
display_startup_errors
=
variables
display_errors
display_startup_errors
permettre
d’afficher
message
d’erreur
explicites.
par
défaut,
erreur
s’affichent
sur
pc.
voir
variables,
ouvrez
fichier
php.ini
:
wamp
/
php
/
php.ini
chercher
variables
display_errors
display_startup_errors
trouver
ligne
:
(sans
;
début,
c’est
commentaire)
display_startup_errors
=
display_errors
=
falloir
redémarrer
serveur
apache
prise
en
compte
faite.
erreur
s’affichent
pouvoir
voir
variables
dans
phpinfo
de
mamp.
alternative
pour
site
en
production
attention,
message
d’erreurs
devoir
être
voir
par
utilisateurs.
pour
site
en
production,
falloir
passer
par
fichier
de
log.
regarder
dans
fichier
de
conf
d’informations.
principaux
message
d’erreurs
parse
error
est
indiquer
fichier,
ligne,
cause.
l’erreur
pouvoir
être
sur
ligne
sur
ligne
précédente.
pouvoir
correspondre
à
:
•
oubli
de
;
•
apostrophe
guillemet
fermé
•
concaténation
à
problème
undefined
function
fonction
n’est
reconnaître
s’en
servir
:
falloir
include.
wrong
parameter
count
fonction
n’a
bon
nombre
de
paramètres.
php
–
intro
–
html
–
wamp
–
premier
programme
–
page
46/53

erreur
de
bd
erreur
sql
être
explicites.
falloir
vérifier
code
sql
fonctionne.
headers
already
sentir
by…
avoir
code
html
avant
header
session
maximum
execution
time
exceeded
boucle
sans
fin
tp
:
gestion
erreur
-
variables
display_errors
display_startup_errors
à
charger
zip
«
04-exercice-gestion-erreur.zip
»
essayer
programme
tp_gestion_erreur.php
corriger
erreurs.
affichage
erreur
sur
mac
par
défaut,
erreur
s’affichent
sur
mac.
falloir
modifier
variables
display_errors
display_startup_errors
dans
fichier
php.ini
pour
:
démarrer
mamp
:
ouvrir
page
web
start
/
phpinfo
chercher
php.ini
trouver
pour
configuration
filer
(php.ini)
path
valeur
:
/applications/mamp/bin/php/php7.0.0/conf
aller
dans
répertoire
ouvrez
fichier
php.ini
passer
deux
variables
à
:
display_startup_errors
=
display_errors
=
relancer
serveur
:
mamp
/
arrêter
serveur
–
mamp
/
démarrer
serveur
affichage
erreur
sur
pc
par
défaut,
erreur
s’affichent
sur
pc.
voir
variables,
ouvrez
fichier
php.ini
:
wamp
/
php
/
php.ini
chercher
variables
display_errors
display_startup_errors
trouver
ligne
:
(sans
;
début,
c’est
commentaire)
display_startup_errors
=
display_errors
=
erreur
s’affichent
php
–
intro
–
html
–
wamp
–
premier
programme
–
page
47/53

9.
inclusion
de
fichier
php
–
factorisation
code
html
rappel
sur
balise
structurantes
html
html
5
proposer
balise
de
structuration
page
:
•
header,
nav,
footer
baliser
unique
dans
page
correspondre
à
élément
qu’on
retrouver
sur
page
site
•
section,
article,
aside
balise
multiples
dans
page
différentes
selon
page
•
div
balise
de
structuration
personnelle.
problème
header,
nav
footer
aller
en
général
retrouver
sur
pages.
éviter
de
répéter
même
code
sur
page
de
devoir
faire
mise
à
jour
sur
page
?
solution
php
:
l’inclusion
de
fichier
en
php
code
de
balise
header
pouvoir
être
mettre
dans
fichier
header.php
ensuite,
l’instruction
«
include
»
permettre
de
faire
appel
à
fichier
de
l’inclure
dans
fichier
appelant.
include
(«
fichier.php
»)
avec
l’instruction
suivante
:
<
?php
include
(«
header.php
»)
;
?>
code
de
page
être
limiter
à
qu’elle
contenir
de
spécifique.
modifier
header,
modifier
pour
pages.
pouvoir
faire
même
chose
avec
footer
nav.
nav
être
dans
header,
pouvoir
mettre
l’inclusion
dans
fichier
header.php
syntaxe
include
être
fonction
avec
parenthèse
à
fournir
nom
fichier
qu’on
vouloir
charger,
entre
guillemets,
à
différence
de
echo
prendre
de
parenthèses.
php
–
intro
–
html
–
wamp
–
premier
programme
–
page
48/53

exemple
:
body
avec
include
header
footer
<body>
<?php
include("header.php");?>
<section>
</section>
<?php
include("footer.php");
?>
</body>
header
inclure
nav
<header>
<h1>mon
super
site</h1>
<?php
include("nav.php");
?>
</header>
php
–
intro
–
html
–
wamp
–
premier
programme
–
page
49/53

solution
html
:
l’inclusion
de
fichier
en
html
l’ancienne
solution
:
inclusion
de
fichier
en
html
:
balise
frame
(obsolète)
site
n’utilisent
de
langage
serveur
utiliser
balise
<frame>
pour
factoriser
pages.
baliser
n’est
supporter
par
html
être
remplacer
par
balise
<iframe>
http://www.w3schools.com/tags/tag_frame.asp
balise
frame
pas.
s’utilise
à
l’intérieur
d’une
baliser
<frameset>
balise
<iframe>
:
inclusion
de
fichier
en
html
(déprécié)
balise
servir
à
inclure
morceau
qu’un
autre
site
permettre
de
partager.
a
adresse,
site
fournir
iframe
dans
bouton
exporter
:
https://www.franceculture.fr/emissions/les-series-musicales-dete/les-series-musicales-detelundi-24-juillet-2017
usage
être
déprécié.
<!
!doctype
html>
<html>
<body>
<iframe
src="https://www.franceculture.fr/player/exportreecouter?content=9c19db61-0761-4b50-b4ae-907f0dbf3259"
width="481"
frameborder="0"
scrolling="no"
height="137">
<p>your
browser
does
not
support
iframes.</p>
</iframe>
</body>
</html>
widget
widgets
tendre
à
remplacer
iframe.
être
de
simples
div
à
copier
dans
site.
widget
de
météo
:
http://www.meteovista.fr/widgets-meteo/4266446/0
php
–
intro
–
html
–
wamp
–
premier
programme
–
page
50/53

tp
:
includes
charger
zip
<05-exercice-include.zip
»
contenir
dossier
avec
page
html.
1)
réécrivez-la
en
sortir
header
footer
dans
fichier
séparer
utiliser
include.
tester
résultat.
2)
ensuite,
mettre
fichier
header
footer
dans
dossier
«
include
»
fichier
css
dans
in
dossier
«
css
».
but
être
de
n’avoir
fichier
index1.php
à
racine.
3)
ajouter
page
contenir
l’en-tête
footer
section
contenir
lien
permettre
de
revenir
à
l’index
de
page
principale
(index1.php).
dans
index1.php,
un
menu
permettre
d’accéder
à
nouvelle
page
qu’on
appeler
index2.php.
php
–
intro
–
html
–
wamp
–
premier
programme
–
page
51/53

10.
documentation
principe
référence
exister
site
de
référence
pour
avoir
de
documentation
:
php.net
:
http://php.net/docs.php
w3school
:
http://www.w3schools.com/php/
cours
:
coder
academy
:
https://www.codecademy.com/learn/php
openclassroom
:
https://openclassrooms.com/courses/concevez-votre-site-web-avec-php-etmysql
https://openclassrooms.com/paths/developpeur-php-symfony
sûr
:
google!
!
bons
usage
falloir
essayer
de
passer
par
documentation
«
officielle
»
pour
comprendre
possible
sans
contenter
d’un
exemple
marche.
falloir
apprendre
à
servir
de
documentation
exemple
d’usage
:
php.net
page
d’accueil
en
français
http://php.net/manual/fr/
:
trouver
sommaire
liste
fonction
http://php.net/manual/fr/funcref.php
noter
:
extension
sur
mathématique
:
contenir
math
:
fonction
mathématiques
traitement
de
texte
:
contenir
chaîne
de
caractère
:
fonction
de
traitement
de
chaines.
accès
direct
à
fonction
:
php.net/nomfonction
php.net/date
:
j’arrive
sur
fonction
date
:
http://php.net/manual/fr/function.date.php
remonter
menu
de
droite,
revenir
niveau
de
liste
fonctions.
liste
thématique
de
fonction
•
audio
php
–
intro
–
html
–
wamp
–
premier
programme
–
page
52/53

•
identification
•
ligner
de
commande
•
archivage
compression
•
carte
de
crédit
•
cryptographier
•
base
de
données
•
date
heure
•
système
de
fichier
•
langage
humain
encodage
de
caractère
•
génération
traitement
image
•
emails
•
mathématiques
•
donner
non-textuelles
•
contrôle
processus
•
moteurs
de
recherche
•
serveur
•
session
•
traitement
texte
•
variables
type
•
service
web
•
windows
•
xml
php
–
intro
–
html
–
wamp
–
premier
programme
–
page
53/53

les
base
langage
php
http://php.net/manual/fr/langref.php
http://www.w3schools.com/php/
open
class
room
sommaire
sommaire
.................................................................................................................................
1
base
langage
php
..............................................................................................................
3
installation
fichier
de
test
............................................................................................................
3
variables
........................................................................................................................................
4
définition
......................................................................................................................................................
4
type
.......................................................................................................................................................
4
vérifier
type
..............................................................................................................................................
5
signification
..............................................................................................................................................
5
pouvoir
faire
avec
variable
............................................................................................................
5
exemple
1
:
pouvoir
utiliser
variable
dans
calcul
.............................................................................
6
constantes...........................................................................................................................................
6
test
:
exemple
2
3
.........................................................................................................................
7
if,
else,
elseif
.................................................................................................................................................
7
opérateur
de
comparaison
.........................................................................................................................
7
opérateur
logiques
......................................................................................................................................
7
switch
............................................................................................................................................................
7
opérateur
de
comparaison
ternaire
:
?
:
......................................................................................................
7
html
dans
php
séparer
php
:
exemple
4
..................................................................................
8
html
dans
php
.........................................................................................................................................
8
html
séparer
php
....................................................................................................................................
8
html
dans
php
avec
balise
heredoc
:
<<<
...............................................................................................
8
boucle
:
exemple
5
.............................................................................................................................
9
while
.............................................................................................................................................................
9
for
.................................................................................................................................................................
9
exercice
:
10
premier
entiers,
carrés
racine
dans
tableau
html
..................................................
10
débranchements.................................................................................................................................11
présentation
...............................................................................................................................................
11
break
...........................................................................................................................................................
11
continuer
......................................................................................................................................................
11
goto
.............................................................................................................................................................
11
bibliothèque
de
fonction
...................................................................................................................12
présentation
...............................................................................................................................................
12
fonction
de
calcul
mathématique
............................................................................................................
12
fonction
de
traitement
de
chaine
de
caractère
.......................................................................................
12
fonction
de
traitement
de
date
.................................................................................................................
12
envoi
de
mail
..............................................................................................................................................
12
générer
pdf
en
php
............................................................................................................................
12
générer
image
en
php
.......................................................................................................................
12
traiter
expression
régulières
en
php
.................................................................................................
12
tableau
numéroter
tableau
associatif
...............................................................................................14
tableau
numéroter
–
exemple
6,
7
8
.....................................................................................................
14
base
php
–
environnement
de
développement
–
page
1/29
-
open
room

exercice
–
tableau
de
prénom
liste
à
puce
.........................................................................................
16
tableau
associatif
–
exemple
9...................................................................................................................
17
exercice
–
tableau-users-etape-0
...............................................................................................................
18
exercice
–
tableau
périodique
éléments..............................................................................................
18
tableau
numéroter
de
tableau
associatif
–
exemple
10
.............................................................................
20
fonction
de
manipulation
de
tableau
–
exemple
11
12
.....................................................................
21
exercice
–
tableau-users-etape-1
...............................................................................................................
22
ecrire
propres
fonction
–
exemple
13
14
...................................................................................23
fonction
d’affichage,
renvoyer
–
exemple
13
............................................................................
23
fonction
renvoyer
résultat
–
exemple
14
.........................................................................................
23
fonction
avec
paramètre
en
sortie
:
être
modifier
–
exemple
15
.....................................................
24
visibilité
variables
–
exemple
16
–
global,
globals,
static.................................................................
24
exercice
–
tableau-users-etape-2
:
codage
avec
fonction
........................................................................
26
filtrer
tableau
:
fonction
array_filter
–
exemple
17
..............................................................................
28
exercice
–
tableau-users-etape
3
:
tri
donnée
...................................................................................
29
edition
:
mars
2018
base
php
–
environnement
de
développement
–
page
2/29
-
open
room

bases
langage
php
installation
fichier
de
test
exemple
cours
être
dans
fichier
zip
fournir
avec
l’article
cours
:
00-bases-dulangage.zip.
exemple
être
présenter
dans
chapitre
en
vert.
charger
fichier
mettez-le
dans
dossier
partie_2
répertoire
web
«
www
»
serveur
wamp.
exercice
à
faire
être
présenter
dans
chapitre
en
jaune.
remarque
:
fichier
d’exemples
commencer
par
trois
ligne
:
echo
'<h1>code
php</h1>';
highlight_file('fichier.php');
echo
'<h1>resultats</h1>';
code
afficher
deux
balise
h1
avec
code
php
resultats
fonction
«
highlight_file
»
permettre
d’afficher
contenu
fichier
proposé.
tester
code,
commencer
par
affiche
code.
ca
permettre
de
voir
code
en
même
temps
résultats.
pour
généraliser
code,
écrire
:
highlight_file(basename(__file__));
basename(__file__)
permettre
de
récupérer
nom
fichier
en
cours
de
traitement.
base
php
–
environnement
de
développement
–
page
3/29
-
open
class
room

les
variables
définition
variable
être
moyen
pour
stocker
en
mémoire
information
temps
de
génération
de
page
php
variable
avoir
nom,
valeur,
type
signification.
en
php,
nom
d’une
variable
commencer
par
$
par
exemple
:
$username
être
variable
de
type
string
signification
être
de
contenir
information
être
nom
de
l’utilisateur.
type
présentation
variables
pouvoir
enregistrer
information
de
différents
type
:
entier,
décimal
(nombre
à
virgule),
texte
booléen
(vrai
faux)
être
principaux.
http://php.net/manual/fr/language.types.php
type
entier
:
int
0,
1,
2,
3,
etc
entiers
négatif
:
-1,
-2,
etc.
type
décimal
:
float
être
nombre
à
virgule
:
1.234
écrire
virgule
avec
point.
qu’on
n’a
besoin
d’une
précision
extrême,
convenir
à
calculs.
type
texte
(ou
chainer
de
caractères)
:
string
chaine
de
caractère
être
écrire
entre
guillemet
apostrophe.
parler
de
quotter
simple
quotter
simple
guillemet
pour
apostrophes,
de
double
quotter
pour
guillemets.
type
booléen
:
bool
pouvoir
prendre
valeur
true
false.
valeur
null
pouvoir
donner
valeur
null
à
variables,
type.
vouloir
dire
variable
contenir
rien.
type
tableau,
objet,
ressourcer
exister
type
pour
tableau
(suite
cours),
pour
objet
(cours
poo)
pour
ressource
(une
ressource
être
référence
à
ressource
externe
:
voir
doc
php).
base
php
–
environnement
de
développement
–
page
4/29
-
open
room

vérifier
type
utiliser
variable,
n’a
besoin
de
préciser
type.
selon
valeur
qu’on
donner
à
variable,
type
être
définir
automatiquement.
fonction
permettre
de
savoir
de
type
être
variable.
par
exemple
:
is_bool($mavariable)
retourne
vrai
(1)
$mavariable
être
booléen,
faux
(0)
sinon.
http://php.net/manual/fr/function.is-bool.php
is_bool,
is_float,
is_numeric,
etc.
signification
variable
servir
à
chose,
par
exemple
à
enregistrer
nom
de
l’utilisateur.
c’est
signification.
donner
nom
en
rapport
avec
signification.
n’est
obligé,
c’est
préférable.
pouvoir
faire
avec
variable
pouvoir
donner
valeur
à
variable
$username=
"barack";
parler
d’affectation
d’assignation
pouvoir
afficher
contenu
d’une
variable
echo
$username;
de
guillemet
afficher
un
texte.
pouvoir
concaténer
variable
à
chaine
de
caractère
avec
texte
entre
apostrophe
entre
guillemets,
pouvoir
concaténer
variable
avec
l’opérateur
«
.
»
echo
'bonjour'
.
$username.
'.
allez-vous
?'
valoir
utiliser
apostrophe
«
‘
»
dans
php
guillemet
«
“
»
dans
html.
pouvoir
afficher
contenu
d’une
variable
dans
chaine
de
caractère
avec
texte
entre
guillemets,
pouvoir
mettre
variable
dans
texte
entre
guillemets.
echo
"bonjour
$username.
allez-vous
?"
éviter
usage.
utiliser
précédent,
avec
concaténation
concaténation
:
opérateur
«
.
»
«
.
»
permettre
de
concaténer
deux
textes,
variable
texte,
deux
variables.
opérateur
arithmétique
utiliser
opérateur
classiques
:
+,
-,
/,
*,
%
opérateur
d’incrémentation
base
php
–
environnement
de
développement
–
page
5/29
-
open
room

$i++
équivaloir
à
$i=$i+1
attention,
c’est
post-incrémentation
:
faire
«
echo
$i++
;
c’est
$i
avant
l’incrémentation
être
affiché.
exemple
1
:
pouvoir
utiliser
variable
dans
calcul
<?php
$prix_unitaire=11.6;
$quantite=5;
$produit="clé
usb
32
go";
$prix_total=$quantite*$prix_unitaire;
echo
'bonjour
<br>';
echo
$quantite.
'
'
.$produit.
'
:
'
.$prix_total;
?>
pouvoir
utiliser
symbole
classiques
de
calcul
:
+,
-
,
x,
/,
%
(modulo),
fonction
classiques
(sin(),
cos(),
sqrt(),
pow()
:
http://php.net/manual/fr/function.pow.php
a
noter
à
gauche
signe
=,
modifier
valeur
de
variable.
qu’il
avoir
dans
variable
avant
modification
être
perdu.
a
droite
signe
=,
utiliser
valeur
de
variable
pour
faire
calcul.
a
noter
qu’on
mettre
de
de
variable
dans
l’echo,
début
de
l’echo,
début
de
variable,
à
fin
de
variable
à
fin
de
l’echo.
constante
constante
être
sorte
de
variable
pouvoir
être
modifiée.
nom
être
donner
en
majuscule
par
convention.
valeur
être
donner
par
fonction
«
define
».
accéder
sans
utiliser
«
$
».
<?php
define("constant",
"bonjour
monde.");
echo
constant;
//
afficher
"bonjour
monde."
define('animals',
array(
'chien',
'chat',
'oiseaux'
));
echo
animals[1];
//
affiche
"chat"
?>
base
php
–
environnement
de
développement
–
page
6/29
-
open
room

tests
:
exemple
2
3
if,
else,
elseif
if
($mavariable
==
0){
instruction
;
}
elseif
($mavariable
>0
{
instruction
;
}
else
{
/*
$mavariable<0
*/
instruction
;
}
if
:
http://php.net/manual/fr/control-structures.if.php
else
:
http://php.net/manual/fr/control-structures.else.php
elseif
:
http://php.net/manual/fr/control-structures.elseif.php
opérateur
de
comparaison
==,!
!=,
<,
<=,
>,
>=
http://php.net/manual/fr/language.operators.comparison.php#language.operators.comparison
===
:
vrai
valeur
être
identiques
de
même
type,!
!==
opérateur
logiques
binaires
:
and,
&&,
or,
||
($a>0
and
$a<10)
unaires
:!
!(!
!is_int($a)
)
http://php.net/manual/fr/language.operators.logical.php
switch
switch
($mavariable
)
{
case(0)
:
instruction
;
break
;
case
(1)
:
instruction
;
break
;
default
:
instruction
;
}
switch
:
http://php.net/manual/fr/control-structures.switch.php
opérateur
de
comparaison
ternaire
:
?
:
$monresultat
=
($mavarialble
==
0
)
?
true
:
false
;
base
php
–
environnement
de
développement
–
page
7/29
-
open
class
room

http://php.net/manual/fr/language.operators.comparison.php#language.operators.comparison.te
rnary
html
dans
php
séparer
php
:
exemple
4
html
dans
php
<?php
if
($variable
<0
)
{
echo
<strong>variable
'.$variable.'</strong>
:
c\'est
négatif
!
!';
}
?>
pouvoir
mettre
variables
dans
l’echo.
falloir
utiliser
\’.
html
séparer
php
<?php
if
($variable
<0
)
{
?>
<strong>variable</strong>
être
négatif!
!
<?php
}
?>
solution
séparer
code
html
code
php.
avoir
de
code
html,
sans
variable,
c’est
pratique.
éviter
\’
devoir
ajouter
variables,
c’est
inadapté
html
dans
php
avec
balise
heredoc
:
<<<
l’opérateur
<<<,
qu’on
pouvoir
appeler
balise
heredoc,
permettre
d’ouvrir
deux
balise
_balise.
texte
contenir
dans
balise
être
chaîne
de
caractère.
apostrophe
guillemet
pouvoir
être
traiter
quels,
sans
\’
pouvoir
mettre
variables
$variable
balise
fermante
_balise
devoir
être
coller
à
marge
gauche
être
seule
avec
;
if
($variable
<0
)
{
echo
<<<_balise
<strong>variable
$variable</strong>
:
c'est
négatif!
!
<br>
_balise;
pouvoir
utiliser
variables
éviter
\’
c’est
utilisé.
base
php
–
environnement
de
développement
–
page
8/29
-
open
room

boucles
:
exemple
5
while
http://php.net/manual/fr/control-structures.while.php
présentation
while
($cpt
<
10){
instruction
;
}
mavariable
<10,
répéter
instructions.
falloir
sûr
mavariable
modifier
dans
instruction
pur
qu’on
pouvoir
sortir
de
boucle.
boucler
10
fois
pour
boucler
10
fois
pouvoir
écrire
$cpt
=1
while
($cpt
<=
10){
instruction
;
$cpt
++
;
}
++
permettre
d’incrémenter
$cpt.
$cpt
++
;
être
équivalent
à
$cpt
=$cpt
+1
;
for
http://php.net/manual/fr/control-structures.for.php
boucle
for
être
l’équivalent
de
boucle
while
pour
boucler
10
fois
(ou
de
fois
qu’on
veut)
:
for
($cpt
=1
;
$cpt
<
1
;
$cpt++){
instruction
;
}
avoir
trois
partie
dans
for
:
•
l’initialisation
de
mavariable
être
dans
for,
en
premier.
•
condition
de
sortie
être
milieu.
•
l’incrémentation
de
mavariable
être
en
troisième
position.
base
php
–
environnement
de
développement
–
page
9/29
-
open
room

exercice
:
10
premier
entiers,
carrés
racine
dans
tableau
html
ecrire
script
afficher
10
premier
entiers,
carré
racine
carrer
dans
tableau.
chercher
fonction
raciner
carré.
résultat
attendre
:
etc.
base
php
–
environnement
de
développement
–
page
10/29
-
open
room

débranchements
présentation
2
instruction
permettre
de
quitter
fonctionnement
standard
boucle
:
break
faire
quitter
boucle
continue
permettre
de
passer
suivant.
break
http://php.net/manual/fr/control-structures.break.php
while
($mavariable
<
10){
if($casparticulierquifaitsortir
==true){
qu’il
avoir
à
faire
break;
//
}
cas
général
}
continuer
http://php.net/manual/fr/control-structures.continue.php
while
($mavariable
<
10){
if($casparticulierquifaitpasserausuivant
==true){
qu’il
avoir
à
faire
continue;
//
(on
passer
suivant)
}
cas
général
}
goto
http://php.net/manual/fr/control-structures.goto.php
goto
permettre
d’aller
de
n’importe
vers
n’importe
où!
!
c’est
à
éviter!
!
base
php
–
environnement
de
développement
–
page
11/29
-
open
room

bibliothèque
de
fonction
présentation
exister
millier
de
fonction
qu’on
pouvoir
utiliser
en
php.
http://php.net/manual/fr/funcref.php
fonction
de
calcul
mathématique
http://php.net/manual/fr/book.math.php
sqrt
:
raciner
carré,
pow
:
puissance,
round
:
arrondi,
rand
:
aléatoire,
min,
max,
cos,
sin,
etc.
fonction
de
traitement
de
chaine
de
caractère
http://php.net/manual/fr/ref.strings.php
length,
substr,
strpos,
str_replace
:
longueur,
extraction,
position,
remplacement.
trim,
ltrim
:
pour
supprimer
espace
début
à
fin
d’une
chaîne.
chr,
ord
:
passer
d’un
caractère
à
nombre
printf,
fprintf
:
print
formater
(f
de
fin),
print
formater
dans
fichier
(f
de
début)
sscanf
:
scan
formater
(f
de
fin)
dans
string
(s
de
début)
fonction
de
traitement
de
date
http://php.net/manual/fr/ref.datetime.php
envoi
de
mail
http://php.net/manual/fr/function.mail.php
générer
pdf
en
php
http://php.net/manual/fr/book.pdf.php
générer
image
en
php
http://php.net/manual/fr/book.image.php
https://openclassrooms.com/courses/concevez-votre-site-web-avec-php-et-mysql/creer-desimages-en-php
traiter
expression
régulières
en
php
http://php.net/manual/fr/book.pcre.php
base
php
–
environnement
de
développement
–
page
12/29
-
open
room

https://openclassrooms.com/courses/concevez-votre-site-web-avec-php-et-mysql/lesexpressions-regulieres-partie-1-2
https://openclassrooms.com/courses/concevez-votre-site-web-avec-php-et-mysql/lesexpressions-regulieres-partie-2-2-2
https://openclassrooms.com/courses/concevez-votre-site-web-avec-php-et-mysql/mementodes-expressions-regulieres
base
php
–
environnement
de
développement
–
page
13/29
-
open
room

tableau
numéroter
tableau
associatif
tableau
numéroter
–
exemple
6,
7
8
présentation
tableau
«
classique
»
:
permettre
de
mettre
valeur
d’un
même
type
dans
variable.
fonction
array
:
créer
tableau
$prenoms
=
array
(‘aurélien’,
‘isabelle’,
‘ahmed’,
‘olivier’
,
‘nour’,
‘chang’)
;
//
créer
$prenoms[0],
$prenoms[1]
jusqu’à
$prenoms[5]
créer
tableau
par
indice
$lesprenoms[0]=’
aurélien’
;
$lesprenoms[1]=’
isabelle’;
$lesprenoms[2]=’
ahmed’
;
noter
premier
élément
tableau
être
à
l’indice
0.
l’indice
être
appeler
clé.
créer
tableau
par
indice
automatiques
$lesprenoms
[
]=’
aurélien’
;
//
créer
$prenoms[0]
$lesprenoms
[
]=’
isabelle’;
//
créer
$prenoms[1]
$lesprenoms
[
]=’
ahmed’
;
//
créer
$prenoms[2]
utiliser
crochet
vides,
nouvel
élément
être
placer
à
suite
précédents.
instruction
echo
:
afficher
élément
tableau
echo
$prenoms[2]
;
boucle
for
:
afficher
tableau
<?php
$lesprenoms[0]='aurélien';
$lesprenoms[1]='olivier';
$lesprenoms[2]='ahmed';
for
($indice
=
0
;
$indice
<count($lesprenoms)
;
$indice++)
{
echo
'lesprenoms['.$indice.']
=
'
.$lesprenoms[$indice].
'<br/>'
;
}
?>
noter
présence
de
fonction
count
pour
avoir
nombre
d’éléments
tableau.
base
php
–
environnement
de
développement
–
page
14/29
-
open
room

fonction
print-r()
:
affichage
basique
tableau
sans
mise
en
forme
affichage
sur
seule
ligne
<?php
$lesprenoms=array('aurélien','isabelle','ahmed');
print_r($lesprenoms);
?>
affichage
ligner
par
ligne
:
avec
balise
<pre>
<?php
$lesprenoms=array('aurélien','isabelle','ahmed');
echo
$lesprenoms;
echo
'<pre>';
print_r($lesprenoms);
echo
'</pre>';
?>
fonction
var_dump()
:
affichage
basique
information
d’une
variable
affichage
sur
seule
ligne
avec
type
en
:
<?php
$lesprenoms=array('aurélien','isabelle','ahmed');
var_dump($lesprenoms);
$i=5;
var_dump($i);
?>
attention
:
devoir
avoir
de
trou
dans
tableau
<?php
$lesprenoms[0]='aurélien';
$lesprenoms[1]='olivier';
$lesprenoms[2]='ahmed';
$lesprenoms[5]='hang';
//
afficher
4
prénom
print_r($lesprenoms);
//
for
n’affichera
pour
$lesprenoms[3]
//
n’affichera
$lesprenoms[4]
for
($indice
=
0
;
$indice
<count($lesprenoms)
;
$indice++)
{
echo
'lesprenoms['.$indice.']
=
'
.$lesprenoms[$indice].
'<br/>'
;
}
?>
boucler
foreach
:
afficher
tableau,
être
l’indice
pour
passer
en
revue
élément
tableau,
numéro
dans
tableau,
utiliser
foreach.
dans
boucle
foreach
mettre
tableau
nom
de
variable
qu’on
récupérer
dans
tableau.
deux
élément
être
séparer
par
un
as.
boucle
foreach
gérer
fait
de
démarrer
premier
élément
tableau
d’aller
jusqu’au
dernier.
<?php
base
php
–
environnement
de
développement
–
page
15/29
-
open
class
room

$lesprenoms=array('aurélien','isabelle','ahmed');
foreach
($lesprenoms
avoir
$unprenom){
echo
$unprenom.
'<br/>'
;
}
?>
boucler
foreach
$key
=>
$value
élément
d’un
tableau
correspondre
à
couple
(key,
value)
:
clé
être
numéro
de
l’élément
dans
tableau,
value
valeur.
pouvoir
ajouter
$key
dans
boucle
foreach
:
permettre
d’accéder
à
clé
directement.
<?php
$lesprenoms=array('aurélien','isabelle','ahmed');
echo
'<h2>affichage
foreach
$key
=>
$value</h2>';
foreach
($lesprenoms
avoir
$key
=>
$value){
echo
'$key
:
'.$key.
'<br/>'
;
echo
'$value
:
'.$value.
'<br/>'
;
}
?>
chainer
vers
tableau
:
implode
explode
explode
pour
convertir
chaine
avec
liste
de
valeur
en
tableau
numéroter
implode
pour
convertir
tableau
numéroter
en
chaine
contenir
liste
valeur
tableau.
préciser
fonction
séparateur
qu’on
trouver
entre
valeur
dans
chaine.
$chaine=implode
($sep,
$tableau)
;
$chaine=implode
(«
<br>
»,
$tableau)
;
$tab
=
explode
($sep,
$chaine)
;
$tab
=
explode
(«
,
»,
$chaine)
;
exercice
–
tableau
de
prénom
liste
à
puce
ecrire
script
afficher
contenu
d’un
tableau
de
prénom
dans
liste
à
puces.
prénom
être
écrire
en
minuscule
avec
majuscule
en
premier.
résultat
attendre
:
faire
version
n’affiche
prénom
premier
lettre
venir
après
h.
chercher
information
sur
fonction
strcmp()
dans
documentation
php.
utiliser
«
continue
».
base
php
–
environnement
de
développement
–
page
16/29
-
open
room

tableau
associatif
–
exemple
9
présentation
tableau
associatif
être
tableau
particulier
permettre
de
mettre
valeur
de
type
différents
dans
même
variable.
c’est
l’équivalent
d’une
structure
(struct)
d’un
objet
dans
d’autres
langages.
a
valeur
associer
nom
qu’on
appeler
clé
attribut.
nom
être
«
associé
»
à
valeur.
php
parler
de
tableau
associatif.
fonction
array
:
créer
tableau
:
$utilisateur
=
array
(
'nom'
=>
'toto',
'prenom'
=>
'aurélien',
'datenaissance'
=>
1995,
'nomutilisateur'
=>
'aurelien1995'
)
;
créer
tableau
par
indice
$utilisateur['nom']
=
'toto';
$utilisateur['prenom']
=
'aurélien';
$utilisateur['datenaissance']
=
1995;
$utilisateur['nomdutilisateur']
=
'aurelien1995';
instruction
echo
:
afficher
élément
tableau
echo
$utilisateur[‘nomutilisateur’]
;
fonction
print-r()
:
affichage
basique
tableau
associatif
sans
mise
en
forme
affichage
sur
seule
ligne
<?php
$utilisateur
=
array
('nom'
=>
'toto',
'prenom'
=>
'aurélien',
'datenaissance'
=>
1995,
nomutilisateur
=>
'aurelien1995')
;
print_r($utilisateur);
?>
affichage
ligner
par
ligne
:
avec
balise
<pre>
<?php
$utilisateur
=
array
('nom'
=>
'toto',
'prenom'
=>
'aurélien',
'datenaissance'
=>
1995,
nomutilisateur
=>
'aurelien1995')
;
echo
'<pre>';
print_r($utilisateur);
echo
'</pre>';
?>
base
php
–
environnement
de
développement
–
page
17/29
-
open
room

afficher
tableau
associatif
:
boucle
foreach
dans
boucle
foreach
mettre
tableau
nom
de
variable
qu’on
récupérer
dans
tableau.
deux
élément
être
séparer
par
un
as.
boucle
foreach
gérer
fait
de
démarrer
premier
élément
tableau
d’aller
jusqu’au
dernier.
<?php
$utilisateur
=
array
('nom'
=>
'toto',
'prenom'
=>
'aurélien',
'datenaissance'
=>
1995,
nomutilisateur
=>
'aurelien1995')
;
foreach
($utilisateur
avoir
$element){
echo
$element.
'<br/>'
;
}
?>
boucler
foreach
$key
=>
$value
élément
d’un
tableau
associatif,
pour
tableau
numéroté,
correspondre
à
couple
(key,
value).
key
correspondre
à
attribut,
value
à
valeur.
pouvoir
ajouter
$key
dans
boucle
foreach
:
permettre
d’accéder
à
l’attribut.
<?php
$utilisateur
=
array
('nom'
=>
'toto',
'prenom'
=>
'aurélien',
'datenaissance'
=>
1995,
nomutilisateur
=>
'aurelien1995')
;
echo
'<h2>affichage
foreach
avoir
$key
=>
$value</h2>';
foreach
($utilisateur
avoir
$key
=>
$value){
echo
'$key:
'.$key.
'<br/>'
;
echo
'$value:
'.$value.
'<br/>'
;
}
?>
exercice
–
tableau-users-etape-0
vouloir
gérer
utilisateur
avec
caractéristique
suivantes
:
prénom
nom
(dans
seul
champ),
mail,
motdepasse,
age
créer
utilisateur
(vous!
!)
avec
information
dans
tableau
associatif.
afficher
tableau
associatif
avec
print_r
avec
ligne
par
information.
afficher
tableau
associatif
dans
tableau
html.
exercice
–
tableau
périodique
élément
en
chimie,
tableau
périodique
élément
associer
symbole
à
nom
d’élément
chimique.
h
pour
hydrogène,
he
helium,
etc.
faire
programme
afficher
5
premier
élément
dans
tableau
html.
base
php
–
environnement
de
développement
–
page
18/29
-
open
room

vous
pouvoir
trouver
autres
sur
internet.
résultat
attendre
:
devoir
mettre
résultat
dans
page
html.
base
php
–
environnement
de
développement
–
page
19/29
-
open
room

tableau
numéroter
de
tableau
associatif
–
exemple
10
présentation
utiliser
tableau
numéroter
contenir
tableau
associatifs.
par
exemple,
tableau
d’élèves.
utiliser
foreach
foreach
$key=>$value.
$utilisateurs[]
=
array
(
'nom'
=>
'toto',
'prenom'
=>
'aurélien',
'datenaissance'
=>
1995,
'nomutilisateur'
=>
'aurelien1995'
)
;
$utilisateurs[]
=
array
(
'nom'
=>
'tata',
'prenom'
=>
'bertrand',
'datenaissance'
=>
1990,
'nomutilisateur'
=>
'bertrand1990'
)
;
$utilisateurs[]
=
['toto3',
'olivier',
1992,
'olivier1992']
;
$utilisateurs[]
=
['titi4',
'ahmed',
1990,
'ahmed1990']
;
echo
'<h2>affichage
foreach</h2>';
foreach
($utilisateurs
avoir
$user){
echo
'<pre>';
print_r($user);
echo
'</pre>';
}
echo
'<h2>affichage
foreach
skey
=>
$value</h2>';
foreach
($utilisateurs
avoir
$index
=>
$user){
echo
'<p><b>$index
:
'.$index.
'</b></p>';
echo
'<pre>';
print_r($user);
echo
'</pre>';
foreach
($user
avoir
$key
=>
$value){
echo
'<p>$key
:
'.$key.
'<br>';
echo
'$value
:
'.$value.
'</p>';
}
}
base
php
–
environnement
de
développement
–
page
20/29
-
open
room

fonctions
de
manipulation
de
tableau
–
exemple
11
12
exister
de
fonction
de
manipulation
de
tableau
http://php.net/manual/fr/ref.array.php
citer
:
array
pour
créer
tableau
count
-
sizeof
count($montableau)
sizeof($montableau)
pour
récupérer
nombre
d’éléments
tableau.
sortir
–
exemple
11
sort($montableau)
pour
trier
tableau
numéroter
rsort()
pour
trier
en
sens
inverse.
exemple
11.
fonction
de
tri
:
http://php.net/manual/fr/array.sorting.php
ksort
ksort($montableau)
pour
trier
tableau
associatif
selon
«
key
».
krsort()
pour
trier
en
sens
inverse.
asort
asort($montableau)
pour
trier
tableau
associatif
selon
«
value».
arsort()
pour
trier
en
sens
inverse.
in_array
in_array(‘valeur’,
$montableau)
être
vrai
‘valeur’
être
dans
$montableau.
array_key_exists
–
exemple
12
array_key_exists($cle,
$montableauassociatif)
être
vrai
$cle
être
clé
tableau
associatif
$montableauassociatif.
array-search
array_search(‘nour’,
$lesprenoms)
renvoyer
l’indice
de
valeur
‘nour’
dans
tableau
$lesprenoms,
être
4
dans
exemple
(cf.
haut).
shuffle
–
exemple
11
shuffle($montableau)
pour
mélanger
tableau.
base
php
–
environnement
de
développement
–
page
21/29
-
open
room

exercice
–
tableau-users-etape-1
1)
vouloir
gérer
utilisateur
avec
caractéristique
suivantes
:
prénom
nom
(dans
seul
champ),
mail,
motdepasse,
age
créer
utilisateur
(vous!
!)
avec
information
dans
tableau
associatif.
afficher
tableau
associatif
avec
print_r
avec
ligne
par
information.
2)
vouloir
créer
seul
utilisateur
tableau
d’utilisateurs.
créer
tableau
avec
5
utilisateurs.
créer
premier
utilisateur
avec
syntaxe
suivante
:
$lesutilisateurs[0]['nom']='toto
toto';
etc.
autres
avec
syntaxe
:
$lesutilisateurs[]
=
array(
'nom'=>'toto
toto',
etc.
3)
4)
5)
6)
afficher
utilisateur
créer
avec
print_r
afficher
utilisateur
avec
for
afficher
utilisateur
avec
foreach
afficher
tableau
5
utilisateur
en
html
dans
tableau
html.
base
php
–
environnement
de
développement
–
page
22/29
-
open
room

ecrire
propres
fonction
–
exemple
13
14
fonction
d’affichage,
renvoyer
–
exemple
13
vouloir
afficher
«
olivier
avoir
20
an
»
à
partir
prénom
de
l’année
de
naissance
<?php
function
afficherage($prenom,
$anneenaissance){
$today=getdate();
$age=$today['year']-$anneenaissance;
echo($prenom.
'
avoir
'
.$age.
'
ans');
}
$utilisateur
=
array
(
'nom'
=>
'toto',
'prenom'
=>
'aurélien',
'anneenaissance'
=>
1995,
'nomutilisateur'
=>
'aurelien1995')
;
afficherage
($utilisateur['prenom'],
$utilisateur['anneenaissance']);
?>
fonction
avoir
deux
paramètre
en
entrée
:
prénom
l’année
de
naissance.
calcul
l’âge
en
fonction
de
l’année
de
naissance
de
l’année
de
date
jour.
fonction
getdate
permettre
de
récupérer
l’information.
utiliser
fonction
à
partir,
dans
l’exemple,
d’un
tableau
associatif
vu.
fonction
renvoyer
résultat
–
exemple
14
aller
écrire
fonction
renvoyer
l’âge
à
partir
de
l’année
de
naissance
<?php
function
calculerage($anneenaissance){
$today=getdate();
$year=$today['year'];
$age=$year-$anneenaissance;
return
$age;
}
$anneenaissance=1990;
$age=calculerage($anneenaissance);
echo('né
en'
.$anneenaissance.
'
:
'
.$age.
'
ans.');
?>
fonction
avoir
paramètre
en
entrée
:
l’année
de
naissance.
calcul
l’âge
en
fonction
de
l’année
de
naissance
de
l’année
de
date
jour.
renvoyer
résultat
avec
return.
fonction
pouvoir
être
utiliser
pour
donner
valeur
à
variable,
par
exemple.
base
php
–
environnement
de
développement
–
page
23/29
-
open
room

fonction
avec
paramètre
en
sortie
:
être
modifier
–
exemple
15
aller
écrire
fonction
augmenter
employé.
l’employé
être
tableau
associatif
avec
nom
salaire.
fonction
recevoir
en
paramètre
l’employé
l’augmentation.
<?php
echo
'<h1>code
php</h1>';
highlight_file(basename(__file__));
echo
'<h1>resultats</h1>';
function
augmenter(&$employe,
$augmentation){
$employe['salaire']=
$employe['salaire']+$augmentation;
}
$emp=array('nom'=>'toto',
'salaire'=>2000);
print_r($emp);echo'<br>';
augmenter($emp,
100);
print_r($emp);
?>
dans
fonction,
mettre
«
&
»
devant
$employe
:
c’est
faire
qu’il
ressortir
modifié.
test
faire
passer
de
2000
à
@ord@
sans
«
&
»,
rester
à
visibilité
variables
–
exemple
16
–
global,
globals,
static
3
niveau
de
visibilité
pour
variables
http://php.net/manual/fr/language.variables.scope.php
•
variables
de
page
variables
globales
:
être
visibles
dans
page
après
premier
apparition,
sauf
dans
fonction
de
page,
sauf
être
redéclarées
«
global
»
dans
fonctions.
être
visibles
dans
autres
pages.
a
noter
variables
de
page
être
appeler
en
général
variables
globales
(globales
à
page).
a
noter
qu’on
pouvoir
utiliser
tableau
associatif
$globals
contenir
couple
keyvalue
correspondre
couple
nomdevariable-valeurdevariable.
•
variables
local
:
être
visibles
dans
fonction
être
définies.
•
variables
«
static»
«
locales-globales
»
:
être
visibles
dans
fonction
être
définir
garder
valeur
revenir
dans
fonction.
circulation
de
l’information
entre
fonction
entre
page
fonction
pour
passer
de
l’information
à
fonction,
passer
en
paramètre
de
fonction.
variable
vouloir
accéder
à
variable
de
page,
devoir
déclarer
«
global
»
dans
fonction.
<?php
function
test1()
{
$varglobale='test1';
}
base
php
–
environnement
de
développement
–
page
24/29
-
open
room

function
test2()
{
global
$varglobale;
$varglobale='test2';
}
$varglobale='global';
test1();
echo
$varglobale.'<br>';
//
affiche
:
global
test2();
echo
$varglobale.'<br>';
//
affiche
:
test2
?>
entre
page
pour
faire
circuler
de
l’information
entre
pages,
utiliser
variables
$_get
$_post
variable
$_session.
cf.
chapitre
suivant.
base
php
–
environnement
de
développement
–
page
25/29
-
open
room

exercice
–
tableau-users-etape-2
:
codage
avec
fonction
prendre
fichier
de
correction
de
exercice-tableau-users-etape-1.
dupliquer
l’appelle
etape-2.php
1)
dans
nouveau
fichier
appeler
«
unuser.php
»
aller
créer
fonction
permettre
de
créer
un
utilisateur.
l’appelle
«
newuser
».
ecrivez
fonction.
mettre
à
jour
copie
fichier
de
l’étape1
pour
qu’elle
utiliser
fonction.
//
creation
d’un
utilisateur
newuser(
parametres
à
déterminer);
2)
dans
fichier
«
unuser.php
»,
ajouter
fonction
permettre
d’afficher
utilisateur
avec
print_r.
mettre
à
jour
copie
fichier
de
l’étape1
pour
qu’elle
utiliser
fonction.
//
affichage
tableau
avec
print_r
print_runuser(
parametres
à
déterminer);
3)
dans
fichier
«
unuser.php
»,
ajouter
fonction
permettre
d’afficher
utilisateur
champ
par
champ.
mettre
à
jour
copie
fichier
de
l’étape1
pour
qu’elle
utiliser
fonction.
//
affichage
tableau
avec
print_r
printunuser(
parametres
à
déterminer);
4)
dans
nouveau
fichier
appeler
«
lesusers.php
»,
ajouter
fonction
permettre
de
créer
tableau
d’utilisateurs.
utilisateur
être
fournir
dans
fonction.
appeler
fonction
inittab.
mettre
à
jour
copie
fichier
de
l’étape1
pour
qu’elle
utiliser
fonction.
//
initialisation
d'un
tableau
d'utilisateurs
initlesusers(
parametres
à
déterminer
);
5)
doter
d’une
fonction
afficher
utilisateur
avec
print_r.
ajouter
l’appel
à
fonction
dans
copie
fichier
de
l’étape1.
//
affichage
tableau
avec
print_r
print_rlesusers
($lesutilisateurs);
6)
doter
d’une
fonction
afficher
avec
for.
mettre
à
jour
copie
fichier
de
l’étape1
pour
qu’elle
utiliser
fonction.
//
affichage
tableau
de
façon
basique
avec
for
print_rlesusersfor
($lesutilisateurs);
7)
doter
d’une
fonction
afficher
avec
foreach.
mettre
à
jour
copie
fichier
de
l’étape1
pour
qu’elle
utiliser
fonction.
//
affichage
tableau
de
façon
basique
avec
foreach
print_rlesusersforeach($lesutilisateurs);
base
php
–
environnement
de
développement
–
page
26/29
-
open
room

8)
a
place
âges,
entrer
l’année
de
naissance.
adapter
programme
pour
qu’on
continuer
à
afficher
âges.
doter
d’une
fonction
calculerage($anneenaissance)
mettre
à
jour
fonction
printunuser(),
tout
dans
fichier
unuser.php.
9)
créer
fonction
d’affichage
être
styler
:
par
exemple
afficher
dans
tableau
html
gérer
de
css
pour
tableau.
base
php
–
environnement
de
développement
–
page
27/29
-
open
room

filtrer
tableau
:
fonction
array_filter
–
exemple
17
fonction
«
array_filter
»
permettre
de
filtrer
tableau
:
<?php
$tab=array(1,
2,
3,
4,
5,
6,
7,
8,
9,
10);
echo
'<h2>affichage
tableau
complet</h2>';
echo'<pre>';print_r($tab);echo'</pre>';
function
filtrelespairs($element){
if($element%2==0)
return
true;
else
return
false;
}
$tab_filtre
=
array_filter($tab,
"filtrelespairs");
echo
'<h2>affichage
pairs</h2>';
echo'<pre>';print_r($tab_filtre);echo'</pre>';
?>
explication
:
passer
tableau
nom
d’une
fonction
en
paramètre
à
fonction
«
array_filter
».
ici,
fonction
s’appelle
«
filtrelespairs
».
définir
fonction.
avoir
paramètre
correspondre
à
élément
tableau
passer
en
paramètre
à
array_filter.
pouvoir
appeler
paramètre
$element.
aller
choisir
«$element
conserve.
retourner
true,
conserver
$element
dans
tableau,
sinon,
garde
pas.
ici,
tester
l’entier
être
divisible
par
base
php
–
environnement
de
développement
–
page
28/29
-
open
room

exercice
–
tableau-users-etape
3
:
tri
donnée
1)
vouloir
trier
utilisateur
par
nom.
utiliser
fonction
«
array_multisort
».
principe
être
de
créer
tableau
avec
noms,
de
faire
appel
à
fonction
«
array_multisort
»
en
passer
en
paramètre
tableau
avec
noms,
constante
(sort_asc
pour
dire
c’est
tri
croissant)
tableau
utilisateurs.
function
triparnomdesc(&$lesusers){
//
tri
tableau
par
nom
//
commencer
par
fabriquer
tableau
nom
foreach
($lesusers
avoir
$indice
=>
$unuser){
$lesnoms[$indice]
=
$unuser['nom'];
}
//
appel
à
array_multisort
:
tableau
à
trier
être
en
dernier
array_multisort($lesnoms,
sort_desc,
$lesusers);
}
enregistrer
fonction
dans
fichier
«
tri.php
»
tester
fonction
à
partir
résultat
de
l’etape
2)
avec
même
méthode,
trier
par
âge
décroître
3)
avec
même
méthode,
trier
par
âge
nom
décroître
4)
aller
généraliser
fonction
de
tri
pour
qu’elle
pouvoir
trier
selon
n’importe
champ.
5)
écrire
fonction
tri
selon
2
champs,
de
façon
générale.
base
php
–
environnement
de
développement
–
page
29/29
-
open
room

echange
d’informations
php
https://openclassrooms.com/courses/concevez-votre-site-web-avec-php-et-mysql
http://php.net/manual/fr/langref.php
open
class
room
sommaire
sommaire
.........................................................................
1
echanges
d’informations
en
php
......................................
3
introduction
:
passer
variables
dans
l’url
.........................................................................................
3
recherche
dans
google
de
:
«
php
variable
$_get
»
..................................................................................
3
exercice
.......................................................................................................................................................
3
installation
fichier
de
test
................................................................................................................
4
méthode
get
-
url
-
tableau
$_get
....................................................................................................
4
problématique
............................................................................................................................................
4
exemple-1
:
<a
href="url">
tableau
$_get
...........................................................................................
4
vérifier
information
fournir
par
l’utilisateur
–
1
................................................................
7
présentation
...............................................................................................................................................
7
exemple-2
:
href-get-sans-verifications
.....................................................................................................
7
exemple-3
:
href-get-avec-verifications
....................................................................................................
7
fonction
de
gestion
variables
..............................................................................................................
8
méthode
post
-
formulaire
-
tableau
$_post
...................................................................................
9
rappel
sur
formulaires.........................................................................................................................
9
exemple
4
:
formulaire-post
....................................................................................................................
10
exemple
5
:
formuaire-get
.......................................................................................................................
11
vérifier
information
fournir
par
l’utilisateur
–
2
:
faille
xss
.............................................
12
never
trust
user
input!
!............................................................................................................................
12
exemple
4
5.........................................................................................................................................
12
solution
:
exemple
6
.................................................................................................................................
12
fonction
de
traitement
de
chaîne
de
caractère
..................................................................................
13
protéger
contre
faille
:
aide
en
ligne
.............................................................................................
13
tp
1
:
exercice
password........................................................................................................................
14
premier
version
......................................................................................................................................
14
remarque
:
crypter
mot
de
passe.....................................................................................................
14
deuxième
version
:
monofichier...............................................................................................................
15
exemple
7
:
saisir
d’un
utilisateur
.........................................................................................................
16
structure
code
.....................................................................................................................................
16
conclusion
................................................................................................................................................
20
$_session.............................................................................................................................................
21
présentation
.............................................................................................................................................
21
utilisation
tableau
associatif
$_session
.............................................................................................
21
terminer
session
...............................................................................................................................
21
tp
2
:
synthèse
:
site
user
.....................................................................................................................
23
objectif
:
...................................................................................................................................................
23
etape
1
:
affichage
utilisateur
avec
header
nav.................................................................
23
etape
2
:
ajout
formulaire
admin-mot
de
passe
..................................................................................
25
etape
3
:
page
d’administration................................................................................................................
26
etape
4
:
vérifier
login
...........................................................................................................................
28
base
php
–
environnement
de
développement
–
page
1/43

etape
5
:
enregistrer
nouveau
user.......................................................................................................
29
etape
6
:
création
d’un
fichier
index.php
–
fonction
header(url)
...........................................................
30
variables
superglobales
............................................
31
présentation
.........................................................................................................................................
31
être
tableau
associatifs
...............................................................................................................
31
s_get
-
$_post
-
$_session
....................................................................................................................
31
$_cookie
$_request
.........................................................................................................................
31
s_file
........................................................................................................................................................
31
$_server
$_
env
.................................................................................................................................
31
afficher
superglobales
:
print_r()
var_dump()
...............................................................................
31
$_file....................................................................................................................................................
32
objectif
:
upload
.......................................................................................................................................
32
technique
:
formulaire
spécial
............................................................................................................
32
exemple
8
:
$_file
....................................................................................................................................
32
fichier
............................................................................................................................................
34
présentation
.............................................................................................................................................
34
autoriser
l’écriture
de
fichier
sur
serveur
:
chmod
.............................................................................
34
syntaxe
générale
de
manipulation
fichier
....................................................................................
34
algorithmique
fichier
........................................................................................................................
35
exemple
9
–
tableau-users-etape-4
:
codage
avec
fichier
........................................................................
36
$_cookies
:
exemple
10
.......................................................................................................................
38
présentation
.............................................................................................................................................
38
principe
de
codage
..................................................................................................................................
38
modifier
supprimer
cookie
..............................................................................................................
39
précision
..................................................................................................................................................
39
bilan
...............................................................................
40
construction
d’un
site
variables
de
page
...........................................................................................
40
echanges
entre
page
.......................................................................................................................
40
appel
d’une
page
..................................................................................................................................
41
<
avoir
href=
«
url
»
>
......................................................................................................................................
41
<
form
action=
«
url
»
method=
«
»
>
.......................................................................................................
41
header(‘location
:
url’)
..............................................................................................................................
41
.htaccess
.htpasswd
..............................................
42
présentation
.........................................................................................................................................
42
.htaccess
...............................................................................................................................................
42
.htpasswd
.............................................................................................................................................
42
edition
:
mars
2019
base
php
–
environnement
de
développement
–
page
2/43

echanges
d’informations
en
php
manuel
de
référence
php
:
http://php.net/manual/fr/langref.php
introduction
:
passer
variables
dans
l’url
recherche
dans
google
de
:
«
php
variable
$_get
»
résultat
l’url
résultat
être
suivante
:
https://www.google.fr/#safe=active&q=php+variable+%24_get
derrière
https://www.google.fr/
trouver
élément
séparer
par
«
&
».
aller
trouver
:
«
q=php+variable+%24_get
».
variable
q
contenir
information
«
php
»
+
«
variable
»
+
«
%24_get
»
%24
venir
remplacer
$.
modification
de
l’url
pouvoir
modifier
l’url.
mettre
par
exemple
post
à
place
de
get.
obtenir
page
de
recherche
de
«
php
variable
$_post
»
simplification
pouvoir
écrire
dans
l’url
:
https://www.google.fr/search?q=php+variable+%24_post
conclusion
c’est
à
l’adresse
de
l’url
donner
page
à
afficher,
avec
paramètre
en
plus.
exercice
google
chercher
«
java
»
dans
l’url
de
google.
page
cours
regarder
l’url
de
page
cours
:
ici.
être
question
poser
dans
l’url
?
modifier
valeur
de
l’article,
par
exemple
216.
constatez-vous
?
base
php
–
environnement
de
développement
–
page
3/43

installation
fichier
de
test
exemple
cours
être
dans
fichier
zip
fournir
avec
l’article
cours
:
01exemples_get_post.zip
charger
fichier
mettez-le
dans
dossier
partie_2
répertoire
web
«
www
»
serveur
wamp.
exemple
être
présenter
dans
chapitre
en
vert.
exercice
à
faire
être
présenter
dans
chapitre
en
jaune.
remarque
:
fichier
d’exemples
commencer
par
trois
ligne
:
echo
'<h1>code
php</h1>';
highlight_file('fichier.php');
echo
'<h1>resultats</h1>';
code
afficher
deux
balise
h1
avec
code
php
resultats
fonction
«
highlight_file
»
permettre
d’afficher
contenu
fichier
proposé.
tester
code,
commencer
par
affiche
code.
ca
permettre
de
voir
code
en
même
temps
résultats.
pour
généraliser
code,
écrire
:
highlight_file(basename(__file__));
basename(__file__)
permettre
de
récupérer
nom
fichier
en
cours
de
traitement.
méthode
get
-
url
-
tableau
$_get
problématique
faire
passer
information
d’une
page
web
à
autre
?
passer
d’une
page
à
autre
pouvoir
faire
avec
<a
href="url">.
venir
de
voir
qu’on
pouvoir
passer
information
sur
l’url.
aller
pouvoir
passer
information
d’une
page
à
autre
de
manière.
exemple-1
:
<a
href="url">
tableau
$_get
objectif
l’objectif
est,
à
partir
d’une
premier
page
(la
page
d’appel)
de
faire
appel
à
deuxième
page
(la
page
appelée)
en
passer
information
circuler
à
travers
l’url.
principe
:
passage
de
paramètre
•
utiliser
<a
href="url">link
text</a>
•
dans
l’url,
aller
mettre
paramètres.
•
dans
page
appelée,
paramètre
retrouver
dans
tableau
associatif
de
paramètre
:
$_get
base
php
–
environnement
de
développement
–
page
4/43

page
appelante
:
avoir
href
fichier
:
index_appel_bonjour.php
c’est
page
html
php
(il
falloir
l’exécuter
via
serveur
web)
avec
<a
href>
:
<doctype
html>
<html>
<head>
<meta
charset="utf-8"
/>
<title>$_get-appelant</title>
</head>
<body>
<h1>test
de
$_get</h1>
<p>rendez-vous
sur
<a
href="01-1-bonjour.php?prenom=bertrand&amp;nom=liaudet">
bonjour
personnaliser
avec
$_get
</a>
<!
!--
syntaxe
:
?nom
de
variable=valeur&nom
de
variable=etc.
-->
</p>
</body>
</html>
href="bonjour.php?prenom=bertrand&amp;nom=liaudet">
•
nom
fichier
:
bonjour.php
•
un
?
•
nom
de
variable
=
information
(prenom=bertrand)
information
envoyées
aller
remplir
tableau
associatif
$_get
•
variables
être
séparer
par
«
&
».
écrire
«
&amp
;
»
«
&
»
seul
créer
confusion
en
html.
•
avoir
deuxième
variable
avec
valeur
:
nom=liaudet
page
appeler
:
$_get
fichier
:
bonjour.php
<?php
echo
'<h1>code
php
:
</h1>';
highlight_file(basename(__file__));
echo
'<h1>resultats
:
</h1>';
echo
'<h3>tableau
$_get
:
</h3>';
echo
'<pre>'
;
print_r($_get);
echo
'</pre>';
?>
<doctype
html>
<html>
<head>
<meta
charset="utf-8"
/>
<title>$_get-appelé</title>
</head>
<body>
<h1>page
appeléeee
par
&lt;a
href="url"&gt;
</h1>
base
php
–
environnement
de
développement
–
page
5/43

<h2>des
paramètre
être
passer
l'url
dans
tableau
$_get
:
</h2>
<p>
bonjour
<?php
echo
$_get['prenom'].
'
'
.$_get['nom'];
?>
</p>
</body>
</html>
explication
dans
page
appelée,
avoir
tableau
associatif
$_get
contenir
clé
valeur
fournir
dans
page
appelante
:
array
(
[prenom]
=>
bertrand
[nom]
=>
liaudet
)
pouvoir
exploiter
tableau
associatif
vouloir
dans
page
appelée.
&alt
;a
permettre
d’avoir
<
&gt
;
permettre
d’avoir
>
coder
spéciaux
html
:
ici.
précision
ø
url
:
voir
paramètre
…bonjour.php?prenom=bertrand&nom=liaudet
(dans
l’adresse
espace
être
traduire
par
%20)
ø
sécurité
–
confidentialité
l’information
circuler
être
visible
sur
lien
url.
falloir
faire
attention
à
limiter
à
information
confidentielle.
ø
limite
en
général,
navigateur
n’acceptent
url
de
de
256
caractères.
falloir
éviter
de
passer
d’informations
par
moyen.
base
php
–
environnement
de
développement
–
page
6/43

toujours
vérifier
information
fournir
par
l’utilisateur
–
1
présentation
avoir
voir
qu’on
pouvoir
voir
dans
l’url
information
fournir
par
l’utilisateur.
pouvoir
modifier
information
supprimer
dans
l’url.
ca
pouvoir
être
gênant
pour
fonctionnement
site.
falloir
faire
vérifications.
exemple-2
:
href-get-sans-verifications
code
sans
vérification
pouvoir
tester
résultat
donner
de
mauvaises
valeur
changer
l’url.
pouvoir
ralentir
serveur
générer
erreur.
exemple-3
:
href-get-avec-verifications
code
avec
vérification
vérifier
cas
à
problème
possibles
:
<?php
echo
'<h2>on
attendre
nombre
programme
appelant</h2>'
;
if(!
!isset($_get['nombre'])
){
echo
'<p>
de
nombre
reçu!
!</p>';
}
else{
//
cast:
$_get
n'est
entier,
obtenir
0
$nombre=(int)$_get['nombre'];
if(
$_get['nombre']
>10000
or
$_get['nombre']
<=0){
echo
'<p>
nombre
recevoir
n\'est
valide!
!</p>';
}
else{
echo
'<p>
aller
compter
jusqu\'à
'
.$nombre.
'</p>';
for($i=1;
$i<=$_get['nombre'];
$i++){
echo('<p>'
.$i.
'</p>');
}
}
}
?>
vérifier
information
attendre
exister
:
isset($var)
isset()
être
vrai
s’il
avoir
chose
dans
variable,
faux
sinon.
pouvoir
utiliser
fonction
empy()
transtypage
(cast)
:
forcer
type
d’une
variable
:
(int)
$_get[‘nombre’]
être
chaine
de
caractères.
pouvoir
tester
contenir
chiffre
avec
fonction
ctype_digit().
«
caster
»
$_get[‘nombre’]
avec
un
(int).
$_get[‘nombre’]
n’est
entier,
cast
renvoyer
base
php
–
environnement
de
développement
–
page
7/43

fonction
de
gestion
variables
exister
de
nombreuses
fonction
permettre
de
faire
vérifications.
être
fonction
de
gestion
variables
:
http://php.net/manual/fr/ref.var.php
base
php
–
environnement
de
développement
–
page
8/43

méthode
post
-
formulaire
-
tableau
$_post
rappel
sur
formulaire
principe
formulaire
être
l’outil
de
base
pour
échanger
information
avec
visiteurs.
http://www.w3schools.com/html/html_forms.asp
http://www.w3schools.com/tags/att_form_action.asp
http://bliaudet.free.fr/img/pdf/html_4_fonctionnalites_avancees.pdf
chapitre
3
:
formulaires,
page
9
à
12
:
<form>
<input>
syntaxe
de
base
•
exemple
:
<form
action="action.php"
method="post"
>
<p>
<label
for="nom">nom</label>
<input
type="text"
name="nom"
id="nom"
maxlength="10"
placeholder="votre
nom">
</p>
<p><input
type="submit"
value="valider"></p>
</form>
•
balise
form
contenir
2
attribut
principaux
:
method
action.
•
balise
form
contenir
balise
inclure
permettre
de
:
1.
caractériser
type
de
formulaire
(champ
de
saisie,
bouton,
menu
déroulant,
etc.)
2.
fournir
variables
à
passer
à
page
appeler
via
tableau
associatifs
$_get
$_post.
principe
c’est
passage
de
paramètre
(comme
dans
appel
de
fonction)
de
page
à
page.
paramètre
retrouver
dans
tableau
associatif
de
paramètre
:
$_get
$_post
code
html
de
page
appelante
remplir
$_get
$_post
dans
page
appelée,
accéder
élément
tableau
associatif
$_get
$_post
attribut
de
méthode
form
•
l’attribut
method
permettre
de
choisir
technique
de
transfert
d’informations.
avoir
2
:
get
post.
méthode
get
être
voir
faire
transiter
l’information
dans
l’url.
limiter
l’information
à
256
caractères.
méthode
post
permettre
d’envoyer
gros
contenu
d’informations
de
cacher
transit
utilisateurs.
utiliser
méthode
post
dans
formulaires.
•
l’attribut
action
dire
autre
page
être
appeler
avec
balise
form,
valider
sur
bouton
par
exemple,
à
page
envoyer
informations.
être
page
php
(ou
n’importe
autre
page
d’un
langage
serveur)
être
capable
de
traiter
information
transmises.
pouvoir
faire
appel
à
page.
base
php
–
environnement
de
développement
–
page
9/43

les
balise
inclure
dans
balise
form
•
balise
input
:
c’est
principale
balise
de
saisie.
fournir
en
général
champ
de
saisie.
saisie
«
typées
»
:
téléphone,
mail,
couleurs,
etc.
fournir
bouton
de
validation.
•
balise
textarea
:
fournir
zone
de
texte
à
saisir
•
balise
select
:
fournir
menu
dérouler
•
balise
fieldset
:
permettre
de
regrouper
dans
cadre
élément
de
saisie.
balise
legend
jouer
rôle
d’un
label
pour
cadre.
•
balise
label
:
permettre
de
mettre
texte
associer
à
zone
de
saisie.
http://www.w3schools.com/html/html_form_input_types.asp
2
attribut
fondamentaux
balise
inclure
:
name
value,
pour
remplir
$_get
$_post
pour
élément
d’un
formulaire
(un
champ
de
saisie,
bouton,
menu
déroulant,
etc.),
pouvoir
définir
«
name
»
être
nom
de
variable
qu’on
retrouver
dans
$_$get
$_post
être
accessible
dans
page
appelée.
«
name
»
être
variable
passée
en
paramètre
pour
page
appelée.
pouvoir
définir
«
value
»
être
valeur
de
variable
définir
par
«
name
».
«
value
»
pouvoir
être
fournir
à
travers
variable
avec
php
n’importe
langage
serveur.
a
noter
«
value
»
pouvoir
être
valeur
s’affiche
dans
formulaire
(par
exemple
texte
bouton
de
validation).
exemple
4
:
formulaire-post
page
appelante
:
<
form
action="actionpost.php"
method="post"
>
coder
formulaire
<form
action="actionpost.php"
method="post"
>
<p><label
for="prenom">prenom</label>
<input
type="text"
name="prenom"
id="prenom"
placeholder="votre
prenom"></p>
<p><label
for="nom">nom</label>
<input
type="text"
name="nom"
id="nom"
placeholder="votre
nom"></p>
<p><input
type="submit"
value="valider"></p>
</form>
dans
l’input
:
•
type
définir
type
de
saisie
:
texte
•
name
être
clé
tableau
associatif
$_post
$_get,
$_post
•
l’id
servir
pour
css
•
for
<label>
être
égal
à
l’id,
clic
sur
label
conduire
dans
l’input
pour
éviter
confusions.
•
placeholder
:
info
pour
saisie,
en
grisée
page
appeler
:
$_post
<p>
bonjour
<?php
echo
$_post['prenom']
.'
'.
$_post['nom']
;
?>
</p>
base
php
–
environnement
de
développement
–
page
10/43

le
tableau
$_post
fonctionner
tableau
$_get
:
c’est
tableau
associatif.
name
être
clé
(key)
tableau
$_post
:
être
cas
pour
autres
formulaires.
teste,
constater
qu’il
n’y
avoir
d’information
dans
l’url.
exemple
5
:
formuaire-get
page
appelante
:
<
form
action="actionpost.php"
method="get"
>
coder
formulaire
<form
action="actionpost.php"
method="get"
>
pager
appeler
:
$_get
<p>
bonjour
<?php
echo
$_get['prenom']
.'
'.
$_get['nom']
;
?>
</p>
dans
cas,
variables
transiter
via
l’url.
pouvoir
voir
dans
l’url.
base
php
–
environnement
de
développement
–
page
11/43

toujours
vérifier
information
fournir
par
l’utilisateur
–
2
:
faille
xss
never
trust
user
input!
!
principe
:
envoyer
code
avec
méthode
post,
l’information
envoyer
être
cachée.
pouvoir
envoyer
n’importe
code
html
javascript
nuire
à
l’utilisation
normale
site,
en
afficher
par
exemple
contenu
inadaptés.
l’envoi
de
code
à
place
d’un
texte,
c’est
qu’on
appeler
faille
xss
exemple
4
5
exemple
précédents
être
protégés.
pouvoir
saisir
simple
balise
html,
code
javascript,
balise
html
complexes
(un
formulaire!
!)
ø
saisir
de
balise
dans
test
précédent,
à
place
de
saisir
simple
nom
:
«
bertrand
»,
pouvoir
saisir
«
<h1>bertrand</h1>
dans
cas,
balise
<h1>
être
interpréter
texte
apparaître
en
gros.
ø
saisir
de
code
javascript
pouvoir
ajouter
code
javascript
:
<script
type="text/javascript">alert('un
virus
avoir
être
détecter!
!veuillez
rendre
sur
bliaudet.free.fr')</script>!
!
2
exemple
précédents
être
grave,
avec
code
javascript,
pirate
pouvoir
récupérer
information
privées
d’un
utilisateur.
ø
rôle
navigateur
safari
(apple)
protéger
contre
intrusion
xss
(et
firefox).
firefox
50.0.2,
laisser
passer
javascript
solution
:
exemple
6
principe
php
fournir
deux
fonction
permettre
de
traiter
code
interprétable
simple
chaîne
de
caractères.
fonction
htmlspecialchars
fonction
htmlspecialchars
permettre
code
insérer
traiter
texte
normal.
htmlspecialchars($_post['nom'])
saisir
:
<h1>bertrand</h1>,
site
afficher
:
bonjour
<h1>bertrand</h1>
:
balise
h1
n’aura
être
prise
en
compte.
http://php.net/manual/fr/function.htmlspecialchars.php
transformation
caractère
spécial
«
<
»
en
caractère
normal
«
&lt;
»
regarder
code
source
d’une
page
avec
htmlspecialchars,
voir
«
<
»
être
interpréter
par
navigateur
début
d’une
balise
être
remplacer
par
«
&lt;
»
permettre
navigateur
d’afficher
<
base
php
–
environnement
de
développement
–
page
12/43

c’est
cas
dans
safari,
dans
firefox
chrome.
fonction
htmlentities
fonction
htmlentities
être
équivalente
à
fonction
htmlspecialchars
en
restrictive
:
caractère
avoir
équivalents
html
être
traduits.
http://php.net/manual/fr/function.htmlentities.php
fonction
de
traitement
de
chaîne
de
caractère
htmlspecialchars
htmlentities
être
fonction
de
traitement
de
chaîne
de
caractères.
fonction
:
http://php.net/manual/fr/ref.strings.php
trouver
par
exemple
:
ltrim
(suppression
espace
en
trop),
ucfirst
(upper
caser
pour
premier
lettre),
etc.
:
printf
sprintf
fonction
printf
permettre
d’écrire
chaine
avec
variables
«
formater
(comme
«
echo
»
formaté).
fonction
sprintf
permettre
de
retourner
lef
résultat
dans
chaine.
exemple
printf(«
prix
être
%.2f
euro
»,
$prix)
;
résultat
afficher
pour
prix
être
avec
2
chiffre
après
virgule.
%s
:
string
%f
:
float
avec
chiffre
après
virgule.
%d
:
entier
%c
:
caractère
etc.
documentation
:
http://php.net/manual/fr/function.sprintf.php
tester
code
:
http://phptester.net
protéger
contre
faille
:
aide
en
ligne
https://openclassrooms.com/courses/protegez-vous-efficacement-contre-les-failles-web
base
php
–
environnement
de
développement
–
page
13/43

tp
1
:
exercice
password
premier
version
objectif
donner
l’accès
à
page
contenir
information
cacher
pour
avoir
mot
de
passe.
n’a
bon
mot
de
passe,
revenir
sur
page
d’accueil.
méthode
d’abord
réfléchir
sur
papier!
!
être
page
en
jeu
?
une,
?
page
communiquent-elles
entre
?
premier
analyse
•
page
d’accueil
:
formulaire
de
saisie
d’un
mot
de
passe.
en
html.
•
mot
de
passe
saisir
dans
formulaire
être
envoyer
dans
tableau
$_post
à
page
action,
en
php,
vérifier
mot
de
passe
être
bon
avant
d’afficher
information
cachées.
•
mot
de
passe
être
faux,
falloir
afficher
message
d’erreur
•
dans
cas,
page
appeler
permettre
de
revenir
sur
page
appelante.
elément
de
solution
dans
page
action
trouver
code
:
if(isset($_post['password'])
and
htmlspecialchars($_post['password'])=='password'){
remarque
:
crypter
mot
de
passe
circulation
sur
réseau
:
https
mot
de
passe
apparaître
dans
page
action.
toutefois,
être
dans
code
php
(dans
if),
être
visible
sur
navigateur
poste
client.
c’est
sécuriser
serveur
être
sécurisé!
!
:
faire
circuler
mot
de
passe
sur
réseau,
avoir
risque.
c’est
https
permettre
de
sécuriser
circulation.
enregistrement
dans
bd
en
pratique,
mot
de
passe
être
récupérer
dans
bd
:
:
mot
de
passe
devoir
être
enregistrer
crypté
dans
bd.
pour
crypter,
utiliser
fonction
crypt
:
$
hashed_password
=
crypt($password)
pour
décrytpter,
écrire
code
suivant,
password
être
mot
de
passe
saisi,
hashed_password
mot
de
passe
récupérer
dans
bd.
if
(crypt($password,
$hashed_password)
==
$hashed_password)
{
base
php
–
environnement
de
développement
–
page
14/43

echo
"mot
de
passe
correct!
!";
}
else{
echo
"mot
de
passe
incorrect!
!";
}
deuxième
version
:
monofichier
souhaiter
coder
dans
seul
fichier.
page
action
être
page
d’accueil
elle-même.
aller
falloir
tester
différents
cas
début
de
page
d’accueil
:
•
est-on
dans
cas
falloir
afficher
formulaire
?
$_post['password']
n’est
setté
•
est-on
dans
cas
mot
de
passe
être
bon
?
$_post['password']
=
«
password
»
•
est-on
dans
cas
mot
de
passe
être
mauvais
?
$_post['password']!
!=
«
password
»
base
php
–
environnement
de
développement
–
page
15/43

exemple
7
:
saisie
d’un
utilisateur
structure
code
vouloir
obtenir
page
suivante
:
utilisation
de
fonction
aller
utiliser
fonction
«
printlesusershtml()
»
qu’on
avoir
définir
dans
exercice
sur
tableau
d’utilisateur.
base
php
–
environnement
de
développement
–
page
16/43

en
cas
d’erreur
:
saisir
champs,
afficher
message
qu’on
voir
en
jaune
base
php
–
environnement
de
développement
–
page
17/43

structure
de
page
html
page
html
aller
utiliser
2
variables
php
:
$lesusers
$msgerr.
avoir
page
html
classique,
avec
petit
de
php,
en
gris
:
<!
!doctype
html>
<html>
<head>
<meta
charset="utf-8"
/>
<link
rel="stylesheet"
href="style.css"
/>
<title>tableau</title>
</head>
<body>
<?php
echo
'<h2>affichage
utilisateurs</h2>';
printlesusershtml($lesusers);
?>
<h2>entrez
information
dun
utilisateurs</h2>
<p>tous
champ
être
obligatoires</h2>
<form
action="index-tp-users-formulaire.php"
method="post"
>
<fieldset>
<legend>entrez
bon
mot
de
passe
pour
accéder
code
secrets</legend>
<p><label
for="nom">nom
prénom</label>
<input
type="nom"
name="nom"
id="password"
placeholder="nom"></p>
<p><label
for="mail">mail</label>
<input
type="mail"
name="mail"
id="mail"
placeholder="mail"></p>
<p><label
for="mail">mot
de
passe</label>
<input
type="password"
name="password"
id="password"
placeholder="password"></p>
<p><label
for="annee">année
naissance</label>
<input
type="annee"
name="annee"
id="password"
placeholder="annee"></p>
<input
type="hidden"
name="lesusers"
value='<?php
echo
serialize($lesusers)
?>'
>
<p><input
type="submit"
name="submit"
value="valider"></p>
</fieldset>
</form>
<?php
if
(isset($msgerr)){
echo
$msgerr;
}
?>
</body>
</html>
base
php
–
environnement
de
développement
–
page
18/43

code
php
code
php
être
placer
début.
avoir
4
étape
:
1)
debug
:
afficher
$_post
2)
inclure
fonction
3)
initialiser
variables
:
$lesusers
4)
traiter
cas
avoir
valider
saisie.
<?php
//
1
:
debut
echo
'$_post
:
';
print_r($_post);echo
'<br>';
//
2
:
inclusion
fonction
include_once("unuser.php");
include_once("lesusers.php");
//
3
:
initialiser
tableau
user
$lesusers=initlesusers();
//
4
:
avoir
valider
formulaire
if(
isset($_post['submit'])
)
{
//
charger
bon
$lesusers
$lesusers
=
unserialize($_post['lesusers']);
//
saisie
n'est
complète
if
(
!
!isset($_post['nom'])
or
ltrim($_post['nom'])==''
or!
!isset($_post['mail'])
ltrim($_post['mail'])==''
or!
!isset($_post['annee'])
ltrim($_post['annee'])==''
or!
!isset($_post['password'])
or
ltrim($_post['password'])==''
){
$msgerr='<h2
style="background-color:yellow">tous
champ
être
obligatoires</h2>';
}
//
saisie
être
complète,
récupérer
$lesusers
ajouter
saisie
else
{
$lesusers[]=newuser($_post['nom'],$_post['mail'],$_post['passwo
rd'],$_post['annee']);
}
}
?>
base
php
–
environnement
de
développement
–
page
19/43

conclusion
avec
organisation,
avoir
séparer
php
html.
c’est
un
premier
étape
vers
mvc.
page
html-php
aller
ressembler
à
<
?php
//partie
php
session_start();//
ouvre
session,
c’est
faire
en
1er
etc.
?>
<doctype
html>
<!
!--
partie
html
-->
</html>
base
php
–
environnement
de
développement
–
page
20/43

$_session
présentation
•
«
session
»
c’est
instance
de
fonctionnement
d’un
programme.
•
avoir
début
fin.
•
pour
site
web,
session,
c’est
fonctionnement
site
pour
client,
c’est-à-dire
navigateur.
•
session
contenir
information
pouvoir
être
accessibles
à
pages.
information
être
ranger
dans
tableau
associatif
$_session
précision
technique
faire
serveur
pour
savoir
qu’il
s’agit
de
utilisateur
?
c’est
cookie
de
session
permettre
de
garantir
cela.
cookie
n’a
de
sens
pour
serveur
web
donner
information
sur
l’utilisateur.
revenir
dans
chapitre
sur
cookies.
https://openclassrooms.com/courses/concevez-votre-site-web-avec-php-et-mysql/session-cookies
utilisation
tableau
associatif
$_session
démarrage
d’une
session
devoir
faire
avant
code
html.
session_start()
pour
pouvoir
utiliser
variable
$_session
falloir
appeler
fonction
session_start().
page
vouloir
utiliser
$_session
devoir
appeler
session_start()
<
?php
session_start();
?>
<doctype
html>
l’appel
de
fonction
devoir
faire
début
de
page,
avant
<doctype
html>
$_session
$_session
s’utilise
tableau
associatif.
pour
enregistrer
donnée
dans
$_session
écrire
:
$_session['administrateur']='bertrand';
fois
clé
«
administrateur
»
créée,
pouvoir
tester
exister
:
if
(isset($_session['administrateur']){
echo
'bonjour'.
$_session['administrateur'];
echo
'vous
être
connecter
pouvoir
accéder
back-office';
}
terminer
session
technique
pouvoir
terminer
un
session.
1
:
unset($_session['administrateur'])
base
php
–
environnement
de
développement
–
page
21/43

un
«
unset
»
finir
session,
supprimer
clé
dans
$_session.
test
avec
«
isset
»
donner
réponse
fausse.
2
:
$_session
=
array()
instruction
supprimer
variables
de
sssion.
3
:
patienter!
!timeout
bouillir
d’un
temps
sans
activité,
«
timeout
»,
variables
de
session
être
supprimées.
4
:
déconnecter
:
fermer
client,
navigateur.
•
quitter
navigateur,
variables
de
session
être
supprimées.
•
a
noter
fermer
page
sans
fermer
navigateur
supprimer
variables
de
session.
•
a
noter
site
conserver
variables
de
session
(la
connexion
typiquement)
même
avoir
fermer
navigateur.
dans
cas,
utiliser
cookies.
reviendra.
5
:
session_destroy();
http://php.net/manual/fr/function.session-destroy.php
fonction
bloquer
l’effet
session_start()
sans
supprimer
données.
nouveau
session_start()
permettre
d’y
réaccéder.
base
php
–
environnement
de
développement
–
page
22/43

tp
2
:
synthèse
:
site
user
objectif
:
consulter
utilisateur
connecter
admin
pour
pouvoir
ajouter
utilisateur.
coder
en
séparer
php
html.
reprendre
corriger
exercice
tableau
user
étape
2-fonction
étape
3-tri.
etape
1
:
affichage
utilisateur
avec
header
nav
l’objectif
être
d’obtenir
page
suivante
:
index-users.php
css
obtenir
résultat,
css
être
fourni.
header
-
nav
pour
qu’il
fonctionne,
gérer
header
html
contenir
nav
avec
lien
«
user
».
nav
avoir
id=nav.
base
php
–
environnement
de
développement
–
page
23/43

le
être
de
mettre
header
dans
fichier
séparer
:
header.php,
dans
dossier
«
include
».
initlesusers(),
printlesusers()
tableau
utilisateur
être
obtenir
en
utiliser
fonction
initlesusers()
printlesusershtml
être
fournir
dans
fichier
lesusers.php
qu’il
falloir
inclure.
triparnomdesc(),
triparnomasc()
ajouter
deux
bouton
:
«
tri
par
nom
desc
»
«
tri
par
nom
asc
».
aller
utiliser
fonction
triparnomdesc()
triparnomasc()
être
définir
dans
fichier
tri.php.
après
avoir
utiliser
fonction
initlesusers(),
devoir
vérifier
s’il
avoir
tri
à
faire.
affichage
débug
debut
fichier,
écrire
:
echo'post
:
';print_r($_post);echo'<br/>';
echo'get
:
';print_r($_get);echo'<br/>';
echo'url
:
';print_r($_server['php_self']);echo'<br/>';
structure
code
:
impotant!!!
!!!
dossier
:
doter
d’un
dossier
css
d’un
dossier
include.
laisser
à
racine
indexuser.php.
dans
fichier
indexuser.php,
commencer
par
code
php
:
debug
l’initialisation
tableau
tri
tableau
ensuite,
mettre
code
html
:
<!
!doctype
html>
etc.
base
php
–
environnement
de
développement
–
page
24/43

etape
2
:
ajout
formulaire
admin-mot
de
passe
objectif
:
ajouter
formulaire
de
connexion
à
page
d’administration
permettre
de
saisir
nouvel
utilisateur.
formulaire
pour
obtenir
résultat
avec
css,
ajouter
dans
nav
formulaire
«
admin,
password,
ok
».
formulaire
id
=
admin.
bouton
ok
amène
sur
page
index-admin-users.php,
qu’on
aller
écrire
à
page
suivante.
variables
formulaire
s’appellent
«
admin
»
«
password
».
base
php
–
environnement
de
développement
–
page
25/43

etape
3
:
page
d’administration
l’objectif
être
d’obtenir
page
suivante
:
index-admin-users.php
ø
header
de
doter
d’un
nouveau
header
:
header-admin.php
(on
dupliquer
header.php).
faire
mise
à
jour
en
ajouter
lien
:
«
admin
user
»
en
modifier
formulaire
de
saisie.
pour
gérer
l’utilisateur
connecté,
avoir
enregistrer
valeur
admin
mot
de
passe
dans
$_session.
ø
fichier
index-admin-users.php
dupliquer
fichier
index-user.php
supprimer
concerner
tris.
ø
formulaire
de
saisie
base
php
–
environnement
de
développement
–
page
26/43

pour
afficher
formulaire
de
saisie
d’un
nouvel
utilisateur,
utiliser
l’exercice
de
l’étape
3
:
03exercice-tableau-users-formulaire
ø
gérer
entrée
dans
deux
page
dans
premier
temps,
gérer
conséquence
bouton
autre
l’accès
à
page
:
vérifier
mot
de
passe,
n’enregistre
nouveau
user.
base
php
–
environnement
de
développement
–
page
27/43

etape
4
:
vérifier
login
objectif
:
vérifier
de
mot
de
passe.
en
cas
d’erreur,
afficher
page
d’erreur.
en
cas
de
réussite,
faire
en
sorte
l’utilisateur
rester
connecter
s’il
clique
sur
menu
«
user
».
gérer
déconnexion.
page
d’erreur
pour
obtenir
page
d’erreur,
créer
nouvelle
page
:
indexerreur.php
c’est
page
html
inclure
header.php
affiche
message
d’erreur.
pouvoir
tester
page.
vérification
login
–
mot-de-passe
dans
page
d’admin,
vérifier
début
avoir
recevoir
bon
login
–
motdepasse.
vérifier
deux
champ
être
settés
qu’ils
contiennent,
par
exemple
«
admin
»
«
admin
».
c’est
cas,
enregistrer
valeur
de
$_session[‘admin’].
commencer
par
faire
session_start()
en
début
de
page.
tester
$_session[‘admin’]
être
setté.
n’est
cas,
include
indexerreur.php
quitter
page.
ajouter
echo'session
:
';
print_r($_session);echo'<br/>';
pour
debug.
gestion
de
déconnexion
dans
page
user,
tester
$_post['deconnexion']
être
setté
(on
venir
bouton
déconnexion).
c’est
cas,
unset
$_session['admin']
dans
page
d’admin,
cliquer
sur
users,
revenir
à
page
user.
falloir
rester
sur
admin.
pour
ça,
afficher
page
admin,
falloir
selectionner
header
headeradmin
selon
$_session[‘admin’]
être
setté
pas.
base
php
–
environnement
de
développement
–
page
28/43

etape
5
:
enregistrer
nouveau
user
objectif
:
reprendre
l’exercice
de
l’étape
3
:
03-exercice-tableau-users-formulaire
exercice
permettre
d’ajouter
utilisateur
dans
tableau
en
gérer
champ
hidden
fonction
serialize().
solution
:
dans
exercice,
falloir
faire
circuler
tableau
utilisateur
entre
pages,
dans
cas.
simple
être
de
mettre
dans
$_session.
avoir
instruction
:
$_session['lesusers']
=
serialize($lesusers);
dans
page
indexuser.php
avant
d’initialiser
tableau
$lesusers,
tester
$_session['lesusers']
être
setté.
c’est
cas,
$lesusers
valoir
contenu
de
$_session['lesusers'].
$lesusers
=
unserialize($_session['lesusers']);
dans
page
indexadminuser.php
pour
initialiser
tableau
$lesusers,
récupérer
dans
$_session
:
$lesusers
=
unserialize($_session['lesusers']);
faire
l’insertion
nouveau
user,
s’il
avoir
lieu
mettre
à
jour
$_session
:
$_session['lesusers']
=
serialize($lesusers);
insertion
nouveau
user
pouvoir
reprendre
l’exercice
de
l’étape
3
:
03-exercice-tableau-users-formulaire
en
l’adaptant
peu.
base
php
–
environnement
de
développement
–
page
29/43

etape
6
:
création
d’un
fichier
index.php
–
fonction
header(url)
objectif
vouloir
projet
démarrer
seul
arriver
dans
dossier.
idée
pouvoir
choisir
de
renommer
page
indexuser.php
en
index.php
de
mettre
à
jour
appel
à
page
dans
code.
être
long
à
refaire
changer
de
page
d’accueil!
!
solution
:
fonction
header(url)
http://php.net/manual/fr/function.header.php
header
permettre
de
demander
url,
un
href.
pouvoir
passer
paramètres,
pour
url.
être
utile
passer
mvc.
devoir
être
utiliser
avant
code
html.
ø
exemple
de
fichier
avec
header
<?php
header('location:
mapage.php');
?>
base
php
–
environnement
de
développement
–
page
30/43

les
variables
superglobales
présentation
être
tableau
associatifs
http://php.net/manual/fr/language.variables.superglobals.php
variables
superglobales
être
tableau
associatifs.
être
accessibles
à
moment
dans
page,
contexte
(particulièrement
dans
fonctions).
s_get
-
$_post
-
$_session
avoir
aborder
3
variables
superglobales.
$_cookie
$_request
$_cookie
être
variable
utiliser
pour
conserver
information
sur
avoir
machine
client
via
cookies.
cf.
chapitre
suivant.
$_request
contenir
par
défaut
$_cookie,
$_get
$_post.
s_file
$_files
:
être
variable
utiliser
pour
téléchargements
de
fichier
via
http
par
méthode
post.
cf.
chapitre
suivant.
$_server
$_
env
$_server
:
variables
concerner
serveur
programme.
trouver
par
exemple
:
$_server[‘remote_addr’]
être
l’adresse
ip
client
demander
page
courante.
$_env
:
variables
concerner
variables
d’environnement
serveur.
superglobale
être
utilisée.
afficher
superglobales
:
print_r()
var_dump()
fonction
print_r
var_dump
afficher
tableau
associatifs
ligne.
avec
balise
<pre>
</pre>,
pouvoir
avoir
affichage
avec
ligne
par
couple
key-value.
base
php
–
environnement
de
développement
–
page
31/43

$_file
objectif
:
upload
transmettre
fichier
à
script
php.
ø
gestion
chargement
de
fichier
•
http://php.net/manual/fr/features.file-upload.php
ø
chargement
de
fichier
par
méthode
post
•
http://php.net/manual/fr/features.file-upload.post-method.php
ø
$_files
•
http://php.net/manual/fr/reserved.variables.files.php
•
https://openclassrooms.com/courses/concevez-votre-site-web-avec-php-et-mysql/transmettredes-donnees-avec-les-formulaires
technique
:
formulaire
spécial
•
balise
form
avec
attribut
method="post"
attriubt
enctype="multipart/formdata"
•
balise
input
avec
attribut
type="file"
attribut
name="la
clé
nom
fichier
dans
$_files"
exemple
8
:
$_file
fichier
de
balise
<form>
contenir
formulaire
suivre
:
<form
method="post"
action="action.php"
enctype="multipart/form-data">
sélectionner
fichier
:
<input
type="file"
name="userfile">
<input
type="submit"
value="envoyer">
</form>
l’attribut
name
donner
nom
de
clé
dans
tableau
associatif
$_files
avoir
valeur
fichier
qu’on
avoir
uploadé.
input
type=
«
file
»
générer
interface
de
sélection
de
fichier
sur
l’ordinateur
client.
fichier
d’action
ø
résultat
-
$_file
dans
page
action.php,
variable
$_file[‘userfile’]
être
définie,
avec
champ
suivants
:
name,
type,
size,
tmp_name,
error.
array
(
[userfile]
=>
array
(
[name]
=>
exo.php
base
php
–
environnement
de
développement
–
page
32/43

[type]
=>
text/php
[tmp_name]
=>
/applications/mamp/tmp/php/phpyprqlw
[error]
=>
0
[size]
=>
269
)
)
ø
move_uploaded_file
dans
page
action,
aller
mettre
fichier
charger
dans
répertoire
qu’on
veut.
fichier
être
charger
dans
répertoire
temporaire
:
$_file[‘userfile’]
[‘tmp_name].
pour
mettre
veut,
utiliser
fonction
:
move_uploaded_file
(
$nomdufichiertmpsurleserveur,
$nomdufichiersurlesite
)
$nomfile
=$_files['userfile']['name'];
echo
'fichier
charger
:
'.$nomfile.'<br>';
$tmpdir=$_files['userfile']['tmp_name'];
echo
'fichier
stocker
:
'.$tmpdir.'<br>';
//
uploade
fichier
temporaire
$tmpdir
:
nouveau
fichier
//
s’appelle
$nomfile,
trouver
dans
repertoire
courant,
//
repertoire
fichier
php
s’exécute
$res=move_uploaded_file($tmpdir,
$uploaddir.$nomfile);
if($res)
echo
'upload
réussir
<br>';
else
echo
'l\'upload
avoir
échouer
<br>';
test
tester
avec
upload
d’un
fichier
pouvoir
trouver
n’importe
sur
machine
navigateur.
pouvoir
uploader
n’importe
fichier.
programme
de
test
afficher
contenu
fichier
texte,
fichier
php
sql,
images.
base
php
–
environnement
de
développement
–
page
33/43

les
fichier
présentation
http://php.net/manual/fr/ref.filesystem.php
https://openclassrooms.com/courses/concevez-votre-site-web-avec-php-et-mysql/lire-et-ecrire-dansun-fichier-5
fichier
permettre
d’enregistrer
information
sur
serveur
pour
consulter
modifier
ultérieurement.
fonctionnement
général
être
langage
c.
autoriser
l’écriture
de
fichier
sur
serveur
:
chmod
chmod
être
commande
linux
pour
donner
droit
en
lecture,
écriture
exécution
sur
fichier
dossiers.
pour
écrire
dans
fichier
sur
serveur,
falloir
dossier
contenir
fichier
donner
droit
utilisateur
de
lire
d’écrire
(et
d’exécuter).
c’est
valeur
777.
manipulation
faire
sur
serveur,
à
travers
à
logiciel
ftp
par
exemple.
syntaxe
générale
de
manipulation
fichier
avoir
3
étape
dans
manipulation
fichier
:
1
:
créer
ouvrir
fichier
•
fopen()
2
:
traitement
ø
ø
ø
ecrire
dans
fichier
:
•
fputs()
pour
écrire
ligne,
•
fputc()
pour
écrire
caractère,
•
fprintf()
pour
écrire
chaîne
formatée,
•
etc.
lire
dans
fichier
:
•
fgets()
pour
lire
ligne,
•
fgetc()
pour
lire
caractère,
fseek
pour
déplacer
dans
fichier,
•
fscanf()
pour
lire
chaîne
formatée,
•
etc.
déplacer
dans
fichier,
•
fseek()
4
:
fermer
fichier
•
fclose()
base
php
–
environnement
de
développement
–
page
34/43

algorithmique
fichier
type
fichier
type
être
pointeur
donner
l'adresse
d'un
élément
fichier
(d'abord
l'adresse
premier
élément
fichier.
aller
contenir
d'autres
information
:
être
faire
structure
l'un
champ
contenir
l'adresse
de
l'élément
courir
fichier.
falloir
comprendre
dans
programme,
avoir
variable
habituelle
(une
structure
n'importe
structure)
contenir
l'adresse
d'un
élément
d'un
fichier.
ptfich
fichier
programme
rom
ouvrir
fichier
créer
nécessaire
:
fopen
http://php.net/manual/fr/function.fopen.php
$ptfich
=
fopen("nomdufichiersurledisque",
"mode
d’ouverture");
nom
fichier
sur
disque
pouvoir
être
absoudre
relatif.
avoir
mode
d’ouverture
fichier
:
r,
r+,
w,
w+,
a+,
etc.
«
r
»
permettre
lecture
seule,
«
r+
»
lecture
l’écriture,
«
w
»
l’écriture
seule
avec
création
fichier
n’existe
pas,
«
w+
»,
lecture
l’écriture
avec
création
fichier
n’existe
pas,
etc.
voir
documentation
de
référence
pour
détail.
fermer
fichier
:
fclose
falloir
fermer
fichier
qu’on
utiliser
pour
permettre
à
d’autres
de
utiliser.
$booléen
fclose
($ptfich)
;
lire
dans
fichier
$string
fgets
($ptfich)
;
fgets
permettre
de
lire
ligne
courante.
avoir
d’autres
fonction
fgetc,
fscanf,
fread,
etc.
voir
par
exemple
:
http://php.net/manual/fr/function.fscanf.php
chapitre
voir
aussi.
écrire
dans
fichier
$int
fwrite
($ptfich,
$string)
;
fwrite
écrire
$string
passer
en
paramètre.
fputs
être
de
fwrite.
fonction
retourner
nombre
d’octets
écrits.
0
=
false,
0
octet
écrit.
fonction
fprintf
être
autre
fonction
permettre
d’écrire
dans
fichier
avec
système
de
formatage.
base
php
–
environnement
de
développement
–
page
35/43

http://php.net/manual/fr/function.fwrite.php
déplacer
dans
fichier
pouvoir
déplacer
dans
fichier
d’un
nombrer
d’octets
précisés.
nombre
être
négatif,
partir
de
fin
fichier.
fseek
($ptfich,
nombredoctets);
http://php.net/manual/fr/function.fseek.php
repérer
fin
fichier
pouvoir
vérifier
à
moment
$ptfich
être
arriver
à
fin
ficher.
$booléen
feof
($ptfich);
http://php.net/manual/fr/function.feof.php
exemple
9
–
tableau-users-etape-4
:
codage
avec
fichier
reprendre
l’étape
2
l’étape
3
aller
rajouter
fonction
de
traitement
de
fichier.
doter
d’une
fonction
d’écriture
tableau
$lesusers
dans
fichier
:
function
ecrirelesusersdansfichier($nomfichier,
$lesusers)
d’une
fonction
de
lecture
d’un
tableau
$lesusers
à
partir
d’un
fichier
:
function
lirelesusersdansfichier($nomfichier,
&$lesusers)
fonction
ecrirelesusersdansfichier
function
ecrirelesusersdansfichier($nomfichier,
$lesusers){
$ptfich=fopen($nomfichier,
"w");
foreach
($lesusers
avoir
$unuser){
foreach
($unuser
avoir
$element){
echo
$element.'
--
';
fprintf($ptfich,
"%s
--
",
$element);
}
echo
'<br/>'
;
fprintf($ptfich,
"\n");
//\n
seul
pour
saut
de
ligne
}
fclose($ptfich);
}
fonction
commencer
par
fopen
retourner
$ptfich
:
chercher
l’usage
de
fopen.
pour
écrire
dans
fichier,
passer
«
w
»
fopen.
écrire
dans
fichier
avec
fprintf
:
chercher
l’usage
de
fprintf.
pour
passer
à
ligne,
écrire
:
fprintf($ptfich,
"\n");
enfin,
fclose
ferme
fichier.
fonction
lirelesusersdansfichier
function
lirelesusersdansfichier($nomfichier,
&$lesusers){
$ptfich=fopen($nomfichier,
"r");
while
(!
!feof($ptfich)){
//
lire
5
param
prénom
nom
être
2
chaîne
séparer
//
mettre
--
être
dans
fichier
base
php
–
environnement
de
développement
–
page
36/43

//
considérer
3
champ
contenir
d'espaces
$lectureok=fscanf($ptfich,
"%s
%s
--
%s
--
%s
--
%s
--
",
$prenom,
$nom,
$mail,
$motdepasse,
$anneenaissance);
if(!
!$lectureok)
{
//
avoir
pb.
de
lecture,
sortir
return
0;
//
pouvoir
gérer
finement!
!
}
$unuser=newuser($prenom.'
'.$nom,
$mail,
$motdepasse,
$anneenaissance);
printunuser($unuser);
$lesusers[]=$unuser;
}
fclose($ptfich);
return
1;
}
fonction
commencer
par
fopen
en
mode
«
r
».
lire
dans
fichier
avec
fscanf
:
récupérer
champ
d’un
utilisateur.
créer
l’utilisateur
mettre
dans
$lesutilisateurs.
enfin,
fclose
ferme
fichier.
base
php
–
environnement
de
développement
–
page
37/43

$_cookies
:
exemple
10
présentation
cookies
être
petits
fichier
(<4ko)
stocker
par
navigateur
sur
poste
client
pour
conserver
information
pour
prochaine
fois.
pouvoir
garder
trace
de
visite
d’un
site
pour
visite
suivante.
appeler
témoin
de
connexion.
seul
domaine
avoir
créer
cookie
pouvoir
relire.
utilisateur
navigateur
pouvoir
désactiver
cookies
pour
domaine
particulier.
selon
législation
en
vigueur,
l’utilisateur
devoir
donner
accord
pour
recevoir
cookies
(c’est
cas
en
france).
http://php.net/manual/fr/reserved.variables.cookies.php
https://openclassrooms.com/courses/concevez-votre-site-web-avec-php-et-mysql/session-cookies
principe
de
codage
pouvoir
enregistrer
cookies
:
fonction
setcookie.
pouvoir
lire
cookies
:
dans
variable
$_cookie.
enregistrer
cookie
sur
machine
client
:
setcookie
http://php.net/manual/fr/function.setcookie.php
setcookie
permettre
d’enregistrer
cookie
sur
machine
client.
setcookie
devoir
être
écrire
avant
code
html
:
avant
doctype.
par
exemple,
arriver
dans
page
suite
à
validation
d’un
formulaire
post
avec
variable
nom
variable
prenom
dans
$_post,
pouvoir
enregistrer
2
cookies
:
nom
prénom
de
l’utilisateur
:
<?php
if(isset($_post['nom']
setcookie('nom',$_post['nom']
,time()+3600*24*7);
if(isset($_post['prenom']
setcookie('prenom',$_post['prenom']
,time()+3600*24*7);
?>
<!
!doctype
html>
...
cookie
en
général
minimum
3
caractéristique
:
•
nom
•
valeur
•
date
d’expiration
:
aujourd’hui
(time)+
secondes
:
semaine.
accéder
cookie
dans
code
:
$_cookie
vouloir
afficher
«
bonjour
nom
prenom
»
l’utilisateur
arriver
sur
site
qu’il
être
venir
qu’on
avoir
enregistrer
cookies
de
nom
de
prenom,
utiliser
tableau
associatif
$_cookie.
base
php
–
environnement
de
développement
–
page
38/43

dans
header,
par
exemple,
pouvoir
récupérer
nom
prenom
pour
afficher
bonjour
autre
chose
:
if
(isset($_cookie['nom']))
{
$nom
=
cookie['nom']
;
}
if
(isset($_cookie['nom']))
{
$prenom
=
cookie['nom']
;
}
//
pouvoir
faire
qu’on
vouloir
de
$nom
$prenom
ø
sécuriser
cookies
attention
:
cookies
être
modifiables
par
client!
!il
falloir
considérer
information
sûres!
!
falloir
utiliser
fonction
htmlspecialchars
pour
protéger
contenu
cookie
:
if
(isset($_cookie['nom']))
{
$nom
=
htmlspecialchars(cookie['nom']);
}
if
(isset($_cookie['nom']))
{
$prenom
=
htmlspecialchars(cookie['nom']);
}
//
pouvoir
faire
qu’on
vouloir
de
$nom
$prenom
modifier
supprimer
cookie
pour
modifier
supprimer
cookie,
reprendre
fonction
setcookie.
pour
modification,
garder
même
nom
pouvoir
changer
valeur
et/ou
date
d’expiration.
pour
suppression,
garder
même
nom
passer
date
d’expiration
avant
date
heure
actuelle
:
passer
«
time()
–
1000
»
par
exemple.
préciser
consulter
cookies
sur
navigateur
sur
navigateur,
en
afficher
outil
de
développement
ressource
de
page
pouvoir
accéder
ressource
stockage
visualiser
cookies.
aller
voir
cookie.
voir
cookie
phpsessid
:
php
sess
id
:
c’est
cookie
créer
par
php
avec
valeur
id
de
session
permettre
de
retrouver
l’utilisateur.
autres
paramètre
setcookie
http://php.net/manual/fr/function.setcookie.php
4
autres
paramètre
à
fonction
setcookie
permettre
de
sécuriser
cookies.
dernier,
httponly,
s’il
être
à
true
pouvoir
limiter
risque
de
faille
xss
en
interdire
javascript
pouvoir
accéder
cookie.
setcookie('nom','bertrand
liaudet',time()+3600*24*7,
null,
null,
false,
true);
base
php
–
environnement
de
développement
–
page
39/43

bilan
construction
d’un
site
variables
de
page
•
site
être
constituer
de
«
page
»
correspondre
à
«
main
».
•
page
gérer
variables
de
pages,
locales
globales.
•
variables
d’une
page
être
visibles
dans
autre
page.
•
page
pouvoir
échanger
information
par
variables
superglobales,
par
fichier
par
bd.
echanges
entre
page
•
page
appeler
autre
page,
pouvoir
fournir
de
l’information
dans
tableau
$_get
$_post.
•
page
pouvoir
lire
écrire
dans
tableau
$_session
qu’elle
aller
partager.
•
page
pouvoir
écrire
cookies
lire
cookies
dans
tableau
$_cookies.
•
page
pouvoir
lire
écrire
dans
fichier
qu’elles
pouvoir
partager.
•
page
pouvoir
lire
écrire
dans
base
de
donnée
qu’elles
pouvoir
partager.
•
page
pouvoir
lire
information
concerner
serveur
client
dans
tableau
$_env
$_server
base
php
–
environnement
de
développement
–
page
40/43

appel
d’une
page
pouvoir
appeler
page
de
3
façon
:
<
avoir
href=
«
url
»
>
dans
cas,
l’information
circuler
par
$_get
sur
l’url.
https://www.w3schools.com/tags/tag_a.asp
<
form
action=
«
url
»
method=
«
»
>
dans
cas,
l’information
circuler
par
$_get
$_post
selon
valeur
de
l’attribut
method
dans
balise
form
(get
post).
http://www.w3schools.com/tags/att_form_action.asp
header(‘location
:
url’)
dans
cas
l’information
circuler
par
$_get
sur
l’url.
http://php.net/manual/fr/function.header.php
base
php
–
environnement
de
développement
–
page
41/43

.htaccess
.htpasswd
présentation
fichier
.htaccess
.htpasswd
permettre
de
protéger
dossier
fichier
sur
site
web.
«
.
»
début
nom
faire
fichier
être
cacher
sur
os
linux.
https://openclassrooms.com/courses/concevez-votre-site-web-avec-php-et-mysql/proteger-undossier-avec-un-htaccess
http://www.siteduzero.com/tutoriel-3-14649-proteger-un-dossier-avec-un-htaccess.html
http://www.siteduzero.com/tutoriel-3-35126-le-htaccess-et-ses-fonctionnalites.html
sur
sécurité
site
web
par
exemple
:
https://legissa.ovh/internet-se-proteger-des-pirates-et-hackers.html
.htaccess
fichier
.htaccess
permettre
d’interdire
l’accès
à
dossier.
mettre
fichier
.htaccess
dans
dossier
concerné.
pouvoir
préciser
de
chose
dans
fichier.
minimum,
pour
bloquer
l’affichage
contenu
:
option
-
indexer
.htpasswd
fichier
.htpasswd
permettre
de
protéger
dossier
par
mot
de
passe.
être
associer
à
fichier
.htaccess
particulier
contenir
fichier
.htaccess
authname
"page
d'administration
protégée"
authtype
basic
authuserfile
"/c:/wamp/www/admin/.htpasswd"
require
valid-user
•
authname
être
texte
répondre
à
tentative
d’accès.
•
authuserfile
être
chemin
vers
fichier
.htpasswd.
chemin
pouvoir
être
absolu
relatif
selon
hébergeurs!
!en
local
:
absolu.
général
:
absolu.
pour
connaître
chemin
absoudre
d’un
fichier
:
<?php
echo
realpath('monfichier.php');
?>
contenir
fichier
.htpasswd
user1:password1
base
php
–
environnement
de
développement
–
page
42/43

user2:password2
sous
wamp
mot
de
passe
être
spécifé
en
clair
:
bertrand:motdepassebertrand
admin:motdepasseadmin
sur
serveur
en
ligne
mot
de
passe
devoir
être
crypté
:
bertrand:$1$meqt//cb$havid.qmmsgfw/wdlifq81
admin:$1$/lgp8dya$sqnxccp47khp1snerizoo0
ø
crypter
mot
de
passe
<?php
echo
crypt('monpasswd');
?>
base
php
–
environnement
de
développement
–
page
43/43

php
–
mysql
-
mvc
https://openclassrooms.com/courses/concevez-votre-site-web-avec-php-et-mysql/presentation-desbases-de-donnees-2
http://php.net/manual/fr/langref.php
open
class
room
sommaire
sommaire
......................................................................................................................................
1
php
-
mysql
.................................................................................................................................
4
installation
fichier
de
test
................................................................................................................
4
exemple
être
présenter
dans
chapitre
en
vert.
.............................................................................
4
exercice
à
faire
être
présenter
dans
chapitre
en
jaune.................................................................
4
utilisation
de
phpmyadmin
....................................................................................................................
4
oouvrir
phpmyadmin
.................................................................................................................................
4
créer
base
de
donnée
........................................................................................................................
4
créer
table
tuples
.......................................................................................................................
4
mettre
à
jour
colonne
bd
à
gauche
:
onglet
flèche
circulaire
verte
.................................................
5
afficher
contenu
de
table
utilisateur
..................................................................................................
5
exécuter
select
....................................................................................................................................
5
exporter
......................................................................................................................................................
5
importer
.....................................................................................................................................................
5
connexion
à
bd
print_r
contenu
d’une
table
...............................................................................
7
utilisation
de
base
de
donnée
en
php
....................................................................................................
7
connexion
à
bd
:
new
pdo
(exemple
1
–
connexion)
...........................................................................
7
code
........................................................................................................................................................................
7
explication
.............................................................................................................................................................
7
afficher
contenu
d’une
table
-1
:
query(),
fetch(),
print_r
(exemple
2
–
select)
...................................
8
exemple
..................................................................................................................................................................
8
explication
.............................................................................................................................................................
9
résultat
.................................................................................................................................................................
9
charger
exemple
1
2
testez-les.
............................................................................................................
10
vocabulaire
de
programmation
orienter
objet
......................................................................................
10
classe
........................................................................................................................................................
10
objet
.........................................................................................................................................................
10
méthode
...................................................................................................................................................
10
exceptions.................................................................................................................................................
10
guides
de
style
.........................................................................................................................................
10
gestion
requêtes.............................................................................................................................
11
technique
de
programmation
–
pdo
pdostatement
-
$bdd,
$requete,
$reqsql...............................
11
terminologie
:
$bdd
-
$reqsql
-
$requete
-
$ligne
..........................................................................................
11
$bdd
(pdo)
–
query
-
prepare
.............................................................................................................................
11
$requete
(pdostatement)
-
execute
-
fetch
-
closecurseur
............................................................................
11
synthèse
................................................................................................................................................................
11
accès
champs,
gestion
erreurs,
order
by,
like,
limit
(exemple
3
–
select
where)
........................
12
charger
bd
pour
pouvoir
tester
code
........................................................................................................
12
accéder
champ
.............................................................................................................................................
12
select
attribut1,
attribut2,
where,
order
by
........................................................................................................
12
select
…
like
..........................................................................................................................................................
12
select
…
order
by,
limit
.........................................................................................................................................
12
requête
variables
:
where
realisateur
=
?
(exemple
4
–
select
variable)
.............................................
13
php
–
mysql
–
mvc
-
page
1/34

solution
basique
à
éviter
:
risque
xss
...................................................................................................................
13
solution
avec
requête
préparer
:
where
?
,
prepare
execute
..........................................................................
13
remplacer
?
par
:alias
...............................................................................................................................
13
déboguer
:
or
die
bdd->errorinfo()
..........................................................................................................
14
créer
$bdd
avec
gestion
erreur
(déjà
vu)
..............................................................................................
14
aternative
:
exécuter
requête
(query
execute)
«
or
die
»
............................................................................
14
ajouter,
modifier,
supprimer
donnée
dans
table
(exemple
5
–
insert-update-delete)
...........
15
via
phpmyadmin
–
afficher
..................................................................................................................................
15
via
phpmyadmin
–
sql
........................................................................................................................................
15
via
php
-
insert
....................................................................................................................................................
15
via
php
–
delete
..................................................................................................................................................
15
via
php
–
update
.................................................................................................................................................
16
bon
usages...........................................................................................................................................................
16
tp
1
–
insert
update
delete
consultation.............................................................................................
16
tp
site
artiste
–
mvc
......................................................................................................................
17
exemple
6
:
etape
1
:
œuvres
–
tp
2
:
installez,
tester
regarder
code
...........
17
contenu
dossier
...............................................................................................................................................
17
installation
............................................................................................................................................................
17
tester
code
........................................................................................................................................................
17
tp3
:
etape
2
:
œuvres,
exposition
œuvres
exposer
–
gestion
basique
dans
html
.......................
18
1)
choisir
«
œuvres
»,
obtenir
être
page
d’accueil
:
.......................................................
18
2)
choisir
«
exposition
»
obtenir
:
............................................................................................
18
3)
cliquer
sur
exposition,
obtenir
liste
œuvres
exposer
:
.............................................
19
tp
4
:
etape
3
–
l’étape
2
avec
séparation
php
html
..........................................
20
problématique
d’organisation
de
base
:
fichier
pour
projet
................................................
21
question
à
poser
:
...........................................................................................................................................
21
schéma
de
synthèse
à
réaliser
..............................................................................................................................
21
mvc
............................................................................................................................................
22
problématique
:
fichiers,
dossier
pour
projet
............................................................
22
organisation
non-mvc
..........................................................................................................................
22
principe
d’organisation
non-mvc
...........................................................................................................
22
défaut
de
l’organisation
non-mvc
.........................................................................................................
22
présentation
mvc
............................................................................................................................
23
mvc
:
modèle
-
vue
-
contrôleur.
............................................................................................................
23
modèle
(sql)
.......................................................................................................................................
23
vue
(html)
..........................................................................................................................................
23
contrôleur
(php)
..................................................................................................................................
24
fonctionnement
global.............................................................................................................................
24
mvc
:
design
pattern
tête
premier
.....................................................................................................
25
organisation
répertoire
fichier
dans
mvc
......................................................................
26
organisation
de
répertoire
mvc
.............................................................................................................
26
fichier
«
modèle
»
.............................................................................................................................
26
fichier
«
contrôleur
»
........................................................................................................................
26
fichier
«
vue
»....................................................................................................................................
26
faire
contrôleur
=
contrôleur
global
=
routeur
=
indexswitch
.............................................................
27
problème
..............................................................................................................................................
27
solution
:
«
front
contrôleur
»
.........................................................................................................
27
fichier
indexswitch.html
:
routeur
...................................................................................................
27
principe
................................................................................................................................................................
27
exemple
................................................................................................................................................................
27
empty()
isset()
..................................................................................................................................................
28
include
entêter
pied
de
page
.............................................................................................................................
28
déconnexion
.........................................................................................................................................................
28
debug
....................................................................................................................................................................
28
variante
sans
switch
:
courte!
!.........................................................................................
28
php
–
mysql
–
mvc
-
page
2/34

le
fichier
index.html
.................................................................................................................................
29
mvc
–
exemple
7
:
site
artiste
v1-mvc
-
affichage
œuvres
-
tester
l’exemple
.............................
30
organisation
dossier
fichiers..................................................................................................
30
tp
site
artiste
mvc
...............................................................................................................................
31
tp-mvc-v2
:
site
artiste
v2
–
mvc
:
affichage
de
tables.........................................................
31
tp-mvc-v3
:
site
artiste
v3
–
mvc
:
administration
œuvres
............................................................
31
page
d’administration
œuvres
pouvoir
ressembler
à
:
........................................................................
31
connexion
administrateur
.......................................................................................................................
32
vérifier
login
......................................................................................................................................................
32
tp-mvc-v4
:
site
artiste
v4
–
mvc
:
administration
exposition
................................................
34
edition
:
mars
2019
php
–
mysql
–
mvc
-
page
3/34

php
-
mysql
php-mysql
:
https://openclassrooms.com/courses/concevez-votre-site-web-avec-php-et-mysql/presentation-desbases-de-donnees-2
manuel
de
référence
php
:
http://php.net/manual/fr/langref.php
manuel
de
référence
sql
:
http://www.w3schools.com/sql/
installation
fichier
de
test
exemple
cours
être
dans
fichier
zip
fournir
avec
l’article
cours
:
00-exemples-php-
mysql.zip
charger
fichier
mettez-le
dans
dossier
partie_4
répertoire
web
«
www
»
serveur
wamp.
exemple
être
présenter
dans
chapitre
en
vert.
exercice
à
faire
être
présenter
dans
chapitre
en
jaune.
utilisation
de
phpmyadmin
oouvrir
phpmyadmin
icône
wamp
/
bouton
droit
/
phpmyadmin
créer
base
de
données
onglet
base
de
donnée
dans
champ
«
nom
de
base
de
donnée
»
saisir
:
«
bd_utilisateur
»
venir
de
créer
bd_utilisateur.
apparaître
dans
navigateur
à
gauche.
créer
table
tuples
aller
dans
l’onget
sql.
aller
créer
table
suivante
avec
tuples
associer
(fichier
bd_utilisateur.sql
de
l’exercice
create
table
utilisateur
(
id
int(11)
primary
key
auto_increment,
prenomnom
varchar(20)
not
null,
admail
varchar(20)
not
null,
motdepasse
varchar(20)
not
null,
php
–
mysql
–
mvc
-
page
4/34

annee
int(4)
not
null
)
engine=innodb;
insert
into
utilisateur
valoir
(null,
'sia
pei',
'ji@gmail.com','jipei',
1995);
insert
into
utilisateur
valoir
(null,
'yawei
cai',
'jawei@yahoo.com','yaweicai',1996);
insert
into
utilisateur
valoir
(null,
'zikeng
peng',
'zikeng@china.com','zikeng',1994);
insert
into
utilisateur
valoir
(null,
'jiawen
li',
'jiawen@orange.fr','jiawen',1995);
insert
into
utilisateur
value
(null,
'xiaoyu
liu',
'xiowyu@gmail.fr','liu',1996);
insert
into
utilisateur
valoir
(null,
'olivier
tran','tran@gmailcom','olivier',1997);
coller
code
dans
zone
de
saisie
sql
exécuter.
table
être
créer
avec
tuples.
mettre
à
jour
colonne
bd
à
gauche
:
onglet
flèche
circulaire
verte
cliquer
sur
flèche
circulaire
verte
pour
mettre
à
jour
colonne
bd.
pouvoir
ouvrir
bd
«
bd_utilisateur
».
voir
apparaître
table
«
utilisateur
».
afficher
contenu
de
table
utilisateur
en
cliquer
sur
table
dans
colonne
bd,
voir
apparaître
liste
tuples.
exécuter
select
en
aller
dans
l’onglet
sql,
pouvoir
saisir
requête.
par
exemple
:
select
*
from
`utilisateur`
where
id
=
3
exporter
pouvoir
exporter
bd
dans
différents
format
:
sql
:
ca
générer
script
sql
permettre
de
reconstituer
bd
à
l’identique,
sauvegarde.
exporter
bd
générer
regarder
script.
csv
:
ca
générer
fichier
texte
qu’on
pouvoir
importer
sur
excel.
exporter
bd
en
format
csv
importer
fichier
csv
dans
excel.
importer
commencer
par
créer
bd.
ensuite,
pouvoir
importer
contenu
de
bd
dans
différents
format
:
sql
:
choisir
fichier
à
importer.
c’est
fichier
avec
code
sql
(du
ddl
dml
:
create
table
insert
into).
par
exemple,
c’est
fichier
exporter
de
sauvegarde.
php
–
mysql
–
mvc
-
page
5/34

csv
:
pouvoir
importer
fichier
excel
avoir
être
enregistrer
format
csv.
falloir
préciser
séparateur
de
colonne
(plutôt
«
;
»
en
csv)
préciser
colonne
avoir
premier
ligne
avec
nom
de
colonne.
pouvoir
dire
de
s’arrêter
en
cas
d’erreur
d’insert.
falloir
ajouter
contrainte
d’intégrité
dans
table.
mettre
clé
primaires
étrangères
donner
nom
à
table.
php
–
mysql
–
mvc
-
page
6/34

connexion
à
bd
print_r
contenu
d’une
table
utilisation
de
base
de
donnée
en
php
3
jeu
de
fonction
(api)
permettre
de
connecter
à
bd
de
l’utiliser
:
mysql,
mysqli
pdo
:
http://php.net/manual/fr/mysqlinfo.api.choosing.php
jeu
mysql
être
ancien
:
valoir
l’éviter.
pouvoir
utiliser
mysqli
pdo
(php
dater
object),
pdo_mysql.
l’intérêt
pdo
être
c’est
interface
d’abstraction
permettre
l’utilisation
de
n’importe
bd.
de
être
«
orienter
objet
».
utiliser
pdo_mysql
http://php.net/manual/en/ref.pdo-mysql.php
connexion
à
bd
:
new
pdo
(exemple
1
–
connexion)
coder
<?php
function
connexionbd($dbname){
//
paramètre
de
base
de
donnée
$sgbdname='mysql';
$host='localhost';
$charset='utf8';
//
dsn
:
dater
source
name
$dsn
=
$sgbdname
.
':host='.$host
.
';dbname='.$dbname
.
';charset='.$charset;
//
utilisateur
connecter
à
base
de
donnée
$username
=
'root';
$password
=
'root';
//
pour
avoir
erreur
sql
claires
$erreur
=
array(pdo::attr_errmode
=>
pdo::errmode_exception);
try
{
//
connexion
à
bd
:
new
pdo
$bdd
=
new
pdo($dsn,
$username,
$password,
$erreur);
echo'<p>connexion
réussie</p>';
return
$bdd;
}
catch
(pdoexception
$e)
{
echo
'connexion
échouer
:
'
.
$e->getmessage();
return
null;
//
die
('connexion
échouer
:
'
.
$e->getmessage()
);
}
}
?>
explication
ø
faire
new
pdo
avec
4
paramètre
pdo
être
classe.
créer
nouvel
objet
de
classe
qu’on
appeler
$bdd.
http://php.net/manual/fr/pdo.construct.php
new
pdo
à
4
paramètre
:
php
–
mysql
–
mvc
-
page
7/34

•
$dsn
(data
source
name)
:
contenir
infos
sur
sgbd
(mysql),
serveur
(host,
:
localhost),
nom
de
bd,
jeu
de
caractère
utiliser
(utf8
être
générique).
•
$username
:
nom
de
l’utilisateur
connecter
à
bd.
•
$password
:
password
de
l’utilisateur
connecter
à
bd.
•
$erreur
:
pour
gérer
message
d’erreur.
ø
utiliser
variables
pour
rendre
code
générique
utiliser
variables
pour
rendre
code
générique
:
•
$host
:
machine
serveur
de
sgbd,
•
$sgbdname
:
type
de
sgbd,
•
$username
:
nom
de
l’utilisateur
connecter
sur
bd,
•
$password
:
mot
de
passe
de
utilisateur,
•
$dbname
:
nom
de
bd
à
accéder
sur
sgbd.
ø
$erreur
:
gestion
erreur
$erreur
=
array(pdo::attr_errmode
=>
pdo::errmode_exception);
en
ajouter
paramètre
$erreur
qu’il
être
dans
new
pdo,
avoir
message
d’erreurs
sgbd,
par
exemple
select
être
écrit.
syntaxe
:
pdo
::attr_errmode
pdo::errmode_exception
être
constante
de
classe
définir
dans
classe
pdo.
avoir
syntaxe
:
array
(clé
=>valeur)
permettre
de
définir
couple
clé-valeur
dans
tableau.
pdo
::attr_errmode
:
http://php.net/manual/fr/pdo.constants.php
pdo::errmode_exception
:
http://php.net/manual/fr/pdo.error-handling.php
ø
gestion
erreur
avec
try
catch
structure
«
try
»
«
catch
»
être
structure
de
programmation
objet
pour
gérer
erreurs.
die
permettre
d’arrêter
l’exécution
de
page
en
cas
d’erreur.
afficher
contenu
d’une
table
-1
:
query(),
fetch(),
print_r
(exemple
2
–
select)
exemple
//
écrire
requête
$reqsql='select
*
from
utilisateur';
//
récupérer
résultat
$requete=$bdd->query($reqsql);
echo
'<pre>';
print_r($requete);
echo
'</pre>';
//
afficher
résultat
ligner
par
ligne
while($ligne=$requete->fetch()){
echo
'<pre>';
print_r($ligne);
echo
'</pre>';
echo
'<p>
nombrer
d’éléments
de
$ligne
:
'
.sizeof($ligne).
'</p>';
}
//
libérer
table
de
requête
$requete->closecursor();
//
pour
finir
traitement
php
–
mysql
–
mvc
-
page
8/34

explications
•
écrire
select
dans
$reqsql
•
utiliser
méthode
(fonction)
query
de
$bdd
(->)
en
passer
$reqsql
en
paramètre.
•
résultat
être
dans
$requete
:
c’est
objet
complexe
sur
pouvoir
appliquer
méthode
(des
fonctions)
contenir
tableau
de
donnée
select.
•
afficher
qu’on
pouvoir
de
réponse
:
en
l’occurrence
seule
requête
s’affiche.
•
passer
ligne
de
réponse
en
revue
avec
méthode
fetch().
•
$ligne
retourner
par
fetch
être
tableau
associatif
:
pouvoir
faire
print_r
de
$ligne.
•
constater
qu’on
avoir
deux
accès
possible
à
donnée
:
par
nom
champ
(id
par
exemple)
par
numéro
(0
pour
id)
:
avoir
2
fois
d’éléments
prévoir
dans
ligne
•
avoir
finir
de
travailler,
faire
closecursor,
pour
libérer
table
de
requête
résultat
connexion
réussir
debut
<
pre
>
print_r($requete);
<
/pre
>
pdostatement
object
(
[querystring]
=>
select
*
from
utilisateur
)
while($ligne=$requete->fetch()){
array
(
[id]
=>
1
[0]
=>
1
[prenomnom]
=>
sia
pei
[1]
=>
sia
pei
[admail]
=>
ji@gmail.com
[2]
=>
ji@gmail.com
[motdepasse]
=>
jipei
[3]
=>
jipei
[annee]
=>
1995
[4]
=>
1995
)
nombre
d’éléments
de
$ligne
:
10
array
(
[id]
=>
2
[0]
=>
2
[prenomnom]
=>
yawei
cai
[1]
=>
yawei
cai
[admail]
=>
jawei@yahoo.com
[2]
=>
jawei@yahoo.com
[motdepasse]
=>
yaweicai
[3]
=>
yaweicai
[annee]
=>
1996
[4]
=>
1996
)
nombre
d’éléments
de
$ligne
:
10
php
–
mysql
–
mvc
-
page
9/34

chargez
exemple
1
2
testez-les.
vocabulaire
de
programmation
orienter
objet
classer
classe,
c’est
type,
entier,
un
réel,
caractère,
string
booléen.
en
général,
classe
correspondre
à
l’équivalent
d’un
tableau
associatif
:
contenir
couple
de
clé-valeur.
différentes
clé
être
appeler
«
attribut
».
en
plus,
associer
fonction
à
classe
:
appeler
«
méthode
».
objet
objet
c’est
variable
de
type
classe.
créer
objet
avec
valeur
pour
couple
clé-valeur
(pour
attributs),
dire
qu’on
instancie
objet.
ca
passer
par
commande
«
new
».
méthode
méthode
être
fonction
être
attacher
à
un
classe.
être
utilisables
par
objet
de
classe.
écrire
:
objet->methode()
pour
appeler
méthode
pour
l’objet
en
question
:
c’est
avoir
passer
l’objet
en
paramètre
de
méthode.
exception
en
cas
d’erreur,
en
programmation
objet
passer
par
objet
de
classe
exception.
ca
faire
avec
«
try
»
«
catch
»
try
:
essayer
d’exécuter
suite
d’instruction
catch
:
suite
d’instructions
exécuter
à
générer
erreur
sous
forme
d’une
exception,
passer
dans
bloc
catch
catch
préciser
nom
de
l’objet
exception
qu’on
aller
traiter.
pouvoir
accéder
à
information
par
méthode
getmessage()
par
exemple.
guides
de
style
https://fr.wikipedia.org/wiki/camelcase
https://eilgin.github.io/php-the-right-way/#code_style_guide
php
–
mysql
–
mvc
-
page
10/34

gestion
requête
technique
de
programmation
–
pdo
pdostatement
-
$bdd,
$requete,
$reqsql
pour
manipuler
bd,
utiliser
deux
classe
:
pdo
pdostatemenet
terminologie
:
$bdd
-
$reqsql
-
$requete
-
$ligne
•
$bdd
:
objet
de
classe
pdo
être
appeler
$bdd.
c’est
en
sorte
l’objet
permettre
l’accès
concret
à
base
de
données,
pour
utilisateur
base
de
donnée.
•
$reqsql
:
texte
de
requête
être
mettre
dans
$reqsql.
c’est
simple
chaine
de
caractères.
devoir
être
confondre
avec
résultat
de
requête
:
$requete.
•
$requete
:
objet
de
classe
psostatement
être
appeler
$requete
(statement
pouvoir
vouloir
dire
«
requête
».
$requete
être
objet
complexe
contenir
à
fois
$reqsql
résultat
de
requête
fois
celle-ci
exécutée.
•
$ligne
:
résultat
d’un
fetch()
être
ligne
:
$ligne
=$requete->fetch().
c’est
tuple
de
table
résulter
de
requête
sql.
$bdd
(pdo)
–
query
-
prepare
http://php.net/manual/fr/class.pdo.php
pdo
contenir
méthode
(il
contenir
d’attributs).
noter
:
•
query
:
renvoyer
$requete
être
associer
$reqsql
passer
en
paramètre
résultat
de
requête
(le
résultat
select)
prêt
à
être
fetché
(prêt
à
être
parcouru).
•
prepare
:
renvoyer
$requete
être
associer
$reqsql
passer
en
paramètre.
requête
n’a
être
exécutée.
pouvoir
contenir
variables.
pdo
contenir
méthode
propres
à
un
bd
gestion
transaction
:
commit,
rollback,
etc.,
d’autres
choses.
$requete
(pdostatement)
-
execute
-
fetch
-
closecurseur
http://php.net/manual/fr/class.pdostatement.php
pdostatement
contenir
attribut
:
valeur
$ressql
fournir
en
paramètre
avoir
être
créé.
contenir
méthodes.
noter
:
•
execute
:
permettre
d’exécuter
un
requête
avec
variables.
falloir
fournir
en
paramètre
tableau
de
valeur
pour
variables.
•
fetch
:
permettre
de
récupérer
ligne
résultat
de
requête,
un
par
une.
•
fetchall
:
permettre
de
récupérer
ligne
résultat
de
requête,
dans
tableau.
•
closecurseur
:
permettre
de
refaire
execute.
synthèse
$bdd
:
pdo
$requete
:
pdostatement
->
query($reqsql)
:
pdostatement
->
fetch()
:
ligner
->
prepare($reqsql)
:
pdostatement
->
exectute()
:
bool
->
closecursor()
:
bool
->
fetchall()
:
ligne
php
–
mysql
–
mvc
-
page
11/34

accès
champs,
gestion
erreurs,
order
by,
like,
limit
(exemple
3
–
select
where)
charger
bd
pour
pouvoir
tester
code
pour
tester
codes,
falloir
charger
bd
en
d’installer
code
dans
répertoire
serveur
web.
accéder
champ
$ligne
être
tableau
associatif.
pouvoir
écrire
:
echo
'<p><strong>
prenom
nom
</strong></p>';
while($ligne=$requete->fetch()){
echo
'<p>'
.$ligne[prenom].
'
'
.$ligne[nom].
'</p>';
}
select
attribut1,
attribut2,
where,
order
by
$reqsql='
select
realistateur,
titre,
annee
from
film
where
realisateur
=
'\king
vidor\'
order
by
annee
';
//
precise
3
champ
:
realisateur,
titre
annee
//
attention
\'
//
trier
par
annee
select
…
like
$reqsql='
select
*
from
film
where
realisateur
like
\'%manki%\'
order
by
realisateur,
annee
';
//
like
%
manki
%
:
n’importe
de
manki
//
order
by
realisateur,
annee
:
realisateurs
possibles
//
dans
resultat
:
j’ordonne
résultat
select
…
order
by,
limit
$reqsql='
select
realistateur,
titre,
annee
from
film
where
annee
=
1960
order
by
annee
limit
0,
10
')
;
//
prendre
10
premier
(de
1
à
10)
//
limit
10,
10
pour
10
suivants
//
limite
20,
10
pour
10
suivants,
etc.
php
–
mysql
–
mvc
-
page
12/34

requêtes
variables
:
where
realisateur
=
?
(exemple
4
–
select
variable)
objectif
:
mettre
variable
dans
requête
(par
exemple,
information
saisir
par
l’utilisateur)
solution
basique
à
éviter
:
risque
xss
pouvoir
mettre
$_get
dans
$reqsql
:
$reqsql='select…
where
auteur=\''
.$_get['realisateur'].
'\'')
;
a
éviter!!!
!!!si
$_get
contenir
‘toto
\'
\'a\'=\'a,
select
renvoyer
table!
!
solution
avec
requête
préparer
:
where
?
,
prepare
execute
$reqsql='select…
where
realisateur
=
?;
$requete=$bdd->prepare($reqsql)
$requete->execute(array(
$_get['realisateur']
));
séparer
argument
par
«
,
»
dans
array
remplacer
?
par
:alias
solution
être
lisible
qu’on
aller
privilégier.
$reqsql='select…
where
realisateur=
:realisateur;
$requete=$bdd->prepare($reqsql)
$requete->execute(array(
'realisateur'=>
$_get['realisateur']
));
php
–
mysql
–
mvc
-
page
13/34

déboguer
:
or
die
bdd->errorinfo()
créer
$bdd
avec
gestion
erreur
(déjà
vu)
pour
afficher
détail
d’une
erreur,
créer
$bdd
avec
gestion
erreur
:
$erreur
=
array(pdo::attr_errmode
=>
pdo::errmode_exception);
$bdd
=
new
pdo($dsn,
$username,
$password,
$erreur);
c’est
suffire
pour
obtenir
message
d’erreur
propres.
aternative
:
exécuter
requête
(query
execute)
«
or
die
»
n’utilise
$erreur
dans
new
pdo,
pouvoir
ajouter
«
or
die
»
query
execute
pour
afficher
détail
d’une
erreur.
c
$requete=$bdd->query($reqsql)
or
die(print-r($bdd>errorinfo()))
;
$requete->execute(array(
…
))
die(print-r($bdd>errorinfo()))
;
«
or
die
»
être
inutile
avec
connexion
pdo
en
errmode.
«
or
die
»
s’utilise
travailler
avec
jeu
«
mysql
»
de
fonction
fonction
mysql_connect(…).
http://php.net/manual/fr/pdo.errorinfo.php
ø
limite
«
or
die
»
:
confidentialité
user
friendly
«
or
die
»
pouvoir
être
pratique
en
phase
de
développement.
en
production,
mettre
jour
information
pouvoir
être
confidentielles
n’est
userfriendly.
http://www.alsacreations.com/tuto/lire/676-gestion-erreurs-mysql-php-or-die.html
php
–
mysql
–
mvc
-
page
14/34

ajouter,
modifier,
supprimer
donnée
dans
table
(exemple
5
–
insert-update-delete)
via
phpmyadmin
–
afficher
interface
graphique
via
phpmyadmin
–
sql
pouvoir
entrer
commande
sql
:
insert,
update
delete.
système
proposer
pré-remplissage
commandes.
via
php
-
insert
pouvoir
entrer
commande
sql
:
insert,
update
delete.
$reqsql='
insert
into
film
(titre,
realisateur,
annee)
valoir
(:titre,
:realisateur,
:annee)
';
//exemple('l\'homme
irrationnel','woody
allen','2015');
$requete=$bdd->prepare($reqsql)
$resultat=$req->
execute(array(
'titre'=>$_get['titre'],
'realisateur'=>$_get['realisateur'],
'annee'=>$_get['annee']
));
//
or
die(print-r($bdd->errorinfo()))
;
/*
or
die
être
inutile
avec
connexion
en
errmode
*/
/*
$resultat
pour
traiter
erreur
proprement,
sans
errmode
*/
via
php
–
delete
$reqsql='
delete
from
film
where
titre
=
:titre
and
realisateur
=
:realisateur'
;
$requete=$bdd->prepare($reqsql);
$resultat=$requete->execute(array(
'titre'=>$_get['titre'],
'realisateur'=>$_get['realisateur']
));
/*
pour
tester
résultat
:
0
de
delete
*/
if($requete->rowcount()
){
//
rowcount
compter
nombre
de
delete
echo
'<br/>delete
effectuer
'
.$requete->rowcount().
'
fois';
}
else
{
echo
'<br/>
delete
avoir
échoué';
}
rowcount
permettre
de
savoir
de
delete
être
effectués.
http://www.astuces-webmaster.ch/page/mysql-pdo
php
–
mysql
–
mvc
-
page
15/34

ø
attention
delete!!
!!
attention
delete
:
donnée
être
supprimée,
pouvoir
récupérer
être
en
mode
validation
(autocommit)
être
fréquent!
!
falloir
faire
vérifications,
par
exemple
:
if
(!
!isset($_get['realisateur'])
or!
!isset($_get['titre'])
$_get['realisateur']==''
or
$_get['titre']=='')
{
echo
'<br/>
n\'avez
saisir
paramètres';
}
via
php
–
update
$reqsql='
update
film
set
duree=:duree
where
titre
=
:titre
and
realisateur
=
:realisateur
';
ø
attention
à
l’update!!
!!
attention
à
l’update
:
donnée
être
modifiée,
pouvoir
récupérer
être
en
mode
validation
(autocommit)
être
fréquent!
!
bons
usage
a
place
de
:
'titre'=>$_get['titre']
avoir
'titre'=>$titre
variables
$titre,
$realisateur,
etc.
être
récupérer
via
$_post
$_get.
tp
1
–
insert
update
delete
consultation
travailler
avec
base
cinema.
1.
changer
paramètre
de
connexion
un
par
un
pour
voir
message
d’erreur
correspondant.
ajouter
film.
vérifier
qu’il
être
présent
dans
bd
en
utiliser
script
de
consultation.
@ord@
supprimer
film
venir
d’ajouter.
vérifier
qu’il
être
absent
dans
bd
en
utiliser
script
de
consultation.
4.
rajouter
film.
vérifier
qu’il
être
présent
dans
bd
en
utiliser
script
de
consultation.
5.
modifier
l’année
film
venir
de
rajouter.
vérifier
modification
avoir
être
faire
dans
bd
en
utiliser
script
de
consultation.
php
–
mysql
–
mvc
-
page
16/34

tp
site
artiste
–
mvc
exemple
6
:
etape
1
:
œuvres
–
tp
2
:
installez,
tester
regarder
code
contenir
dossier
dossier
de
l’exemple
6
contenir
:
code
de
bd
:
bd_artiste.sql
dossier
d’images.
fichier
de
connexion
à
bd.
page
pour
l’affichage
œuvres.
installation
installer
bd
sur
wamp.
parcourir
contenu
de
bd
pour
comprendre.
regarder
page
d’affichage
œuvres
:
indexoeuvres.php
tester
code
obtenir
l’affichage
suivre
:
php
–
mysql
–
mvc
-
page
17/34

tp3
:
etape
2
:
œuvres,
exposition
œuvres
exposer
–
gestion
basique
dans
html
vouloir
pouvoir
afficher
exposition
œuvres
exposées.
considérer
«
site
artiste
»
«
nav
»
être
dans
header
html.
1)
choisir
«
œuvres
»,
obtenir
être
page
d’accueil
:
2)
choisir
«
exposition
»
obtenir
:
php
–
mysql
–
mvc
-
page
18/34

3)
cliquer
sur
exposition,
obtenir
liste
œuvres
exposer
:
php
–
mysql
–
mvc
-
page
19/34

tp
4
:
etape
3
–
l’étape
2
avec
séparation
php
html
aller
organiser
code
en
séparer
maximum
code
php
code
html.
pour
ça,
aller
utiliser
fonction
fetchall()
:
$lesoeuvres=$requete->fetchall();
ainsi,
récupérer
tableau
complet
œuvres
issu
select.
pouvoir
parcourir
tableau
dans
php
avec
classique
«
foreach
»
:
foreach($lesoeuvres
avoir
$ligne){
echo
'<h3>['
.$ligne['id'].
']
:
'
.$ligne['titre'].
'
-
'
.$ligne['annee'].
'
-
'
.$ligne['prix'].'
euros</h3>';
etc.
}
php
–
mysql
–
mvc
-
page
20/34

problématique
d’organisation
de
base
:
fichier
pour
projet
but
être
d’afficher
œuvres,
exposition
œuvres
exposées.
question
à
poser
:
fichier
dois-je
créer
?
avoir
1
fichier
par
page.
circule-t-on
de
page
en
page
?
a-t-il
élément
commun
côté
html
?
côté
html,
header
être
partagé.
a-t-il
de
élément
commun
côté
php
?
côté
php,
connexion
à
bd
être
partagée.
schéma
de
synthèse
à
réaliser
php
–
mysql
–
mvc
-
page
21/34

mvc
https://openclassrooms.com/courses/votre-site-php-presque-complet-architecture-mvc-et-bonnespratiques/avant-propos-comment-fonctionne-ce-tutoriel
https://openclassrooms.com/courses/adopter-un-style-de-programmation-clair-avec-le-modele-mvc
problématique
:
fichiers,
dossier
pour
projet
mvc
s’intéresse
à
problématique
d’organisation
fichier
répertoires.
a
noter
problème
suivants
:
•
•
•
•
•
dossier
dois-je
créer
?
dois-je
organiser
fichier
?
passe-t-on
d’un
fichier
à
autre
?
être
inclusion
à
envisager
?
a-t-il
besoin
d'un
dossier
admin
?
organisation
non-mvc
principe
d’organisation
non-mvc
aller
avoir
page
php
par
page
de
site.
page
c’est
«
main
»
recevoir
paramètre
($_get,
$_post).
liste
paramètre
être
variable
selon
l’entrée
(un
href,
autre
href,
formulaire
de
saisie,
autre,
un
header).
avoir
variables
globales
partager
par
page
dans
$_session.
page
réagir
en
fonction
paramètre
qu’elle
reçoit.
selon
cas,
faire
en
totalité
en
partie
:
•
récupérer
contenu
de
$_get,
$_post,
$_session
•
mettre
à
jour
$_session
•
inclure
fichier
:
header,
footer,
connexion
à
bd,
etc.
•
gérer
donnée
de
bd
:
insert,
update,
delete
select
associé
nécessaire.
•
construction
de
page
html
à
afficher
(et
select
associé
nécessaire)
défaut
de
l’organisation
non-mvc
•
être
mélanger
:
sql,
php
html,
séparer
php
html.
•
page
pouvoir
devenir
grosses.
•
maintenance
n’est
facile.
•
travail
à
être
rendre
difficile.
php
–
mysql
–
mvc
-
page
22/34

présentation
mvc
mvc
:
modèle
-
vue
-
contrôleur.
l’architecture
mvc
séparer
logique
code
en
trois
parties,
trois
ensemble
de
fichier
:
•
modèle
(qui
correspondre
sql)
•
vue
(qui
correspondre
html)
•
contrôleur
(qui
correspondre
php
faire
lien
entre
deux
précédent).
rendre
code
facile
à
mettre
à
jour
permettre
d’organiser
travail
en
3
partie
de
travailler
en
parallèle.
l’architecture
mvc
être
bonne
pratique
de
programmation.
connaissance
de
l’architecture
mvc
rendre
capable
de
créer
site
web
de
qualité
facile
à
maintenir.
en
pratique,
architecture
mvc
mettre
en
œuvre
s’appuient
sur
théorie
l’adaptent
de
façon
pragmatique.
avoir
façon
de
mettre
œuvre
mvc.
principaux
framework
être
développer
en
mvc
:
codeigniter,
cakephp,
symfony,
jelix,
zend
framework,
etc.
modèle
(sql)
modèle
gérer
donnée
site.
accès
à
bd.
gestion
de
fichiers.
proposer
fonction
pour
faire
insert,
update,
delete,
select.
fonction
pouvoir
renvoyer
tableau
de
données.
résultat
être
exploiter
par
contrôleur
par
html.
c’est
page
pur
php.
l’idée
générale
être
dans
application,
base
de
donnée
être
centrale.
bd
être
conçue,
l’application
être
facile
à
maintenir
à
faire
évoluer.
bd
être
conçue,
l’application
être
complexe
à
maintenir.
vue
(html)
vue
afficher
page
html.
récupérer
variables
contrôleur
et/ou
modèle
pour
savoir
qu’elles
devoir
afficher.
c’est
page
html
avec
boucle
condition
php
simples,
pour
afficher
tableau
de
donnée
issus
modèle.
vue
contenir
doctype.
pouvoir
fonctionner
qu’avec
contexte
contrôleur.
php
–
mysql
–
mvc
-
page
23/34

le
contrôleur
(php)
contrôleur
être
page
appelée
(le
véritable
index,
dit,
«
main
»).
fonctionner
en
trois
étape
:
utiliser
fonction
modèle
(include
appel
fonctions).
@ord@
analyser
traiter
donnée
issues
modèle
passée
en
paramètre
à
l’appel
de
page
($_get,
$_post,
$_session).
déterminer
par
exemple
visiteur
avoir
droit
de
voir
page
non.
3.
en
fonction
de
calculs,
appeler
vue
correspondante
par
include.
c’est
page
pur
php.
contrôleur
être
«
chef
d’orchestre
»
:
récupérer
demande
de
l’utilisateur
à
travers
vue
(la
page
html)
par
href,
formulaire
header.
échanger
donnée
avec
modèle,
faire
calcul
(qui
pouvoir
être
complexes)
choisir
vue
à
afficher
en
fournir
variables.
rôle
contrôleur
pouvoir
limiter
à
faire
lien
entre
modèle
vue
:
de
colle!
!
fonctionnement
global
utilisateur,
à
travers
vue,
faire
appel
à
page
:
contrôleur
(par
href
formulaire).
contrôleur
«
include
»
modèle
utiliser
fonction
modèle.
faire
calculs.
selon
résultats,
include
vue
autre
à
afficher
à
l’utilisateur.
de
suite.
php
–
mysql
–
mvc
-
page
24/34

mvc
:
design
pattern
tête
premier
car
l’modèle
-
être
essentiel
vue
-
être
magnifique
j’suis
p’têt
feindre
-
oui
c’est
fou
ligne
de
code
-
être
d’la
colle
c’code
n’fait
rien
-
d’vraiment
magique
n’fait
qu’transmettre
-
valeur
colle,
c’est
contrôleur.
dire
mcv
être
design
pattern
(dp).
c’est
en
réalité
assemblage
de
dp
élémentaires
(un
par
lettre)
:
dp
«
stratégie
»,
«
composite
»
«
observateur
»
(les
dp
avoir
noms).
coder
dp,
avoir
mise
à
jour
automatique
notification
(dp
observateur).
php
–
mysql
–
mvc
-
page
25/34

organisation
répertoire
fichier
dans
mvc
organisation
de
répertoire
mvc
à
racine
site,
créer
3
répertoire
:
•
modele
•
voir
•
controleur
dans
de
répertoires,
créer
sous-répertoire
par
«
module
»
site
(par
exemple
:
forum,
blog,
chat,
admin,
etc.).
fichier
«
modèle
»
modèle
être
fichier
php
contenir
appel
à
bd
renvoyer
par
exemple
tableau
résultat
(fetchall()
fetch()
un
par
un).
fichier
php
n’aura
de
balise
fermante
(
?>)
:
éviter
problèmes!
!
l’objet
bdd
être
déclarer
en
global
pour
avoir
à
refaire
connexion
à
opération.
dans
l’idéal,
falloir
utiliser
dp
singleton
permettre
de
recréer
objet
s’il
n’a
être
créé.
dans
sous-repertoire
de
module,
créer
fichier
par
fonction
avoir
nom
de
fonction.
faire
include
fichier
appel
à
fonction.
fichier
«
contrôleur
»
contrôleur
être
fichier
php.
inclure
modèle
début
(include_once
pour
éviter
de
l’inclure
fois).
a
fin
inclure
vue.
dit,
en
réalité
contenir
code,
séparer
code
en
3
partie
(modèle,
contrôle,
vue)
partie
être
dans
propre
fichier.
contrôleur
faire
calcul
avant
l’appel
de
vue.
demander
fichier
dans
barre
d'adresse,
c’est
contrôleur
qu’on
appelle.
fichier
«
voir
»
vue
être
fichier
html
faire
simple
affichage
jeu
de
donnée
fournir
par
contrôleur.
pouvoir
avoir
boucle
php
parcourir
tableau
test
pour
choisir
qu’on
vouloir
afficher.
avoir
fichier
voir
par
page
utilisateur.
php
–
mysql
–
mvc
-
page
26/34

le
faire
contrôleur
=
contrôleur
global
=
routeur
=
indexswitch
problème
avec
l’organisation
précédente,
avoir
«
main
»
par
page
(par
contrôleur).
problème
majeur
aller
être
de
faire
lien
entre
page
:
en
effet,
href
partir
d’une
pager
(un
contrôleur)
pour
aller
à
autre
page
(un
autre
contrôleur).
problème
être
obliger
à
parcourir
l’arborescence
fichier
avec
href
type
:
href=
«../admin/pageadmin.php
»
avoir
href
dans
fichier
«
includé
»,
être
de
même.
avec
tel
organisation,
risquer
d’avoir
problème
de
«
routage
»
(trouver
route
pour
page
à
ouvrir)
complexe.
changer
structure
fichier
répertoires,
changer
nom
d’un
répertoire,
falloir
retrouver
href
être
référence
à
répertoire
pour
mettre
à
jour
:
c’est
long
pénible!
!
solution
:
«
front
contrôleur
»
doter
d’un
contrôleur
global
permettre
l’entrée
dans
site
permettre
de
choisir
contrôleur
à
appeler
page
à
afficher.
c’est
«
front
contrôleur
»
«
routeur
».
retrouver
terme
de
«
routeur
»
dans
frameworks.
autres
contrôleur
être
appeler
backcontoller.
rôle
«
front
contrôleur
»
être
de
déterminer
contrôleur
appeler
de
faire
initialisation
générales
(connexion
à
bd,
affichage
d’en-tête
de
pied
de
page,
etc.).
fichier
index.html
appeler
routeur
avec
route
particulière,
c’est-à-dire
contrôleur
particulier,
page
particulière
à
afficher.
ainsi,
aller
centraliser
problème
«
routage
»
:
changer
nom
de
répertoire,
falloir
faire
modification
dans
«
front-contrôleur
».
fichier
indexswitch.html
:
routeur
principe
indexswitch
être
front
contrôleur
choisir
contrôleur
à
exécuter.
front
controleur,
c’est
qu’on
appeler
«
routeur
»
dans
framework
php.
regarder
index
être
setté
pour
savoir
contrôleur
appeler.
tester
sur
$_get
$_post
pouvoir
venir
d’un
header,
d’un
href
d’un
formulaire.
exemple
<?php
session_start();//on
démarrer
session
include('modele/connexion_sql.php');
//
connexion
à
bd
include
'vues/entete.php';
//html
de
l’entête
site
//
grand
switch
d'accès
page
//
elseif
if
(
isset($_get['indexoeuvres'])
or
isset($_post['indexoeuvres'])
){
php
–
mysql
–
mvc
-
page
27/34

include('controleur/public/'indexoeuvres'.php');
}
elseif
(
isset($_get['indexexpositions'])
or
isset($_post['indexexpositions'])
){
include('controleur/public/'indexexpositions'.php');
}
//etc.
empty()
isset()
c’est
même
chose.
empty()
être
vrai
défini,
=0
=null.
isset()
être
faux
défini.
http://php.net/manual/fr/function.empty.php
include
entêter
pied
de
page
pouvoir
faire
include
d’entête
de
pied
de
page
dans
front
contrôleur
être
même
pour
page
déconnexion
pour
libérer
bd.
en
pdo,
déconnexion
n’est
utile
avoir
faire
clore
cursor
include('modele/deconnexion_sql.php');
//
deconnexion
à
bd
debug
afficher
$_
session,
post
get
suivre
passer
pour
page.
n’a
besoin
nom
fichier
c’est
même
:
front
controleur!
!
pouvoir
mettre
dans
test
:
ainsi,
suffire
de
passer
debut
à
0
pour
arrêter
l’affichage
superglogabes.
$debug=1;
if($debug==1){
print_r($_session);echo'<br/>';
echo'post
:
';
print_r($_post);echo'<br/>';
echo'get
:
';
print_r($_get);echo'<br/>';
}
variante
sans
switch
:
courte!
!
$_get
$_post
arriver
dans
front
controleur
pouvoir
contenir
nom
contrôleur
qu’on
vouloir
appeler
(avec
chemin).par
exemple
:
«
public/œuvres.php
».
«
admin/œuvres.php
».
a
partir
de
là,
front
controleur
vérifier
$_get
$_post
être
setté
fichier
correspondre
controleur
qu’on
vouloir
appeler
exister
(is_file()).
c’est
cas,
pouvoir
faire
include
controleur
back.
sinon,
revenir
à
page
d’accueil.
n’a
besoin
de
swich!
!
...
//on
inclure
contrôleur
s'il
exister
s'il
être
spécifier
if
(!
!empty($_get['page'])
&&
is_file('controleurs/'.$_get['page'].'.php'))
php
–
mysql
–
mvc
-
page
28/34

include
'controleurs/'.$_get['page'].'.php';
else
include
'controleurs/accueil.php';
//
controleur
accueil
...
fichier
index.html
fichier
index.html
appeler
avec
fonction
header()
front
contrôleur
:
fichier
indexswitch.
passer
paramètre
à
l’url
:
par
exemple,
indexoeuvres
:
être
page
d’accueil
site.
donner
n’importe
valeur
paramètre.
faire
tester
s’il
être
setté.
<?php
//
appeler
indexswith
en
settant
indexarticle
avec
n'importe
valeur
header('location:
indexswitch.php?indexoeuvre=set');
?>
php
–
mysql
–
mvc
-
page
29/34

mvc
–
exemple
7
:
site
artiste
v1-mvc
-
affichage
œuvres
-
tester
l’exemple
organisation
dossier
fichier
l’organisation
mvc
être
suivante
:
php
–
mysql
–
mvc
-
page
30/34

tp
site
artiste
mvc
tp-mvc-v2
:
site
artiste
v2
–
mvc
:
affichage
de
table
a
partir
siteartistev1-mvc-base,
faire
v2
prendre
compter
gestion
exposition
œuvres
exposées.
l’étape
2
mvc
suivre
même
logique
l’étape
2
non-mvc.
tp-mvc-v3
:
site
artiste
v3
–
mvc
:
administration
œuvres
ajouter
possibilité
de
connecter
administrateur
:
entrée
dans
back-office.
l’administrateur
pouvoir
déconnecter
pour
retourner
site
public.
l’entrée
dans
l’administration
faire
sur
page
d’administration
œuvres.
afficher
liste
œuvres
dans
tableau
permettre
pour
œuvre
de
consulter
en
détail,
de
modifier
de
supprimer.
page
d’administration
œuvres
pouvoir
ressembler
à
:
pour
charger
images,
falloir
utiliser
superglobal
$_file.
php
–
mysql
–
mvc
-
page
31/34

connexion
administrateur
pour
connecter
administrateur,
falloir
créer
formulaire
par
exemple
(dans
page
de
partie
publique)
:
vérifier
login
ø
objectif
dans
premier
temps
vérifier
de
mot
de
passe.
en
cas
d’erreur,
afficher
page
d’erreur.
en
cas
de
réussite,
afficher
page
d’administration
œuvres.
gérer
déconnexion.
ø
objectif
dans
second
temps
prendre
compter
possibilité
de
modifier,
consulter,
supprimer
œuvres.
ø
vérification
login
–
mot-de-passe
if(isset($_post['admin'])
and
htmlspecialchars($_post['admin'])==
'admin'
and
isset($_post['password'])
and
htmlspecialchars($_post['password'])=='admin'){
$_session['admin']
=
$_post['admin'];
}
dans
contrôleur
d’administration,
vérifier
début
avoir
recevoir
bon
login
–
motdepasse.
vérifier
deux
champ
être
settés
qu’ils
contiennent,
par
exemple
«
admin
»
«
admin
».
php
–
mysql
–
mvc
-
page
32/34

si
c’est
cas,
enregistrer
valeur
de
$_session[‘admin’].
commencer
par
faire
session_start()
en
début
de
page.
ø
affichage
de
bonne
vue
selon
$_session['admin'])
être
setté
pas,
choisir
vue
à
afficher.
//
n'a
droits
d'administration
if
(!
!isset($_session['admin']))
{
include('vue/admin/vueinterdiction.php');
}
else
{
include('vue/admin/vueadminoeuvres.php');
}
ø
gestion
de
déconnexion
déconnecte,
passer
$_post['deconnexion']
à
page
de
retour
:
en
l’occurrence
œuvres.
de
là,
dans
page
œuvres,
tester
$_post['deconnexion']
être
setté
(on
venir
bouton
déconnexion).
c’est
cas,
unset
$_session['admin']
ø
page
d’erreur
créer
nouvelle
vue
pour
gérer
l’erreur
l’admin
n’a
mot
de
passe.
vue
garder
header
utilisateur
publics
:
pouvoir
retourner
sur
œuvres
expositions.
php
–
mysql
–
mvc
-
page
33/34

tp-mvc-v4
:
site
artiste
v4
–
mvc
:
administration
exposition
fois
connecter
en
qu’administrateur,
pouvoir
administrer
exposition
:
ajouter,
supprimer
modifier.
ajouter
exposition,
falloir
pouvoir
préciser
liste
œuvres
exposées.
supprimer
exposition,
falloir
supprimer
œuvres
exposées.
modifier
exposition,
falloir
pouvoir
ajouter
supprimer
œuvres
modifier
prix
œuvres
dans
l’exposition.
l’utilisateur
être
connecter
administrateur,
faire
en
sorte
qu’il
rester
connecter
qu’il
aille,
sauf
s’il
déconnecte.
php
–
mysql
–
mvc
-
page
34/34


