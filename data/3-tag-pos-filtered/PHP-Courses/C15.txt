cours
d’initiation
php
initiation
à
programmation
de
page
web
en
daniel
hadjadj
daniel
©
dahadjadj@free.fr
-
2005
-
page
1

cours
d’initiation
php
tabler
matieres
1.
pre-requis................................................................................................................................................................5
2.
introduction.........................................................................................................................................................6
qu'est-ce
php
?...................................................................................................................................6
historique
....................................................................................................................................................6
a
s'adresse
php
?
................................................................................................................................6
comment
marche
...................................................................................................................................7
nouvelle
génération
web
:
site
web
actif
................................................................................7
technologie
dynamiques
côté
client
.........................................................................................................7
technologie
côté
serveur
..........................................................................................................................7
de
l'intérêt
traitement
côté
serveur
........................................................................................................7
architecture
.................................................................................................................................................8
3.
installation
........................................................................................................................................................10
3.1.
installation
manuel
..............................................................................................................................................10
installation
de
php....................................................................................................................................10
configuration
de
php................................................................................................................................10
installation
d’apache
.................................................................................................................................11
configuration
d’apache
.............................................................................................................................11
lancement
arrêt
serveur
..................................................................................................................12
test
de
configuration
.............................................................................................................................12
interfaçage
avec
un
sgbd
.......................................................................................................................12
base
de
donnée
?
........................................................................................................................13
3.2.
installation
rapide
avec
easyphp
.......................................................................................................................14
présentation
d'
easyphp
..........................................................................................................................14
installation
d'
easyphp
.............................................................................................................................14
3.3.
installation
support
de
cours
.........................................................................................................................15
4.
langage
php
.........................................................................................................................................................16
4.1.
règles
de
base
.....................................................................................................................................16
4.2.
variable
php
..................................................................................................................................................18
type
de
variables
......................................................................................................................................18
constante
..........................................................................................................................................18
variable
type
booléens
:
..........................................................................................................................19
variable
type
entier
:
................................................................................................................................19
nombre
à
virgule
flottante
:
...............................................................................................................19
variable
type
chaîne
de
caractère
:.................................................................................................21
traitement
variables
dans
chaînes...............................................................................................22
variable
type
tableau
........................................................................................................................23
variable
type
tableau
........................................................................................................................23
variable
type
objet
..............................................................................................................................23
transtypage...........................................................................................................................................24
variables
super
global..........................................................................................................................26
4.3.
opérateurs......................................................................................................................................................27
opérateur
arithmétiques....................................................................................................................27
l’opérateur
d’affectation............................................................................................................................27
l’opérateur
de
concaténation....................................................................................................................27
l’opérateur
arobase
..................................................................................................................................27
opérateur
de
comparaison................................................................................................................28
opérateur
logiques
............................................................................................................................28
opérateur
d'incrémentation
................................................................................................................28
raccourci
d’affectation
de
variables........................................................................................................28
4.4.
instruction
...........................................................................................................................................................29
instruction
conditionnelles.........................................................................................................................29
branchement
conditionnel
:
mot
clé
«
else
»
«
elseif
»
.......................................................................29
instruction
«
switch
»..................................................................................................................................32
boucle
...............................................................................................................................................32
4.5.
tableau
.........................................................................................................................................................34
fonction
de
traitement
de
tableaux...........................................................................................................35
parcourir
tableau
avec
boucles....................................................................................................35
tri
de
tableaux...........................................................................................................................................39
4.6.
fonction
..............................................................................................................................................................41
daniel
hadjadj
daniel
©
dahadjadj@free.fr
-
2005
-
page
2

cours
d’initiation
php
fonction
prédéfinis
..............................................................................................................................41
fonction
utilisateurs
...........................................................................................................................41
portée
variables..................................................................................................................................43
fonction
imbriquer.....................................................................................................................................43
inclusions............................................................................................................................................45
5.
formulaire
................................................................................................................................................46
méthode
get
:
.....................................................................................................................................46
méthode
post:....................................................................................................................................46
urlencode()
urldecode()........................................................................................................................48
recupération
variables.......................................................................................................................49
contrôle
html
..................................................................................................................................50
validation
formulaires.........................................................................................................................53
htmlentites()
htmlspecialchars
..............................................................................................................54
en-tête
http
....................................................................................................................................55
récupérer
en-tête
de
requête........................................................................................................55
base
de
donnees
.................................................................................................................................................56
pourquoi
utiliser
base
donner
?.......................................................................................................56
architecture
externe
d’une
base
de
données
web....................................................................................56
6.1.
accès
base
de
données..............................................................................................................................56
support
php
de
connexion
base
de
donnée
.................................................................................56
rudiment
langage
sql
......................................................................................................................56
phpmyadmin
.............................................................................................................................................57
installer
base
formation
.....................................................................................................................57
6.2.
base
de
donnée
mysql.....................................................................................................................................59
etablir
connexion................................................................................................................................59
choisir
base
de
donnée
existante
....................................................................................................59
déconnexion
à
base
de
données..........................................................................................................60
envoyer
requête
vers
base
de
donnée
........................................................................................61
rechercher
donnée
dans
base.....................................................................................................64
naviguer
dans
donnée
de
base
.....................................................................................................66
insérer
donnée
dans
base
............................................................................................................68
addslashes()
stripslashes
()
..................................................................................................................68
modifier
donnée
dans
base
..........................................................................................................68
supprimer
donnée
dans
base.......................................................................................................70
date
heures...................................................................................................................................70
conversion
entre
format
de
date
php
format
de
date
mysql........................................73
6.3.
utiliser
odbc........................................................................................................................................................75
installation
driver
odbc
de
mysql......................................................................................................75
configuration
de
source
de
donnée...................................................................................................75
7.
session
cookies
................................................................................................................................78
7.1.
cookies
..........................................................................................................................................................78
qu’est-ce
qu’un
cookie
?...........................................................................................................................78
cookies
en
php
........................................................................................................................................78
accéder
à
cookie..................................................................................................................................78
supprimer
cookie
.................................................................................................................................78
7.2.
session
.........................................................................................................................................................81
session
avec
cookies........................................................................................................................81
passage
paramètre
par
l’url
..........................................................................................................81
session
utiliser
fonction
php...................................................................................................82
configuration
de
php.ini
............................................................................................................................82
ouverture
d’une
session
...........................................................................................................................83
enregistrement
d’une
variable
de
session
................................................................................................83
utilisation
de
variables
de
session
............................................................................................................83
dés-enregistrement
de
variables
suppression
de
session
...................................................................83
gestion
fichier
.......................................................................................................................................86
ouvrir
fichier
.....................................................................................................................................86
fermer
fichiers....................................................................................................................................87
naviguer
dans
fichiers........................................................................................................................87
afficher
fichier
...................................................................................................................................87
lire
fichier
.........................................................................................................................................87
ecrire
dans
fichier
.............................................................................................................................88
daniel
hadjadj
daniel
©
dahadjadj@free.fr
-
2005
-
page
3

cours
d’initiation
php
copier,
supprimer
renommer
fichier
.............................................................................................88
chargement
de
tableau
à
partir
de
fichier
...........................................................................................90
chargement
de
tableau
à
partir
de
fichier
...........................................................................................90
gérer
répertoire
................................................................................................................................91
afficher
image
....................................................................................................................................93
gestion
erreurs........................................................................................................................................95
introduction................................................................................................................................................95
9.1.
type
d’erreurs
php
......................................................................................................................................95
erreur
de
syntaxe
......................................................................................................................................95
erreur
de
sémantique................................................................................................................................95
erreur
logique............................................................................................................................................96
erreur
d’environnement.............................................................................................................................96
message
d’erreur
php
.....................................................................................................................96
9.2.
niveau
d’erreur
php
....................................................................................................................................96
définition
niveau
de
rapport
d’erreur....................................................................................................96
définition
duniveau
de
rapport
d’erreur
dans
«
php.ini
»
.......................................................................97
définition
niveau
de
rapport
d’erreur
dans
script
:
...........................................................................97
9.3.
gérer
erreurs...................................................................................................................................................97
suppression
message
d’erreur.........................................................................................................97
message
d’erreur
personnalisé.................................................................................................................98
journalisation
erreurs.........................................................................................................................99
programmation
orienter
objet
...........................................................................................................100
10.1.
concept
de
programmation
orienter
objet..................................................................................100
11.
classe
objet
(php
4)...........................................................................................................101
11.1.
création
d’une
classe.......................................................................................................................................101
création
d’attributs
:
................................................................................................................................101
création
de
méthode
:
...........................................................................................................................101
constructeur
de
classe............................................................................................................................101
11.2.
instanciation
.....................................................................................................................................................102
11.3.
accès
attribut
méthode
d’une
classe
.......................................................................................102
accesseurs
.......................................................................................................................................102
11.4.
héritage
.............................................................................................................................................................103
l’opérateur
de
contexte
de
classe
(::).....................................................................................................104
11.5.
redéfinition.......................................................................................................................................................105
manipulation
de
classe
d’objets
d’origine
similaire.
..........................................................................105
classe
objet
(php
5).................................................................................................................107
exemple
de
changement
:...................................................................................................107
11.6.
création
d’une
classe.......................................................................................................................................107
constructeurs
destructeur
.................................................................................................................108
11.7.
création
d'une
instance
...................................................................................................................................109
11.8.
assignation
d'un
objet
.....................................................................................................................................109
11.9.
héritage
.............................................................................................................................................................109
11.10.
visibilité...........................................................................................................................................................109
visibilité
membre
............................................................................................................................110
visibilité
méthodes............................................................................................................................110
l'opérateur
de
résolution
de
portée
(::)...................................................................................................111
11.11.
abstraction
d'objets
.......................................................................................................................................112
11.12.
interfaces.........................................................................................................................................................113
daniel
hadjadj
daniel
©
dahadjadj@free.fr
-
2005
-
page
4

cours
d’initiation
php
1.
pre-requis
être
suivre
avec
efficacité,
connaissance
être
utiles
à
cours
:
langage
html
:
php
permettre
de
faire
manipulation
baliser
par
balise.
base
de
donnée
:
langage
sql
:
langage
javascript:
notion
de
base
création
de
base
de
données,
tables,
type
de
données,
etc...
l'interrogation
(select),
l'insertion
(insert),
modification
(update),
etc...
création
de
fonction,
manipulation
chaînes,
etc...
réseau
:
fonctionnement
générale,
structurer
client/serveur
etc...
cours
s'adresse
débutants
avoir
programmer
dans
langage
simple
à
désirant
acquérir
notion
de
base
de
programmation
php.
avoir
pratiquer
javascript,
constater
php
présenter
avec
langage
de
script
similitude
n'est
compliqué.
a
de
gérer
propre
serveur
(ce
n'est
réaliste
dans
cas
d'un
intranet!
!),
être
obliger
de
subir
hébergeur
imposer
n'y
à
langage
php
pur
dur
c'est
cas
dans
d'autres
langage
normalisés,
de
langage
php
multiples
extension
permet,
php
gérer
html
balise
par
balise
niveau
bas,
aller
devoir
mettre
main
dans
cambouis.
rester
dans
cadre
de
réalisation
de
page
web
simples
n'aborderons
technique
sophistiquées
faire
appel
multimédia.
montrer
appliquer
php
commerce
électronique.
laisser
dans
l'ombre
question
d'hébergement
payer
de
site
web
s'y
rattacher
(acquisition
de
nom
de
domaine,
par
exemple).
essayer
de
réaliser
application
de
gestion
simple.
daniel
hadjadj
daniel
©
dahadjadj@free.fr
-
2005
-
page
5

cours
d’initiation
php
2.
introduction
qu'est-ce
php
?
php
être
langage
de
script
imbriquer
dans
page
html
traiter
par
serveur.
php
permettre
de
construire
page
html
contenir
résultat
de
calcul
de
requête
sql
adresser
à
système
de
gestion
de
base
de
donnée
(sgbd).
grâce
à
de
nombreuses
extensions,
php
pouvoir
générer
fichier
pdf,
s'interfacer
avec
serveur
de
messagerie,
serveur
ldap
générer
image
graphique
gif
à
volée,
pour
citer
fonctionnalité
importantes.
php
pouvoir
s'interfacer
avec
quasitotalité
sgbd
marché,
qu'ils
être
commerciaux
qu'ils
venir
monde
libre
(free
software).
php
être
langage
de
script
niveau
serveur,
comparable
à
asp
de
microsoft
comporter
de
fonctions,
supporter
standard
web
être
extensible.
historique
langage
php
avoir
être
mettre
point
début
d'automne
1994
par
rasmus
lerdorf.
langage
de
script
permettre
de
conserver
trace
utilisateur
venir
consulter
cv
sur
site,
grâce
à
l'accès
à
base
de
donnée
par
l'intermédiaire
de
requête
sql.
ainsi,
être
donner
de
nombreux
internautes
demander
programme,
rasmus
lerdorf
mettre
en
ligne
en
1995
premier
version
de
programme
qu'il
baptiser
personal
sommaire
pager
tools
(outils
basiques
pour
page
perso),
personal
home
page
v1.0
(traduisez
page
personnelle
version
1.0).
etant
donner
succès
de
php
1.0,
rasmus
lerdorf
décider
d'améliorer
langage
en
intégrer
structure
avancer
boucles,
structure
conditionnelles,
intégrer
package
permettre
d'interpréter
formulaire
qu'il
avoir
développer
(fi,
form
interpreter)
support
de
msql.
c'est
de
façon
version
2
langage,
baptiser
pour
l'occasion
php/fi
version
2,
voir
jour
durant
l'été
1995.
php
2
être
utiliser
sur
de
nombreux
site
(15000
fin
1996,
50000
en
milieu
d'année
1997).
a
partir
de
1997,
zeev
suraski
andi
gurmans
rejoindre
rasmus
pour
former
équipe
de
programmeur
de
mettre
point
php
3
(stig
bakken,
shane
caraveo
jim
winstead
rejoignèrent
par
suite).
c'est
version
3.0
de
php
être
disponible
6
juin
1998
s'appelle
php
:
hypertext
preprocessor.
exister
par
application
web
prêtes
à
l'emploi
(phpnuke,
php
spip,
phpslash...)
permettre
de
monter
portail.
en
juillet
2000
de
300.000
site
tourner
sous
php!
!
a
fin
de
l'année
1999,
version
bêta
de
php,
baptiser
php4
être
apparue...
version
php4
être
version
rapide
autres
utiliser
nouveau
moteur
zend.
de
support
session
être
intégrer
dans
autres
version
falloir
installer
bibliothèque
phplib
accéder
à
contrôle
de
session
falloir
en
écrire
un.
en
2005
version
php5
...
avoir
s'adresse
php
?
php
être
l'outil
idéal
pour
création
de
site
internet
intranet
de
taille
moyenne
de
grande
taille
n'ayant
à
supporter
grand
nombre
de
requête
simultanées.
site
affirmer
afficher
de
450
000
page
par
jour
sur
machine
configuration
être
suivante
:
dual
pii-333,
512mb
ram,
2x9go
scsi,
sans
atteindre
100%
de
charge
sur
deux
processeurs.
"php
can
spew
html
much
much
faster
than
the
leased
line
can
push
the
bits."
(rasmus
lerdorf)
reprendre
syntaxe
claire
familière
proche
de
langage
c,
php
être
langage
prise
en
main
être
rapide
(php
provoquer
de
phénomène
de
rejet
perl
...).
c'est
langage
convenir
débutant
désireux
de
familiariser
avec
technique
web
dynamique,
qu'au
professionnel
chercher
solution
simple
puissante
fiable
pour
création
de
site
de
taille
moyenne
daniel
hadjadj
daniel
©
dahadjadj@free.fr
-
2005
-
page
6

cours
d’initiation
php
marche
php
être
langage
destiner
à
l'écriture
de
scripts.
pouvoir
travailler
de
façon
autonome,
sans
support
de
html.
instruction
php
être
placer
entre
deux
balise
particulières,
permettre
navigateur
qu'au
serveur
de
reconnaître.
navigateur
demander
page
serveur,
celui-ci
rencontrer
balise
php,
appeler
l'interpréteur
php
exécuter
nombre
d'actions
en
fonction
de
nature
instruction
contenir
dans
page.
souvent,
aller
en
résulter
création
de
sortir
pouvoir
comporter
commande
html
sortie
aller
être
envoyer
navigateur
aller
afficher.
c'est
processus
de
création
de
page
web
dynamiques.
nouvelle
génération
web
:
site
web
actifs
web
s'est
orienter
vers
site
web
actifs,
permettre
à
l'utilisateur
de
recevoir
page
personnaliser
offrir
de
fait
navigation
dynamique.
être
réaliser
à
l'aide
d'une
combinaison
de
langage
de
technologies,
à
utiliser
seul
combinés,
être
indépendant
un
autres.
technologie
pouvoir
être
répartir
en
deux
groupes,
selon
qu'il
s'agit
de
technologie
côté
client
côté
serveur.
technologie
dynamiques
côté
client
technologie
être
innovation
récentes.
principal
inconvénient
côté
client
être
l'administrateur
site
(webmestre)
disposer
d'aucun
contrôle
sur
logiciel
utiliser
pour
afficher
page.
entreprise
tenir
à
prendre
en
compte
d'utilisateurs
possible
avec
maximum
de
navigateurs,
progrès
être
lents
pour
nouvelles
technologies,
prendre
en
charge
par
dernière
génération
principaux
navigateur
marché.
technologie
côté
client
être
:
contrôle
activex
;
applets
java
;
script
côté
client
(essentiellement
javascript)
dhtml.
technologie
côté
serveur
avoir
années,
common
gateway
interface
(cgi)
constituer
seule
vraie
solution
permettre
de
mettre
donnée
dynamiques
sur
web.
programme
cgi
constituer
moyen
simple
de
créer
application
web
accepter
saisie
de
l'utilisateur,
d'interroger
base
de
donnée
de
renvoyer
résultat
navigateur.
microsoft
netscape
avoir
deux
développé
api
propriétaires
pouvoir
être
utiliser
pour
développer
code
permettre
de
servir
requête
web.
parmi
dernières
technologie
web
côté
serveur,
pouvoir
citer
active
server
page
(asp),
servlets
java,
javaserver
page
(jsp)
php.
php
fonctionner
de
façon
similaire
à
jsp
à
asp
:
section
de
script
être
encadrer
par
balise
(<
?
...
?>)
incorporer
à
page
html.
script
être
exécuter
sur
serveur
avant
page
être
envoyer
navigateur,
qu'une
pager
php
préoccuper
de
prise
en
charge
par
navigateur.
à
asp,
php
être
indépendant
de
plate-forme
exister
pour
différentes
version
de
windows,
unix
linux,
de
nombreux
serveur
apache
iis.
facteur
décisif
être
qu'il
être
libre
"open
source".
de
l'intérêt
traitement
côté
serveur
traitement
génération
de
page
web
côté
serveur
offrir
avantage
par
rapport
technologie
côté
client,
:
diminution
trafic
réseau
en
limiter
échange
client/serveur
à
l'envoi
de
requête
de
réponse
;
réduction
temps
de
téléchargement
:
client
recevoir
qu'une
simple
page
html
;
élimination
problème
de
compatibilité
navigateur;
amélioration
mesure
sécuritaires,
pouvoir
coder
chose
être
voir
par
navigateur.
daniel
hadjadj
daniel
©
dahadjadj@free.fr
-
2005
-
page
7

cours
d’initiation
php
architecturer
plupart
site
web
offrir
contenu
statique,
publication
scientifiques
articles.
page
de
site
consister
en
texte
simple
agrémenter
de
image
de
lien
hypertextes
mener
vers
d'autres
pages.
pour
catégorie
de
site
web,
techniques
côté
client
suffire
amplement.
html
feuille
de
style
en
cascade
(css)
permettre
de
structurer
de
présenter
contenu
pages,
javascript
permettre
d'ajouter
touche
sophistiquer
nécessaire.
source
inconnue
or,
trouver
qu'internet
intranets
être
de
en
utiliser
pour
applications,
plupart
mettre
en
jeu
base
de
données.
site
application
être
dynamiques,
contenu
être
modifier
selon
donnée
impliquer
action
de
l'utilisateur.
lorsqu'une
requêter
pour
page
provenir
navigateur
(client),
serveur
http
procéder
en
trois
étape
:
lecture
de
requête
navigateur
(client);
identification
de
page
sur
serveur
;
envoi
de
page
navigateur
(client)
via
internet
(ou
intranet).
c'est
php
entre
en
scène.
en
exécuter
programme
php
sur
serveur,
pouvoir
créer
de
puissantes
application
agir
de
façon
interactive
avec
base
de
donnée
générer
contenu
dynamique.
daniel
hadjadj
daniel
©
dahadjadj@free.fr
-
2005
-
page
8

cours
d’initiation
php
source
inconnue
lieu
de
renvoyer
page
html
statique
à
l'utilisateur,
souhaiter
serveur
accomplir
action
en
fonction
code
php
:
php
devoir
prendre
décision
créer
page
approprier
à
situation.
de
fait,
avec
php
action
serveur
être
suivantes
:
lecture
de
requête
navigateur
(client)
;
identification
de
page
sur
serveur
;
exécution
instruction
venir
de
php
,
besoin
php
interroger
base
données,
pour
modifier
page;
renvoi
de
page
navigateur
(client)
via
internet
(ou
intranet).
code
html
pur
être
interpréter
par
navigateur,
exécuter
sur
serveur.
en
écrire
code
php
être
exécuter
sur
serveur
web,
pouvoir
accomplir
de
chose
qu'il
n'est
possible.
daniel
hadjadj
daniel
©
dahadjadj@free.fr
-
2005
-
page
9

cours
d’initiation
php
3.
installation
devoir
installer
php
serveur
web
permettre
d'accéder
à
script
php
via
un
navigateur.
utiliser
serveur
web
apache,
leader
marché,
rapide,
fiable
gratuit,
serveur
iis
fonctionner
également.
pouvoir
installer
apache
php
de
deux
façon
:
•
automatiquement,
en
utiliser
utilitaire
installer
configurer
avoir
besoin.
voir
détail
de
installation
dans
chapitre
"installation
rapide
avec
easyphp".
•
manuellement,
en
suivre
étape
ci-dessous.
3.1.
installation
manuel
fichier
nécessaires
pour
l'installation
de
php
d'apache
être
disponibles
sur
web
à
l'adresse
http://www.php.net/
être
conseiller
de
télécharger
dernières
version
disponibles.
installation
de
php
créer
répertoire
nommer
php
sur
c:/
(ou
autre
répertoire)
copier
de
dans
fichier
php.
configuration
de
php
php4
copier
fichier
php4ts.dll
de
php
dans
c:/winnt/system
(32).
copier
fichier
php.ini-dist
de
php
dans
c:/winnt
en
retirer
"–dist".
fichier
permettre
de
régler
différents
paramètre
de
php.
php5
copier
fichier
php5ts.dll
de
php
dans
c:/winnt/system
(32).
copier
fichier
php.ini-recommended
de
php
dans
c:/winnt
en
retirer
–
recommended.
fichier
permettre
de
régler
différents
paramètre
de
php.
liste
point
utiles
(à
noter
";"
servir
de
commentaires)
:
•
dans
"paths
and
directories"
ajouter
.
(point)
dans
include_path
.
mettre
chemin
fichier
dll
(par
exemple
c:\php\extensions)
dans
extension_dir
php4
;;;;;;;;;;;;;;;;;;;;;;;;;
;
paths
and
directories
;
;;;;;;;;;;;;;;;;;;;;;;;;;
include_path
=
.
doc_root
=
user_dir
=
upload_max_filesize
=
2097152
extension_dir
=
c:\php\extensions
enable_dl
=
php5
;;;;;;;;;;;;;;;;;;;;;;;;;
;
paths
and
directories
;
;;;;;;;;;;;;;;;;;;;;;;;;;
include_path
=
.
doc_root
=
user_dir
=
upload_max_filesize
=
2097152
extension_dir
=
c:\php\ext
enable_dl
=
daniel
hadjadj
daniel
©
dahadjadj@free.fr
-
2005
-
page
10

cours
d’initiation
php
•
dans
"windows
extensions"
dé-commenter
ligne
fichier
d'extension
l'on
souhaiter
utiliser
en
enlever
point
virgule.
par
exemple
souhaiter
utiliser
fonction
ftp
imap
:
php4
;windows
extension
;
extension=php_ftp.dll
;extension=php_gettext.dll
;extension=php_ifx.dll
extension=php_imap.dll
;
php5
;windows
extension
;
extension=php_mysql.dll
extension=php_ftp.dll
;extension=php_gettext.dll
;extension=php_ifx.dll
extension=php_imap.dll
;
remarque
:
mysql
être
supporter
dans
php4,
n’est
nécessaire
de
charger
dll,
n’est
cas
pour
php5.
•
dans
"[session]"
souhaiter
utiliser
session
php,
simple
être
de
garder
configuration
par
défaut,
de
stocker
session
dans
fichiers.
falloir
par
contre
spécifier
chemin
répertoire
être
stocker
sessions.
par
exemple,
pouvoir
créer
répertoire
c:\php\sessions.
php4
php5
[session]
session.save_handler
=
file
;
session
être
stocker
dans
fichier
session.save_path
=
c:\php\sessions
session.use_cookies
=
1
;
utiliser
cookies
pour
transmettre
l'identifiant
de
session
session.name
=
phpsessid
;
etc.
installation
d’apache
devoir
l’installer
dans
c:/program
files/apache
group
configuration
d’apache
fichier
"httpd.conf"
permettre
de
configurer
apache.
pouvoir
par
exemple
ajouter
adresse
ip
à
ligne
server
name
;
pouvoir
modifier
racine
web
de
documents,
à
l'aide
de
directive
documentroot.
par
défaut
s'agit
répertoire
"htdocs",
dans
répertoire
d'installation
d'apache.
convient
de
changer,
pour
"c:\web"
par
exemple.
servername
127.0.0.1
documentroot
"c:/web"
bas
...
<directory
"c:/web">
opter
all
allowoverride
all
order
allow,deny
allow
from
all
</directory>
daniel
hadjadj
daniel
©
dahadjadj@free.fr
-
2005
-
page
11

cours
d’initiation
php
copier
ligne
de
configuration
suivantes,
collez-les
dans
fichier
httpd.conf.
php4
#
for
the
apache
module
loadmodule
php4_module
c:/php/sapi/php4apache.dll
#ajouter
avoir
suite
de
ligne
extension
#voulez
voir
reconnaître
par
php,
précéder
d’un
addtype
application/x-httpd-php
.phtml
.pwml
.php3
.php4
.php
.php2
.inc
#for
the
cgi
binary
(you
can
user
that
one
compiled
with
forcer
cgi
redirect
too)
scriptalias
/php4/
"c:/php/"
action
application/x-httpd-php4
"/php4/php.exe"
php5
#
for
the
apache
module
loadmodule
php5_module
c:/php/sapi/php5apache.dll
#ajouter
avoir
suite
de
ligne
extension
#voulez
voir
reconnaître
par
php,
précéder
d’un
addtype
application/x-httpd-php
.phtml
.pwml
.php3
.php4
.php
.php2
.inc
.php5
#for
the
cgi
binary
(you
can
user
that
one
compiled
with
forcer
cgi
redirect
too)
scriptalias
/php5/
"c:/php/"
action
application/x-httpd-php5
"/php5/php.exe"
d’informations
sur
apache,
avoir
site
web
d’apache
software
foundation
à
l’adresse
:
http://www.apache.org/.
exister
précis
concis
sur
apache
chez
o’reilly.
lancement
arrêt
serveur
dans
démarrer,
programmes,
apache
httpd
server,
cliquer
start
apache
in
console.
fenêtre
s’ouvre
indiquer
:
apache
(winn
32)
php
running
…
pour
arrêter
serveur,
dans
démarrer,
exécuter
taper
cmd.
dans
fenêtre
s’ouvre,
taper
cd
program
files/apache
group/apache
apache
–k
shutdown.
test
de
configuration
pour
tester
être
installé,
falloir
rendre
sur
http://127.0.0.1
(ou
l’adresse
ip
de
site).
devoir
obtenir
page
indiquer
qu’apache
fonctionner
correctement.
dans
cas
contraire,
vérifier
avoir
lancer
apache.exe.
falloir
vérifier
php
fonctionner
aussi.
pour
cela,
lancer
éditeur
de
texte
(par
exemple
phpedit),
créer
nouveau
fichier,
avec
l'extension
adapter
(phpinfo.php
par
exemple)
insérez-y
ligne
suivante
:
<?
phpinfo();
?>
sauvegarder
fichier
dans
répertoire
adéquat
(c:\program
files\apache
group\apache\htdocs\),
lancer
fichier
à
l'aide
de
navigateur
(http://127.0.0.1/phpinfo.php)
:
devoir
obtenir
page
d'information
sur
configuration
de
php.
interfaçage
avec
sgbd
l'interfaçage
avec
base
de
donnée
être
aspect
intéressants
langage
php.
base
de
donnée
pouvoir
offrir
solution
séduisantes
à
à
application
nécessiter
génération
de
page
html
dynamiques.
permettre
d'organiser
page
en
trois
partie
:
•
corps
de
html
faire
présentation,
invoquer
script
de
génération
dynamique
de
contenu
;
daniel
hadjadj
daniel
©
dahadjadj@free.fr
-
2005
-
page
12

cours
d’initiation
php
•
script
de
génération
de
contenu
(mise
en
forme
donnée
lire
dans
base
de
données);
•
l'interfaçage
avec
base
de
données,
avec
fonction
d'enrobage
(wrappers),
permettre
de
s'abstraire
de
base
de
donnée
utilisée.
base
de
donnée
?
trio
php
+
mysql
+
apache
être
solution
éprouver
fiable,
sur
machine
linux
freebsd
sur
plate-forme
win32,
être
livrer
dans
package
appeler
"map".
php
contenir
connexion
natives
vers
plupart
système
de
base
de
données.
en
de
mysql,
pouvoir
connecter
base
de
donnée
postgresql,
msql,
oracle,
dbm,
filepro,
informix,
interbase
sybase
citer
qu'elles.
grâce
standard
odbc
(open
database
connectivity),
pouvoir
connecter
à
n'importe
base
de
donner
posséder
pilote
odbc,
produit
de
microsoft.
daniel
hadjadj
daniel
©
dahadjadj@free.fr
-
2005
-
page
13

cours
d’initiation
php
3.2.
installation
rapide
avec
easyphp
présentation
d'
easyphp
easyphp
installer
configurer
environnement
de
travail
complet
permettre
de
mettre
œuvre
puissance
souplesse
qu'offrent
langage
dynamique
php
support
efficace
de
base
de
données.
easyphp
regrouper
serveur
http
apache,
base
de
donnée
mysql,
php
outil
d'administration
de
base
de
donnée
phpmyadmin.
installation
d'
easyphp
utiliser
dans
cadre
de
cours,
version
easyphp
1.8
comprendre
apache
1.3.33,
php
4.3.10,
phpmyadmin
2.6.1
mysql
4.1.9
.
télécharger
easyphp
sur
site
http://www.easyphp.org/,
l'installer
à
l'aide
fichier
d'installation
(easyphp1-8_setup.exe)
"
lancement
"
d'easyphp
revenir
à
mettre
en
route
serveur
apache
mysql.
a
l'installation,
raccourci
vers
easyphp
être
créer
dans
répertoire
"démarrer/programmes/easyphp".
fois
easyphp
lancé,
icône
placer
dans
barre
tâche
à
côté
de
l'horloge.
clic
droit
permettre
d'accéder
à
différents
menu
:
•
fichier
log
:
renvoyer
erreur
générer
par
apache
mysql
;
•
configuration
:
donner
accès
différentes
configuration
d'easyphp
;
•
web
local
:
ouvre
page
http://localhost/index.htm,
pager
d'accueil
d'easyphp
;
•
démarrer/arrêter
:
démarre/arrête
apache
mysql
;
•
quitter
:
easyphp
;
page
php
être
interprétées,
pouvoir
placer
fichier
dans
répertoire
www
serveur
apache
être
configurer
pour
ouvrir
fichier
index
saisir
l'adresse
"http://localhost/"
(à
condition
serveur
apache
être
en
route).
page
servir
de
page
d'accueil
web
local
permettre
de
vérifier
bon
fonctionnement
d'easyphp.
d'avoir
vision
claire
développements,
être
conseiller
de
créer
répertoire
par
projet
d'ajouter
en
indiquer
répertoire
contenir
fichiers.
exister
de
façon
de
programmer
en
php
qu'il
exister
d'éditeurs
spécialiser
(éditeurs
html,
coloration
syntaxique,
saisir
semi-automatique...).
pour
tester
configuration
afficher
page
d'administration
de
easyphp
à
l'adresse
suivante
:
http://127.0.0.1/home/
daniel
hadjadj
daniel
©
dahadjadj@free.fr
-
2005
-
page
14

cours
d’initiation
php
3.3.
installation
support
de
cours
aller
installer
site
en
mode
local
contenir
support
de
cours.
a
partir
de
site
statique,
réaliser
en
html,
aller
étudier
différentes
manière
de
rendre
dynamique
grâce
à
php.
etapes
d'installations
•
créer
répertoire
"coursphp".
•
télécharger
fichier
"
coursphp.zip".
•
décompresser
fichier
dans
répertoire
"coursphp".
•
avec
clic
droit
sur
l'icône
de
easyphp
,
cliquer
sur
administration
•
cliquer
sur
ajouter
.
•
indiquer
nom
site
(exemple
:
coursphp)
chemin
d'accés
(
exemple
:
c:\
coursphp
).
•
valider
en
cliquer
sur
ok
•
redémarrer
easyphp
changement
être
prendre
en
compte
par
serveur
http
•
l'adresse
http://localhost/coursphp/
permettre
d'afficher
site.
daniel
hadjadj
daniel
©
dahadjadj@free.fr
-
2005
-
page
15

cours
d’initiation
php
4.
langage
php
4.1.
règles
de
base
code
php
être
enregistrer
texte
brut
format
ascii,
pouvoir
écrire
page
php
à
l'aide
de
n'importe
éditeur
de
texte.
utiliser
phpedit.
dans
cas
d'un
fichier
html,
serveur
web
transmettre
contenu
fichier
navigateur.
n'essaye
en
façon
de
comprendre
de
traiter
fichier
:
c'est
rôle
navigateur.
fichier
doter
de
l'extension
.php
être
gérer
:
code
php
être
recherché.
serveur
web
démarrer
en
"mode
html".
lorsqu'il
commencer
examen,
partir
principe
fichier
contenir
code
html,
feuille
de
style
en
cascade
(css),
code
javascript,
texte
brut
autre
texte
transmettre
navigateur
sans
besoin
d'interprétation
de
part
serveur.
entrer
en
"mode
php"
dès
qu'il
rencontrer
balise
php,
servir
à
"sortir"
mode
html.
pouvoir
utiliser
type
de
balise
php
:
différents
type
de
balise
php
style
xml
:
c’
être
style
par
défaut
être
reconnaître
par
interpréteurs.
c’est
utiliserons.
<?php
…
?>
style
courir
(instruction
sgml)
:
<?
…
?>
style
javascript
instruction
appeler
javascript
vbscript,
à
utiliser
éditeur
gérer
instruction
de
traitement
:
<script
language='php'>
…
</script>
caractère
d’échappement
d’asp
:
a
condition
paramètre
de
configuration
asp_tags
fichier
de
configuration
de
php
(php.in)
être
valeur
on.
<%
…
%>
instruction
php
devoir
terminer
par
point-virgule
sauf
après
l'accolade
fermante
d'un
bloc
d'instructions.
php
permettre
de
générer
page
web
côté
client.
suffire
pour
d'incorporer
code
côté
client
dans
texte,
générer
par
php
de
l'envoyer
navigateur.
sortie
script
pouvoir
être
générer
par
instruction
echo
print.
commentaire
pouvoir
être
insérer
dans
script
grâce
signe
:
//
pour
commentaire
sur
seule
ligne
;
/*
pour
commentaire
sur
ligne
*/
deux
exemple
:
exemple
1
:
<?php
echo
"texte
générer
par
php";
?>
navigateur
affiche
:
texte
générer
par
php
daniel
hadjadj
daniel
©
dahadjadj@free.fr
-
2005
-
page
16

cours
d’initiation
php
exemple
2
:
<?php
print
"<script
language='javascript'>alert
('erreur!
!');</script>";
?>
serveur
transmettre
texte
:
<script
language='javascript'>alert
('erreur!
!');</script>
navigateur
l'interprète
code
javascript
afficher
boîte
d’alerte.
exercice
:
(voir
annexe
règles
de
base).
générer
à
l’aide
de
php
texte
suivre
:
premier
script.
bonjour
monde.
même
texte
à
l’aide
de
javascript.
daniel
hadjadj
daniel
©
dahadjadj@free.fr
-
2005
-
page
17

cours
d’initiation
php
4.2.
variable
php
php
être
langage
typé.
n'est
tenir
de
déclarer
type
variables
constante
l'on
aller
utiliser.
variables
pouvoir
renfermer
n'importe
type
de
contenu.
c'est
php
déterminer
type
de
variable
par
contexte,
c'est-à-ire
par
valeur
être
attribuée.
en
php,
variables
être
représenter
par
signe
dollar
"$"
suivre
nom
de
variable.
nom
variables
écrire
en
minuscule
être
différentes
variables
écrire
en
majuscules
(ie
:
$x!
!=
$x).
nom
de
variables
suivre
mêmes
règles
de
nommage
autres
entité
php
.
nom
de
variable
valide
devoir
commencer
par
lettre
souligner
(_),
suivre
de
lettres,
chiffre
soulignés.
exprimer
sous
forme
d'une
expression
régulière,
donner
:
'[a-za-z_\x7f-\xff][a-za-z0-9_\x7f-\xff]*'
php
4
permettre
d'assigner
valeur
variables
par
référence.
signifier
nouvelle
variable
faire
référencer
(en
d'autres
terme,
"devient
de",
"pointe
sur")
variable
originale.
modification
de
nouvelle
variable
affecter
l'ancienne,
versa.
signifier
qu'aucune
copier
n'est
faire
:
l'assignation
être
rapide.
faire
sentir
dans
boucles,
d'assignation
de
grands
objet
(tableaux).
pour
assigner
par
référence,
ajouter
un
&
(et
commercial)
début
de
variable
être
assigner
(la
variable
source).
dans
l'exemple
suivant,
"
nom
être
pierre
"
s'affichera
deux
fois
:
exemple
:
<?php
$foo
$bar
$bar
echo
echo
?>
=
'pierre';
//
assigner
valeur
'pierre'
à
$foo
=
&$foo;
//
référencer
$foo
avec
$bar.
=
"mon
nom
être
pierre";
//
modifier
$bar...
$foo;
//
$foo
être
modifier
$bar;
type
de
variables
type
scalaire
:
constantes.
booléen.
entier.
nombre
à
virgule
flottante.
chaîne
de
caractères.
type
composer
:
tableau.
objet.
constantes
d’une
façon
générale,
pouvoir
donner
nom
symbolique
à
n’importe
constante
scalaire
(c’est
à
dire
de
type
booléen,
integer,
double
string)
.toutefois
l’usage
vouloir
constante
s’écrivent
en
lettre
capitales.
pour
créer
constante
utiliser
fonction
define()
forme
générale
être
:
structure
de
définition
d’une
constante
define
(nom,
valeur,
[,
casse])
;
:
nom
:
chaîne
de
caractère
représenter
nom
qu’on
vouloir
donner
à
constante.
valeur
:
valeur
attribuer
à
constante.
casse
:
valeur
booléenne
indiquer
nom
donner
à
constante
être
sensible
(false)
(true)
à
casse.
par
défaut
valeur
être
false,
signifier
nom
de
constante
être
sensible
à
casse.
nom
suggère,
valeur
pouvoir
être
modifier
durant
l'exécution
script
(les
constantes
magiques
__file__
__line__
être
seul
exception).
daniel
hadjadj
daniel
©
dahadjadj@free.fr
-
2005
-
page
18

cours
d’initiation
php
exemple
:
<?php
define
("pi",
3.1415926535);
$r
=
20
;
$circ
=2
*
pi
*
$r
;
echo
"
circonférence
de
rayon
$r
:
$circ
<br>";
echo
"
pi
valoir
".pi;
?>
exercice
:
(voir
annexe
:
constantes).
générer
à
l’aide
de
php
deux
ligne
suivantes
en
affecter
valeur
″bonjour
monde″
avoir
constante
:
″voici
deuxième
script.″
constante.
dans
même
fichier
même
texte
à
l’aide
de
javascript.
variable
type
booléens
:
c'est
type
simple.
booléen
exprimer
valeur
de
vrai
true
faux
false.
pouvoir
utiliser
constantes
'
true
'
'
false
'
pour
spécifier
valeur
de
type
booléen
:
constante
être
insensibles
à
casse.
exemple
:
<?php
$foo
=
true;
//
assign
valeur
true
to
$foo
$foo
=
false;
//
assign
valeur
false
to
$foo
$foo
=
1;
//
assign
valeur
1
to
$foo
$foo
=
0;
//
assign
valeur
0
to
$foo
foo
(true)
=
1
foo
(false)
=
foo(1)
=
1
foo(0)
=
0
?>
variable
type
entier
:
entier
être
nombre
de
l'ensemble
entiers
naturels
z
:
z
=
{....,
-2,
-1,
0,
1,
2,
...}.
être
possible
de
spécifier
nombre
entiers
(integers)
de
manière
suivantes
:
décimale
(base
10),
hexadécimale
(base
16),
octale
(base
8)
précéder
signe
(
-
).
exemple
:
<?php
$a
=
1234;
echo
"$a
=
nombre
entier
en
base
10
:
(1234)<br>";
$a
=
-123;
echo
"$a
=
nombre
entier
négatif:
(-123)<br>";
$a
=
0123;
echo
"$a
=
nombre
entier
en
base
8,
octale
(équivalent
à
83
en
base
10):
(83)<br>";
$a
=
0x1a;
echo
"$a
=
nombre
entier
en
base
16,
hexadécimale
(équivalent
à
26
en
base
10):
(26)";
?>
nombre
à
virgule
flottante
:
nombre
à
virgule
flottante
connaître
sous
vocable
de
"
double
"
"
float
"
"
nombre
rééls
"
pouvoir
être
spécifier
en
utiliser
syntaxe
suivante:
exemple
:
<?php
$a
=
1.234;
echo
$a."<br>";
$a
=
1.2e3;
echo
$a;
?>
•
variable
débuter
par
valeur
numérique
valide,
chaîne
être
évaluer
par
valeur,
être
évaluer
zéro
;
•
valeur
double
constituer
l’intégralité
de
chaîne,
chaîne
être
évaluer
valeur
double,
d’autres
caractère
doubles
être
présents
dans
chaîne,
être
évaluer
entier.
exemple
:
<?php
$var
=
1;
//
$var
être
entier
$var
=
1.2;
//
$var
être
double
$var
=
"abcd";
//
$var
être
chaîne
$str
=
"7
rue
fbg
montmartre";
$x
=
3
+
$str;
//
$x
=
10
$str
rester
inchangée
echo
"$x
:
$str";
//
affiche
:
10
:
7
rue
fbg
montmartre
daniel
hadjadj
daniel
©
dahadjadj@free.fr
-
2005
-
page
19

cours
d’initiation
php
$str
=
"code
275";
$x
=
3
+
$str;
//$x
=
3
echo
"$x
:
$str";
//
affiche
:
3
:
code
275
$str
=
"312.65
mètres";
$x
=
3
+
$str;
//
$x
=
315
echo
"$x
:
$str";
//
affiche
:
315.65
:
312.65
?>
daniel
hadjadj
daniel
©
dahadjadj@free.fr
-
2005
-
page
20

cours
d’initiation
php
variable
type
chaîne
de
caractère
:
chaîne
de
caractère
être
séquence
de
caractères.
en
php,
caractère
être
octet,
en
256
de
possibles.
php
n'a
(encore?)
de
support
natif
d'unicode
chaîne
pouvoir
être
spécifier
de
deux
manière
différentes
:
guillemet
simples
guillemet
doubles
guillemet
simples
syntax
:
$a="mavariable";
$a
valoir
mavariable
exemple
:
<?php
echo
'ceci
être
chaîne
simple';
echo"<br>";
echo
'vous
pouvoir
inclure
nouvelles
ligne
dans
chaîne,
ceci.';
echo
"<br><br>";
echo
'arnold
avoir
coutume
de
dire
:
"i\'ll
be
back"';
//
affiche
:
...
"i'll
be
back"
echo
"<br><br>";
echo
'etes
sûr
de
vouloir
effacer
dossier
c:\\*.*?';
//
affiche
:
etes
sûr
de
vouloir
effacer
dossier
c:\*.*?
echo
"<br><br>";
echo
'etes
sûr
de
vouloir
effacer
dossier
c:\*.*?';
//
affiche
:
etes
sûr
de
vouloir
effacer
dossier
c:\*.*?
echo
"<br><br>";
echo
'je
suis
en
train
de
mettre
nouvelle
ligne
:
\n';
//
affiche
:
suis
en
train
de
mettre
nouvelle
ligne
:\n
?>
guillemet
doubles
chaîne
être
entourer
de
guillemet
doubles,
php
aller
comprendre
séquence
de
caractère
:
séquence
de
caractère
comprendre
par
php.
\n
nouvelle
ligner
(linefeed,
lf
0x0a
(10)
en
ascii)
\r
retour
à
ligne(carriage
return,
cr
0x0d
(13)
en
ascii)
\t
tabulation
horizontale
(ht
0x09
(9)
en
ascii)
\\
antislash
\$
caractère
$
\"
guillemet
doubles
\[0-7]{1,3}
séquence
de
caractère
permettre
de
rechercher
nombre
en
notation
octale.
\x[0-9a-fa-f]{1,2}
séquence
de
caractère
permettre
de
rechercher
nombre
en
notation
hexadécimale
exercice
:
(voir
annexe
variable
type
chaîne
de
caractères).
créer
page
en
utiliser
côte
guillemet
afficher
texte
suivre
:
l'été
indien
rêvais!
!
histoire,
c’était
mienne.
daniel
hadjadj
daniel
©
dahadjadj@free.fr
-
2005
-
page
21

cours
d’initiation
php
traitement
variables
dans
chaîne
lorsqu'une
chaîne
être
spécifier
avec
guillemet
doubles
variables
qu'elle
contenir
être
remplacer
par
valeur.
avoir
deux
type
de
syntaxe,
simple
complexe
.
syntaxe
simple
être
courante,
pratique
:
fournir
moyen
d'utiliser
variables,
être
chaînes,
tableau
membre
d'objets.
syntaxe
complexe
avoir
être
introduire
en
php
4
pouvoir
être
reconnaître
grâce
accolade
entourer
expressions.
dès
qu'un
signe
dollar
$
être
rencontré,
l'analyseur
php
aller
lire
de
caractère
qu'il
pouvoir
pour
former
nom
de
variable
valide.
entourer
nom
de
variable
avec
accolade
pour
indiquer
nom.
utilisation
accolade
{}
dans
chaîne
exemple
:
<?php
$boisson
=
'vin';
echo
"du
$boisson,
pain
fromage!
!";
//
ok,
","
n'est
autoriser
dans
nom
de
variables
echo
"il
avoir
goûter
$boissons";
//
ok,
's'
pouvoir
entrer
dans
nom
de
variable,
php
recherche
$boissons
echo
"il
avoir
goûter
${boisson}s";
//
ok
?>
exercice
:
(voir
annexe
chaîne
de
caractère
exercice
1).
reprendre
l’exemple
présenter
dans
paragraphe
‘’guillemets
simples’’
remplacer
côte
par
guillemets,
observer
passer
,
corriger.
exercice
:
(voir
annexe
chaîne
de
caractère
exercice
2).
déclarer
variable
php
affecter
valeur
de
prénom
puis,
générer
à
l’aide
de
php
texte
suivant,
présenter
prénom
être
"votre
variable"!
!
même
texte
à
l’aide
de
javascript.
exercice
:
(voir
annexe
chaîne
de
caractère
exercice
3).
reprendre
l’exercice
2
ajouter
variable
contenir
nom,
afficher
variable
nom
variable
prénom
exercice
:
(voir
annexe
chaîne
de
caractère
exercice
4).
a
l’aide
de
variable
$super=fantastique,
créer
page
php
afficher
texte
suivre
en
utiliser
syntaxe
simple
complexe
:
c’est
fantastique.
soirée
être
fantastiques
daniel
hadjadj
daniel
©
dahadjadj@free.fr
-
2005
-
page
22

cours
d’initiation
php
variable
type
tableau
tableau
être
agrégat
de
valeur
de
type
quelconques,
mélangés,
regrouper
sous
nom
unique
dans
repérer
élément
isolé
être
par
indice
(compté
à
partir
de
zéro),
par
clé
enregistrer
en
même
temps
valeur
correspondante
de
création
tableau.
pouvoir
créer
tableau
moyen
de
fonction
array().
forme
générale
de
déclaration
être
:
déclaration
d’un
tableau.
$tableau[]
=
valeur
$tableau
=
array(valeur,
valeur,
valeur…)
;
$tableau
=
array(clé=>valeur,
clé=>valeur,
clé=>valeur…)
;
exemple
:
<?php
$tableau
=
array
(
"chien",
"salade",
"rocher");
//ou
$tableau
=
array
(
0=>"chien",
1=>"salade",
2=>"rocher");
?>
revenir
sur
l’utilisation
tableau
chapitre
tableaux.
variable
type
objet
objet
être
sorte
de
conteneur
pouvoir
contenir
différents
éléments,
en
général
classes.
objet
être
de
type
object.
pour
initialiser
objet,
devoir
utiliser
commande
"new"
de
créer
l’instance
de
l'objet.
exemple
:
<?php
class
foo
{
function
faire_foo
()
{
echo
"faisant
foo.";
}
}
$bar
=
new
foo;
$bar->faire_foo();
?>
daniel
hadjadj
daniel
©
dahadjadj@free.fr
-
2005
-
page
23

cours
d’initiation
php
transtypage
type
de
données
d’une
variable
pouvoir
être
modifier
à
l’aide
"transtypages"
(int),
(double),
(string)
,
…
.
conversion
autoriser
sont:
(int),
(integer)
typer
entier
(bool),
(boolean)
booléen
(real),
(double),
(float)
type
double
(string)
type
chaîner
(array)
type
tableau
(object)
typer
objet
exemple
:
<?php
$foo
=
1
+
"10.5";
echo
"\$foo
=
1
+
\"10.5\"
\$foo
être
type
float
(11.5)<br>";
$foo
=
1
+
"-1.3e3";
echo
"\$foo
=
1
+
\"-1.3e3\"
\$foo
être
type
float
(-1299)<br>";
$foo
=
1
+
"bob-1.3e3";
echo
"\$foo
=
1
+
\"bob-1.3e3\"
\$foo
être
type
integer
(1)<br>";
$foo
echo
$foo
echo
=
1
+
"bob3";
"\$foo
=
1
+
\"bob3\"
\$foo
être
type
integer
(11)<br>";
=
1
+
"10
small
pigs";
"\$foo
=
1
+
\"10
small
pigs\"
\$foo
être
type
integer(11)<br>";
$foo
echo
$foo
echo
=
1
+
"10
little
piggies";
"\$foo
=
1
+
\"10
little
piggies\"
\$foo
être
type
integer
(11)<br>";
=
"10.0
pigs
"
+
1.0;
"\$foo
=
1
+
\"10.0
pigs
\"
+
1.0
\$foo
être
type
float
(11)<br>";
?>
php
mettre
deux
fonction
à
disposition
pour
traiter
type
de
variables
fonction
gettype()
settype().
fonction
gettype()
déterminer
type
de
donnée
de
variable
renvoyer
l’une
valeur
suivantes
:
•
"integer"
;
•
"double"
;
•
"string"
;
•
"array"
;
•
"object"
;
•
"class"
;
•
"unknown
type"
;
fonction
settype()
définir
type
d’une
variable
de
façon
explicite,
type
pouvoir
être
défini,
renvoyer
valeur
false.
exemple
:
<?php
$var
=
11.2;
//
$var
être
double
echo
"\$var
=
$var
type
de
\$var
être
";
echo
gettype($var);
echo
"<br>";
//
affiche
:
$var
=
11.2
type
de
$var
être
double
$var
=
(int)$var;
//
$var
être
entier
de
valeur
11
echo
"\$var
=
$var
type
de
\$var
être
";
echo
gettype($var);
echo
"<br>";
//
affiche
:
$var
=
11
type
de
$var
être
integer
$var
=
(double)$var;
//
$var
être
de
nouveau
double
de
valeur
11.0
echo
"\$var
=
$var
type
de
\$var
être
";
echo
gettype($var);
echo
"<br>";
//
affiche
:
$var
=
11
type
de
$var
être
double
$var
=
(string)$var;
//
$var
être
chaîne
de
caractère
de
valeur
"11.0"
daniel
hadjadj
daniel
©
dahadjadj@free.fr
-
2005
-
page
24

cours
d’initiation
php
echo
"\$var
=
$var
type
de
\$var
être
";
echo
gettype($var);
echo
"<br>";
//
affiche
:
$var
=
11
type
de
$var
être
string
?>
exercice
:
(voir
annexe
transtypage
exercice
1).
déclarer
deux
variables
php
affecter
valeur
de
nom
prénom
puis,
générer
à
l'aide
de
php
texte
suivant,
présenter
prénom
être
"votre
prénom"!
!
(déja
voir
à
l'exercice
3
chapitre
"
traitement
variables
dans
chaînes")
afficher
ensuite,
type
de
variable.
exercice
:
(voir
annexe
transtypage
exercice
2).
variables
$var1=1000,
$var2=6.55957,
$var3=
‘1’’,
$var4=array()
créer
page
php
d’afficher
variables
type,
convertisser
$var1
en
type
"double",
$var2
en
type
"integer",
$var3
en
type
"double"
$var4
en
type
"integer".
daniel
hadjadj
daniel
©
dahadjadj@free.fr
-
2005
-
page
25

cours
d’initiation
php
variables
super
global
variables
être
'superglobal',
globale
automatique.
signifier
qu'elles
être
disponible
dans
contexte
d'exécution
(fonctions
méthodes).
n'avez
besoin
de
déclarer
global
accéder.
information
retrouver
grace
à
fonction
phpinfo()
voir
paragraphe
"test
de
configuration"
chapitre
"installation".
$globals
contenir
référence
sur
variable
être
disponible
dans
l'environnement
d'exécution
global.
clé
de
tableau
être
nom
variables
globales.
$_server
variables
fournir
par
serveur
web,
lier
à
l'environnement
d'exécution
script
courant.
l'ancienne
version
$http_server_vars
contenir
mêmes
informations,
n'est
auto
globale.
$_get
variables
fournir
par
protocole
http
en
méthode
get.
l'ancienne
version
$http_get_vars
contenir
mêmes
informations,
n'est
auto
globale.
$_post
variables
fournir
par
protocole
http
en
méthode
post.
l'ancienne
version
$http_post_vars
contenir
mêmes
informations,
n'est
auto
globale.
$_cookie
variables
fournir
par
protocole
http,
dans
cookies.
l'ancienne
version
$http_cookie_vars
contenir
mêmes
informations,
n'est
auto
globale.
$_files
variables
fournir
par
protocole
http,
suite
à
téléchargement
de
fichier.
l'ancienne
version
$http_post_files
contenir
mêmes
informations,
n'est
auto
globale.
voir
téléchargement
par
méthode
post
,pour
d'informations.
$_env
variables
fournir
par
l'environnement.
l'ancienne
version
$http_env_vars
contenir
mêmes
informations,
n'est
auto
globale.
$_request
variables
fournir
script
par
n'importe
mécanisme
d'entrée
devoir
recevoir
confiance
limitée.
tableau
associatif
constituer
contenu
variables
$_get,
$_post,
$_cookie,
$_files.
note
:
exécuter
script
en
ligne
de
commande,
variable
aller
inclure
variables
argv
argc
.
être
présentes
dans
variable
$_server
.
présence
valeur
entrée
de
tableau
être
régler
par
directive
variables_order
.
tableau
n'est
l'évolution
d'aucune
variable
d'avant
php
4.1.0.
$_session
variables
être
enregistrer
dans
session
attacher
script.
l'ancienne
version
$http_env_vars
contenir
mêmes
informations,
n'est
auto
globale.
voir
chapitre
pour
d'informations.
préciser
variables
super
global
être
faire
tableaux.
daniel
hadjadj
daniel
©
dahadjadj@free.fr
-
2005
-
page
26

cours
d’initiation
php
4.3.
opérateur
opérateur
servir
à
déterminer
valeur
en
effectuer
opération
sur
variables.
opérateur
de
php
être
similaires
à
de
c,
de
perl.
opérateur
arithmétiques
rappelez_vous
opération
élémentaires
apprendre
à
l'écoles
?
exemple
nom
résultat
$a
+
$b
addition
somme
de
$a
$b.
$a
-
$b
soustraction
différence
de
$a
$b.
$a
*
$b
multiplication
produire
de
$a
$b.
$a
/
$b
division
quotient
de
$a
$b.
$a
%
$b
modulo
reste
de
$a
diviser
par
$b.
l’opérateur
d’affectation
l’opérateur
«
=
»
permettre
d’affecter
valeur
à
un
variable.
variable
situer
à
gauche
signe
«
=
»
voir
affecter
valeur
situer
à
droite
signe
«
=
».
c’est
l’expression
:
$b
=
$a
+
5
;
signifier
valeur
de
variable
$a
être
augmenter
de
cinq
ranger
dans
variable
$b.
php
permettre
affectation
multiples.
ainsi,
avoir
droit
d’écrire
:
$a
=$b
=
$c
=
2;
variable
$a,
$b
$c
contenir
trois
valeur
propriété
être
valable
pour
tableaux.
devoir
confondre
opérateur
d’affectation
avec
l’opérateur
de
comparaison
"
==
".
l’opérateur
de
concaténation
point
«
.
»
être
utiliser
en
php
opérateur
de
concaténation
pour
fusionner
chaîne
en
seule.
exemple
:
<?php
$nom
=
"durand";
$prenom
=
"pierre";
$personne
=
$prenom."
".$nom;
echo
echo
echo
echo
$personne."<br>";
"martine
".$nom."<br>";
"affiche
:
pierre
durand<br>";
"affiche
martine
durand";
?>
exercice
:
(voir
annexe
l’opérateur
de
concaténation).
déclarer
variable
affecter
valeur
de
prénom
autre
pour
nom,
générer
à
l’aide
de
php
de
l’opérateur
de
concaténation
texte
suivant,
présenter
prénom
être
"votre
variable
prénom
variable
nom"!
!
même
texte
à
l’aide
de
javascript.
l’opérateur
arobase
opérateur
pouvoir
intervenir
devant
nom
de
fonction.
interdire
à
php
d’afficher
éventuel
message
d’erreur
cours
de
l’exécution
de
fonction.
appartenir
dé
programmeur
de
prendre
disposition
nécessaires
(
par
exemple,
en
tester
valeur
de
retour
de
fonction).
daniel
hadjadj
daniel
©
dahadjadj@free.fr
-
2005
-
page
27

cours
d’initiation
php
opérateur
de
comparaison
opérateur
de
comparaison,
nom
l'indique,
permettre
de
comparer
deux
valeurs.
exemple
nom
résultat
$a
==
$b
egal
vrai
$a
être
égal
à
$b.
$a
===
$b
identique
vrai
$a
être
égal
à
$b
qu'ils
être
de
même
type
(php4
seulement).
$a!
!=
$b
différent
vrai
$a
être
différent
de
$b.
$a
<
$b
petit
vrai
$a
être
petit
$b.
$a
>
$b
grand
vrai
$a
être
grand
$b.
inférieur
$a
<=
$b
vrai
$a
être
petit
égal
à
$b.
égal
supérieur
$a
>=
$b
vrai
$a
être
grand
égal
à
$b.
égal
opérateur
logiques
exemple
$a
and
$b
$a
or
$b
$a
xor
$b
!
!$a
$a
&&
$b
$a
||
$b
nom
(and)
(or)
xor(or)
(not)
(and)
(or)
résultat
vrai
$a
$b
être
vrais.
vrai
$a
$b
être
vrai
vrai
$a
$b
être
vrai,
deux
en
même
temps.
vrai
$a
être
faux.
vrai
$a
$b
être
vrais.
vrai
$a
$b
être
vrai.
opérateur
d'incrémentation
example
++$a
$a++
--$a
$a--
name
pre-increment
post-increment
pre-decrement
post-decrement
effect
incrémenter
$a
de
un,
renvoi
$a.
renvoi
$a,
incrémenter
$a
de
un.
décrément
$a
de
un,
renvoi
$a.
renvoi
$a,
décrémente
$a
de
un.
raccourci
d’affectation
de
variables
être
possible
en
php
d’utiliser
raccourci
d’opérateurs
premier
opérande
être
variable
résultat
être
stocker
dans
variable.
exemple
$ma_variable
+=
$i
$ma_variable
-=
$i
$ma_variable
*=
$i
$ma_variable
/=
$i
$ma_variable
%=
$i
$ma_variable
.=
$i
$ma_variable
++
$ma_variable
--
daniel
hadjadj
daniel
equivaut
à
$ma_variable
=
$ma_variable
+
$i
$ma_variable
=
$ma_variable
-
$i
$ma_variable
=
$ma_variable
*
$i
$ma_variable
=
$ma_variable
/
$i
$ma_variable
=
$ma_variable
%
$i
$ma_variable
=
$ma_variable
+
$i
$ma_variable
=
$ma_variable
+
1
$ma_variable
=
$ma_variable
-
1
©
dahadjadj@free.fr
-
2005
-
page
28

cours
d’initiation
php
4.4.
instruction
instruction
conditionnelles
instruction
conditionnelles
indiquer
à
programme
qu’une
décision
devoir
être
prendre
forme
générale
de
instruction
être
suivante
:
structure
de
if
if
(condition)
{
bloc
d’instructions
…
}
exemple
:
<?php
$prix=10;
if
(
$prix
>
1000
)
{
$remise
=
10
;
$frais_de_port
=
0
;
}
?>
être
possible
d’imbriquer
instruction
if
dans
autre.
exemple
:
<?php
$prix=110;
if
(
$prix
<
1000
)
{
if($prix>100)
{
$remise
=
10
;
$frais_de_port
=
0
;
}
}
?>
exercice
:
(voir
annexe
instruction
conditionnelles
exercice
1
).
initialiser
variable
$civ
à
‘mme’
être
dame,
‘mlle’
être
demoiselle
à
‘m’
être
homme.
créer
variables
$prenom
$nom
affecter
valeur
de
choix
.
tester
variable
$civ
d’afficher
dans
page
php
l’une
phrase
suivantes
correspondre
à
sexe
:
bonjour
madame
$prénom
$nom.
bonjour
mademoiselle
$prénom
$nom.
bonjour
monsieur
$prénom
$nom.
branchement
conditionnel
:
mot
clé
«
else
»
«
elseif
»
structure
de
else
if
(condition)
{
condition
être
vérifier
exécution
de
bloc
d’instructions
…
}
else
{
condition
n’est
vérifier
exécution
de
bloc
d’instructions
…
}
else
permettre
d’exécuter
second
bloc
d’instructions
condition
tester
n’est
vérifiée.
exploiter
deux
possibilité
logiques.
daniel
hadjadj
daniel
©
dahadjadj@free.fr
-
2005
-
page
29

cours
d’initiation
php
exemple
:
<?php
$prix=10;
if
(
$prix
>
1000
)
{
$remise
=
10
;
$frais_de_port
=
0
;
}
else
{
$remise
=
5
;
$frais_de_port
=
50
;
}
?>
exercice
:
(voir
annexe
instruction
conditionnelles
exercice
2
).
reprendre
l’exercice
précédent
ajouter
else
afficher
‘’j’ai
doute
sur
genre.’’,
variable
$civ
n’est
vérifié.
elsif
permettre
de
cascader
tests.
règles
d’emploi
être
inspirer
de
deux
précédentes.
structure
de
elseif
if
(condition)
{
condition
être
vérifier
exécution
de
bloc
d’instructions
…
}
elseif(condition)
{
condition
être
vérifier
exécution
de
bloc
d’instructions
…
}
elseif(condition)
{
condition
être
vérifier
exécution
de
bloc
d’instructions
…
}
l'expression
elseif
être
exécuter
if
précédent
autre
elseif
précédent
être
évaluer
faux
(false),
elseif
être
évaluer
à
vrai
(true).
exemple
:
<?php
$prix=1020;
if
(
$prix
<
1000
)
{
$remise
=
0
;
$frais_de_port
=
50
}
elseif
(
$prix
=
1000
{
$remise
=
5
;
$frais_de_port
=
10
}
elseif
(
$prix
>
1000
{
$remise
=
10
;
$frais_de_port
=
50
}
?>
;
)
;
)
;
exercice
:
(voir
annexe
instruction
conditionnelles
exercice
3).
centre
de
formation
dispenser
10
cours
différents
stagiaire
de
entreprise.
5
cours
principaux
5
facultatifs.
selon
réglementation
stagiaire
pouvoir
s’inscrire
qu’a
deux
cours
principaux
maximum
deux
cours
facultatifs
maximum
à
condition
qu’il
suivre
cour
principal.
secrétariat
de
centre,
charger
d’adresser
courrier
à
stagiaire,
disposer
pour
envoyer
courrier
de
trois
lettre
typer
lettre
de
conseiller
(lettre
type
conseille)
lettre
de
confirmation
(lettre
type
confirmation)
lettre
de
rappel
de
réglementation,
demander
stagiaire
de
restreindre
choix
(lettre
type
interdit)
daniel
hadjadj
daniel
©
dahadjadj@free.fr
-
2005
-
page
30

cours
d’initiation
php
courrier
personnaliser
être
envoyer
à
stagiaire
à
réglementation,
selon
cas
de
figure
suivre
:
stagiaire
s’inscrit
à
cour
principal
alors,
adresser
lettre
de
conseille.
stagiaire
s’inscrit
qu’à
cours
principal
alors,
adresser
lettre
de
conseille.
stagiaire
s’inscrit
à
deux
cours
principaux
alors,
adresser
lettre
de
confirmation.
stagiaire
s’inscrit
à
de
deux
cours
principaux
à
de
deux
cours
facultatifs
alors,
adresser
lettre
d
‘interdiction.
ecrivez
programme
en
php
permettre
d’afficher
lettre
type
correspondre
à
situation
stagiaire
avoir
prendre
soin
de
vérifier
préalable
civilité
stagiaire.
disposer
quatre
variables
suivantes
pour
aider
:
$prenom
:
prendre
valeur
de
choix
$nom
:
prendre
valeur
de
choix
$civ
:
pouvoir
prendre
l'une
valeur
suivantes
:
"0"
pour
madame,
"1"
pour
mademoiselle,
"2"
pour
monsieur.
$ncours
nombre
de
cours
principaux
pouvoir
prendre
valeur
de
0
à
$ncoursf
nombre
de
cours
facultatifs
pouvoir
prendre
valeur
de
0
à
5.
daniel
hadjadj
daniel
©
dahadjadj@free.fr
-
2005
-
page
31

cours
d’initiation
php
instruction
«
switch
»
instruction
permettre
de
réaliser
aiguillage
multidirectionnel.
structure
de
switch
switch
(variable)
{
caser
valeur
1
:
bloc
d’instructions
1
break;
caser
valeur
2
:
bloc
d’instructions
2
break;
caser
valeur
n
:
bloc
d’instructions
n
default
}
:
dernier
bloc
d’instructions
case
spécial
default
être
utiliser
case
avoir
échoués.
devoir
être
dernier
cas
listé.
exemple
:
<?php
//dans
liste
déroulante
proposer
gens
différents
choix
de
pays,
//chaque
choix
$liste
avoir
pour
valeur
a,
b,
c
renvoyer
à
page
//suivante
contenir
script
:
$liste=array();
switch
($liste)
{
case
"a":
echo
"vous
habiter
en
france";
break;
caser
"b":
echo
"vous
habiter
en
allemagne";
break;
caser
"c":
echo
"vous
habiter
en
espagne";
break;
default
:
echo
"votre
pays
n'est
connu";
}
?>
exercice
:
(voir
annexe
instruction
conditionnelles
exercice
4).
reprendre
l’exercice
1
de
chapitre
afficher
page
en
utiliser
l’instruction
"switch".
boucle
boucle
while
do…while
boucle
while
exécuter
bloc
d’instruction
l'expression
de
boucle
while
être
vérifier
(évaluée
true).
valeur
de
l'expression
être
vérifier
à
début
de
boucle,
et,
valeur
changer
durant
l'exécution
de
l'instruction,
l'exécution
s'arrêtera
qu'à
fin
de
l'itération
(chaque
fois
php
exécuter
l'instruction,
appeler
un
itération).
l'expression
while
n’est
vérifier
(évaluée
false)
avant
premier
itération,
l'instruction
être
exécutée.
structure
de
boucle
while
while
(condition)
{
bloc
d’instructions…
}
exemple
:
<?php
$num
=
1;
while
($num
<=
5)
{
echo
$num."<br>";
//
afficher
chiffre
de
1
à
5
$num++;
daniel
hadjadj
daniel
©
dahadjadj@free.fr
-
2005
-
page
32

cours
d’initiation
php
}
?>
exercice
:
(voir
annexe
boucle
exercice
1)
tableau
mois
de
l’année
:
$mois=array('janvier','février','mars','avril','mai','juin','juillet
','aôut','septembre','octobre','novembre','décembre');créer
page
php
afficher
douze
mois
de
l’année
à
l’aide
de
l’instruction
while.
boucle
do
…
while
être
similaire
à
boucle
while
:
condition
être
vérifier
à
fin
de
itération,
début,
s’exécute
fois.
structure
de
boucle
do
while
do
{
bloc
d’instructions…
}
while
($num
<
6)
exemple
:
<?php
$num
=
1;
do
{
echo
$num."<br>";
$num++;
}
while
($num
<
6)
//
afficher
chiffre
de
1
à
5
?>
exercice
:
(voir
annexe
boucle
exercice
2)
reprendre
l’exercice
précédent
créer
page
php
afficher
mois
de
juin
à
l’aide
de
l’instruction
do
while.
boucle
«
for
»
type
de
boucle
for
while
être
équivalentes.
utiliser
boucle
for
nombre
de
répétition
être
prédéfini.
structure
de
boucle
for
for
(expression1
;
condition
;
expression2)
{
bloc
d’instructions…
}
exemple
:
<?php
for
($i
=
1
;
$i
<=
5
;
$i++)
{
echo
$i."<br>";
//
afficher
chiffre
de
1
à
5
}
?>
exercice
:
(voir
annexe
boucle
exercice
3)
reprendre
l’exercice
1
de
chapitre
créer
page
php
afficher
douze
mois
de
l’année
à
l’aide
de
boucle
for.
voir
autres
boucle
(foreach,
list
each)
chapitre
concerner
tableaux.
daniel
hadjadj
daniel
©
dahadjadj@free.fr
-
2005
-
page
33

cours
d’initiation
php
4.5.
tableau
avoir
aborder
tableaux,
aller
voir
possibilités.
tableau
être
série
de
variables
avoir
même
nom.
constituant
tableau
être
appeler
élément.
élément
d’un
tableau
être
associer
de
manière
unique
à
entier.
grâce
à
entier,
appelé
index
indice
clé,
être
possible
d'accéder
à
élément
d'un
tableau
s'il
s'agissait
d'une
variable
normale.
accéder
à
élément
tableau
en
utiliser
crochet
[
]
contenir
l’index.
entiers
indexer
tableau
avoir
obligation
de
suivre.
l'index
être
manquant,
php
utiliser
index
grand
index
exister
incrémenter
de
sommer
tenir
de
déclarer
être
avant
d’initialiser
tableau,
élément
créer
à
volée.
pouvoir
affecter
valeur
élément
tableau
de
même
façon
pour
autre
variable.
pouvoir
initialiser
tableau
de
deux
manière
différentes.
structure
d’un
tableau
nomtableau[]
=
valeur
;
nomtableau
=
array(
indicer
valeur,
indice
=>
valeur,…)
exemple
:
<?php
$auteur[]=
"molière";
$auteur[]=
"franz
kafka";
$auteur[]=
"albert
camus";
echo
$auteur[0]."<br>";
//affiche
molière
echo
$auteur[1]."<br>";
//affiche
franz
kafka
echo
$auteur[2]."<br>";
//affiche
albert
camus
?>
à
l’aide
de
fonction
array().
<?php
$auteur
=
?>
array("molière",
"franz
kafka",
"albert
camus");
dans
exemple
l’indice
n’ayant
être
renseigné,
php
s’en
charge,
valeur
"molière",
"franz
kafka",
"albert
camus"
prendre
valeur
0,
1,
2.
pouvoir
spécifier
indice
tableaux.
<?php
$auteur[5]=
"molière";
$auteur[7]=
"franz
kafka";
$auteur[12]=
"albert
camus";
echo
$auteur[5]."<br>";
//affiche
molière
echo
$auteur[7]."<br>";
//affiche
franz
kafka
echo
$auteur[12]."<br>";
//affiche
albert
camus
?>
<?php
$auteur=array(5
=>
"molière",
7
=>
"franz
kafka",
12
=>
"albert
camus");
echo
$auteur[5]."<br>";
//affiche
molière
echo
$auteur[7]."<br>";
//affiche
franz
kafka
echo
$auteur[12]."<br>";
//affiche
albert
camus
?>
dans
exemple
l’indice
avoir
être
renseigné,
valeur
"molière",
"franz
kafka",
"albert
camus"
prendre
valeur
5,
7,
@ord@
exercice
:
(voir
annexe
tableau
exercice
1).
tableau
mois
de
l’année
:
$mois=array('janvier','février','mars','avril','mai','juin','juillet','aôu
t','septembre','octobre','novembre','décembre');
afficher
mois
de
juillet
à
partir
tableau
mois
de
l’année
sans
utiliser
de
boucle.
daniel
hadjadj
daniel
©
dahadjadj@free.fr
-
2005
-
page
34

cours
d’initiation
php
fonction
de
traitement
de
tableau
php
offrir
de
nombreuses
fonction
pour
manipuler
tableau
(reportez
à
documentation
pour
liste
complète
fonction
de
tableaux.
en
un
:
array()
;
count($tableau)
;
reset($tableau)
;
end($tableau);
current($tableau);
next($tableau);
prev($tableau);
extract($tableau)
;
créer
tableau
renvoi
nombre
d’éléments
tableau
retourner
premier
élément
tableau
positionner
dernière
élément
tableau
renvoi
l’élément
en
cour
tableau
positionner
sur
l’élément
suivre
tableau
positionner
sur
l’élément
précédent
tableau
importer
variables
dans
table
symbole
à
partir
d’un
tableau.(
attention
traitement
collisions)
in_array($tableau)
;
renvoi
true
valeur
appartenir
à
tableau
array_search()
;
rechercher
élément
dans
tableau
renvoi
clé
s’il
exister
array_keys($tableau,$chaine);
renvoi
clé
d’un
tableau
array_diff($tableau1,
$tableau2)
;
créer
tableau
contenir
élément
premier
tableau
être
dans
second
array_push(($tableau,$chaine)
;ajoute
élément
à
fin
d'un
tableau
print_r($tableau)
;
afficher
tableau
dans
format
montrer
clé
valeurs.
parcourir
tableau
avec
boucle
pouvoir
passer
en
revue
tableau
avec
boucle
for,
list
each
foreach
:
pour
utiliser
boucle
for
nombre
de
répétition
devoir
être
prédéfini.
pour
faire
utiliser
fonction
count()
renvoi
nombre
d’éléments
tableau
:
exemple
:
<?php
$tableau
=array('bleu','rouge','vert','violet','jaune');
for
($i
=
0
;
$i
<
count($tableau)
;
$i++)
{
echo
"clé
=
".$i."
valeur
=
".$tableau[$i]."<br>";
}
?>
list
each
list
array(),
list()
n'est
véritable
fonction,
construction
syntaxique,
permettre
d'assigner
série
de
variables
en
seule
ligne
each
each()
retourner
paire
clé-valeur
courante
tableau
array
avancer
pointeur
de
tableau.
paire
être
retourner
dans
tableau
de
4
éléments,
avec
clé
0,
1,
key,
value.
élément
0
key
contenir
nom
de
clé
et,
1
value
contenir
valeur.
pointeur
interne
de
fichier
être
de
fin
tableau,
each()
retourner
false
rester
dans
position,
signifier
devoir
utiliser
reset()
avant
de
réutiliser
tableau.
exemple
:
<?php
$couleurs=array('bleu','rouge','vert','violet','jaune');
reset($couleurs);
while(list
($cle,
$valeur)
=
each
($couleurs))
{
echo
"$cle
=>
$valeur<br>";
}
?>
exercice
:
(voir
annexe
tableau
exercice
2).
dans
page
php,
créer
tableau
contenir
voyelle
afficher
à
l’aide
de
l’instruction
list
each.
exercice
:
(voir
annexe
tableau
exercice
3).
dans
page
php
construiser
tableau
$list_stagiaire,
contenir
élément
suivants
afficher
liste
à
l’aide
de
boucle
list
each:
"madame"
"durant"
daniel
hadjadj
daniel
©
dahadjadj@free.fr
-
2005
-
page
35

cours
d’initiation
php
"mademoiselle"
"dupré"
"alain"
"monsieur"
"camus"
"mon
ami"
"jean-marc"
foreach
php
4
avoir
faire
évoluer
boucle
for,
boucle
″foreach″.
boucle
″foreach″
permettre
de
parcourir
tableau
contenir
nombre
inconnu
d’éléments,
effectuer
itération
jusqu’a
fin
tableau.
prendre
deux
formes.
premier
:
structure
de
boucle
foreach
foreach($nomtableau
avoir
$elementtableau)
{
instruction
avoir
exécuter…
}
exemple
:
<?php
$couleurs=array('bleu','rouge','vert','violet','jaune');
foreach($couleurs
avoir
$elementtableau)
{
echo
$elementtableau
."<br>";
}
?>
second
:
structure
de
boucle
foreach
foreach($nomtableau
avoir
$valeurindice
=>
$elementtableau)
{
instruction
avoir
exécuter…
}
second
forme
être
identique
à
premier
sauf
qu’elle
mettre
avoir
disposition
valeur
d’indice
tableau.
exemple
:
<?php
$couleurs=array('bleu','rouge','vert','violet','jaune');
foreach($couleurs
avoir
$valeurindice
=>
$elementtableau)
{
echo
"$valeurindice
=
$elementtableau
<br>";
}
?>
foreach
démarre,
pointeur
interne
de
fichier
être
ramener
premier
élément
tableau.
signifier
n'aurez
à
faire
appel
à
reset()
avant
foreach.
exercice
:
(voir
annexe
tableau
exercice
4).
créer
page
php
afficher
élément
contenir
dans
variable
global
$_server
en
utiliser
foreach
.
exercice
:
(voir
annexe
tableau
exercice
5).
reprendre
tableau
$list_stagiaire
de
l’exercice
3
chapitre
"les
tableaux"
créer
à
l’aide
d’une
fonction
php
prédéfinie,
page
php
permettre
d’afficher
liste.
rechercher
madame
durant
monsieur
dupont
faire
parier
de
liste
indiquer
pour
chacun,
par
phrase,
s’il
avoir
être
contacter
par
courrier.
daniel
hadjadj
daniel
©
dahadjadj@free.fr
-
2005
-
page
36

cours
d’initiation
php
tableau
multidimensionnels
tableau
multidimensionnel
être
tableau
composer
de
tableaux,
pouvoir
imbriquer
tableau
php
manquer
de
mémoire.
définition
d’un
tableau
multidimensionnel
dans
forme
générale
présenter
de
manière
suivante:
structurer
d’un
tableau
multidimensionnel
nomtableau
=
array(
indice
=>
array(contenu
tableau),
indice
=>
array(contenu
tableau),…)
exemple
:
<?php
$animaux=array("poisonns"
=>
array("sole",
"merlan",
"colin","sardine"),
"serpents"
=>
array("orvet","couleuvre"),
"oiseaux"
=>
array("merle",
"serin",
"pie")
);
//ou
$poisonns
=
array("sole",
"merlan",
"colin",
"sardine");
$serpents
=
array("orvet","couleuvre");
$oiseaux
=
array("merle",
"serin",
"pie");
$animaux=array("poisonns"
=>$poisonns,
"serpents"
=>
$serpents,
"oiseaux"
=>
$oiseaux
);
echo
"l'élément
\$animaux['oiseaux'][1]
valoir
:
".$animaux['oiseaux'][1];
?>
exercice
:
(voir
annexe
tableau
multidimensionnels
exercice
1).
avec
liste
stagiaire
:
madame
durant,
mademoiselle
dupré,
père
alain,
monsieur
camus,
jean-marc
leblanc,
savoir
madame
durant
être
domicilier
21,
rue
georges
brassens
son
n°
de
téléphone
être
:
01
42
44
12
30
mademoiselle
"dupré
être
domicilier
54,
rue
jacques
brel
son
n°
de
téléphone
être
:
01
14
42
32
40
père
alain
être
domicilier
13,
rue
saint
père
son
n°
de
téléphone
être
:
01
52
64
72
80
monsieur
camus
être
domicilier
79,
rue
scribe
son
n°
de
téléphone
être
:
01
62
73
82
90
jean-marc
leblanc
être
domicilier
rue
blanc
manteau
son
n°
de
téléphone
être
:
01
02
14
22
40
dans
page
php,
construiser
tableau
multidimensionnel
de
liste
stagiaires,
adresse
n°
de
téléphone
($annuaire_stagiaires),
afficher
liste
de
stagiaire
accompagner
dessous
de
adresse.
exercice
:
(voir
annexe
tableau
multidimensionnels
exercice
2).
avec
liste
stagiaire
:
madame
durant,
mademoiselle
dupré,
père
alain,
monsieur
camus,
jean-marc
leblanc,
savoir
madame
durant
être
domicilier
21,
rue
georges
brassens
94000
créteil
mademoiselle
"dupré
être
domicilier
54,
rue
jacques
brel
75000
paris
père
alain
être
domicilier
13,
rue
saint
père
93000
saint-denis
monsieur
camus
être
domicilier
79,
rue
scribe
92160
antony
jean-marc
leblanc
être
domicilier
rue
blanc
manteau
91000
montfermeil
construiser
tableau
multidimensionnel
de
liste
stagiaire
adresse
($annuaire_stagiaires),
créer
page
php
afficher
liste
de
stagiaire
accompagner
dessous
de
adresse
en
afficher
sur
même
ligne
code
postal
ville.
exercice
:
(voir
annexe
tableau
multidimensionnels
exercice
3).
avec
liste
stagiaire
:
madame
durant,
mademoiselle
dupré,
père
alain,
monsieur
camus,
jean-marc
leblanc,
savoir
madame
durant
être
domicilier
21,
rue
georges
brassens
94000
créteil
daniel
hadjadj
daniel
©
dahadjadj@free.fr
-
2005
-
page
37

cours
d’initiation
php
mademoiselle
"dupré
être
domicilier
54,
rue
jacques
brel
75000
paris
père
alain
être
domicilier
13,
rue
saint
père
93000
saint-denis
monsieur
camus
être
domicilier
79,
rue
scribe
92160
antony
jean-marc
leblanc
être
domicilier
rue
blanc
manteau
91000
montfermeil
liste
inscrit
cours
suivants
:
inscrire
cours
de
mathématique
:
"madame
durant"
"monsieur
camus"
inscrire
cours
de
physique
:
"mademoiselle
dupré"
"père
alain"
inscrire
cours
de
français
:
"jean-marc
leblanc",
"mademoiselle
dupré"
"monsieur
camus".
dans
page
php,
construiser
deux
tableau
multidimensionnels,
un
pour
liste
stagiaire
avec
adresse
($annuaire_stagiaires
)
pour
liste
cours
avec
stagiaires
inscrit
($cours_stagiaires),
afficher
liste
de
cours
stagiaire
inscrire
accompagner
dessous
de
adresse
en
afficher
sur
même
ligne
code
postal
ville.
daniel
hadjadj
daniel
©
dahadjadj@free.fr
-
2005
-
page
38

cours
d’initiation
php
tri
de
tableau
php
mettre
à
disposition
fonction
de
tri
en
un
:
sortir
()
;
asort()
;
rsort()
;
arsort
;
ksort()
;
krsort()
;
trier
tableau
maintenir
l'association
index,
supprimer
clé
existantes,
réordonner
pas.
trier
tableau
maintenir
l'association
index
comporter
de
même
façon
sort()
rsort(),
sauf
qu’elles
renvoyer
tableau
dans
ordre
inversé.
comporter
de
même
façon
sort()
rsort(),
sauf
qu’elles
renvoyer
tableau
trier
dans
l’ordre
alphabétique
de
indice
de
chaîne.
exemple
de
différent
tri
tableau
$fruits
:
$fruits
=
array("d"=>"papaye","a"=>"orange","b"=>"banane","c"=>"ananas");
avant
tri
:
d:
papaye
a:
oranger
b:
banane
c:
ananas
avant
tri
d:
papaye
a:
oranger
b:
banane
c:
ananas
après
tri
:
exemple
de
tri
avec
sort()
0:
ananas
sort($fruits);
tri
tableau
dans
l'ordre
alphabétique
valeur
1:
banane
réordonner
indice
2:
orange
3:
papaye
après
tri
exemple
de
tri
avec
asort()
c:
ananas
asort($fruits);
tri
tableau
dans
l'ordre
alphabétique
valeur
b:
banane
maintenir
l'association
index
a:
oranger
d:
papaye
avant
tri
:
d:
papaye
a:
oranger
b:
banane
c:
ananas
après
tri
:
exemple
de
tri
avec
rsort()
rsort($fruits);
tri
tableau
dans
l'ordre
alphabétique
inverse
valeur
réordonner
indice
avant
tri
d:
papaye
a:
oranger
b:
banane
c:
ananas
après
tri
exemple
de
tri
avec
arsort()
arsort($fruits);
tri
tableau
dans
l'ordre
alphabétique
inverse
valeur
maintenir
l'association
index
avant
tri
:
d:
papaye
a:
oranger
b:
banane
c:
ananas
d:
papaye
a:
oranger
b:
banane
c:
ananas
après
tri
:
exemple
de
tri
avec
ksort()
ksort($fruits);
tri
tableau
dans
l'ordre
alphabétique
de
indice
de
chaîne.
maintenir
l'association
indice
avant
tri
d:
papaye
a:
oranger
b:
banane
c:
ananas
0:
papaye
1:
orange
2:
banane
3:
ananas
a:
oranger
b:
banane
c:
ananas
d:
papaye
après
tri
exemple
de
tri
avec
krsort()
krsort($fruits);
tri
tableau
dans
l'ordre
alphabétique
inverse
de
indice
de
chaîne.
maintenir
l'association
indice
d:
papaye
c:
ananas
b:
banane
a:
orange
attention
tri
de
récupération
valeur
d’une
liste
par
indices.
daniel
hadjadj
daniel
©
dahadjadj@free.fr
-
2005
-
page
39

cours
d’initiation
php
exercice
:
(voir
annexe
tri
tableaux).
tableau
mois
de
l'année
:
$mois=array('janvier','février','mars','avril','mai','juin','juillet','aôut','septembre','octobre','novembre',
'décembre');
effectuer
tri
avec
fonction
de
tri
daniel
hadjadj
daniel
©
dahadjadj@free.fr
-
2005
-
page
40

cours
d’initiation
php
4.6.
fonction
fonction
être
section
de
code
définir
fois
pour
être
réutiliser
dans
d’autres
partir
programme.
permettre
d’écrire
application
modulaires
structurées.
fonction
pouvoir
prendre
valeur
d’entrée
appelées
arguments,
effectuer
opération
renvoyer
valeur.
transfert
valeur
d’arguments
dans
de
nouvelle
variables
appeler
paramètre
dernier
pouvoir
être
utiliser
à
l’intérieur
de
fonction.
exister
deux
type
de
fonction
:
fonction
prédéfinis
:
php
disposer
de
nombreuses.
fonction
utilisateurs
l’utilisateur
créer
lui-même.
fonction
prédéfinis
pouvoir
donner
qu’un
échantillon
succinct
nombreuses
fonction
de
php.
avoir
choisir
employées.
isset()
;
empty();
strtoupper()
;
strtolower()
;
ucfirst()
;
exit()
;
die()
;
unset();
renvoi
true
variable
à
été
définir
false
.
renvoi
true
variable
être
définir
vide
false.
renvoyer
chaîne
en
majuscules.
renvoyer
chaîne
en
minuscules.
mettre
premier
caractère
en
majuscule.
terminer
script
courant.
envoi
message
passer
en
argument
avant
de
terminer
script.
détruire
un
variable.
fonction
utilisateurs
fonction
pouvoir
être
définir
n’importe
dans
script,
qu’une
seul
fois.
pour
définir
fonction
devoir
donner
un
nom.
fonction
être
déclarer
à
l’aide
de
l’instruction
function,
selon
structure
suivante
:
structure
de
définition
d’une
fonction
function
nom_fonction
([arguments])
{
corps
de
fonction
}
mot-clé
return
mettre
fin
avoir
fonction,
vouloir
fonction
renvoi
valeur
placer
celle-ci
après
mot-clé
return
sur
dernière
ligne
de
fonction.
exemple
:
<?php
function
charge($salaire)
{
$salaire
=
$salaire
-
(($salaire/100)*20);
return
$salaire;
}
echo
charge(2000);
//affiche
1600
?>
pouvoir
fournir
paramètre
séparer
par
virgule
:
exemple
:
<?php
function
charge($salaire,
$tauxcharge)
{
$salaire
=
$salaire
-
(($salaire/100)*
$tauxcharge);
return
$salaire;
}
$salaire=2000;
$tauxcharge=20;
echo
charge($salaire,$tauxcharge)."<br>";
//affiche
1600
echo
$salaire;
//affiche
2000
?>
daniel
hadjadj
daniel
©
dahadjadj@free.fr
-
2005
-
page
41

cours
d’initiation
php
exercice
:
(voir
annexe
fonction
exercice
1).
dans
page
php,
déclarer
deux
variable
php
affecter
valeur
de
prénom
nom.
créer
fonction
get_msg($chaine,
$couleur),
renvoyer
chaîne
passer
en
paramètre
dans
couleur
différente,
passer
en
paramètre,
savoir
rouge=
"#ff0000",
bleu="#0000ff",
vert="#00ff00"
blanc="ffffff",
puis,
générer
texte
suivant,
présente<br>
m'appel
"votre
prénom"
"votre
nom"
avec
nom
en
rouge
prénom
vert.
même
texte
à
l'aide
de
javascript.
vérifier
en
appeler
fonction.
exister
autre
méthode
pour
passer
paramètre
à
fonction,
impliquer
valeur
modifier
à
l’intérieur
de
fonction
être
à
l’extérieur.
s’appelle
passer
argument
par
référence.
pour
indiquer
à
php
vouloir
utiliser
méthode,
devoir
ajouter
&
(
commerciale
)
début
de
variable
passée.
pouvoir
appeler
fonction
avec
paramètre
passer
par
référence,
méthode
n’est
valable
directive
«
allow_call_time_pass_reference
»
fichier
de
configuration
de
php
être
égale
à
on.
exemple
:
<?php
function
charge(&$salaire,
$tauxcharge)
{
$salaire
=
$salaire
-
(($salaire/100)*
$tauxcharge);
return
$salaire;
}
$salaire=2000;
$tauxcharge=20;
echo
$salaire."<br>";
//salaire
avant
fonction
afficher
2000
echo
charge($salaire,$tauxcharge)."<br>";
//affiche
1600
echo
$salaire;
//salaire
aprés
fonction
afficher
1600
?>
daniel
hadjadj
daniel
©
dahadjadj@free.fr
-
2005
-
page
42

cours
d’initiation
php
porter
variables
lorsqu’une
variable
être
créer
dans
page
php,
dire
qu’elle
à
durée
de
vie
identique
à
d’une
pager
web.
de
l’utilisation
d’une
variable
à
l’intérieur
d’une
fonction
durée
de
vie
être
égale
à
durée
de
vie
de
fonction,
c’est
à
dire
qu’elle
cesser
d’exister
dès
fonction
termine.
variables
déclarer
à
l’intérieur
d’une
fonction
être
dire
locales
être
visibles
(accessibles)
en
dehors
de
fonction.
exister
niveau
de
définition
de
variable
:
niveau
global,
permettre
à
variable
d'être
visible
dans
fonction
à
l'extérieur
de
fonction.
niveau
static
permettre
de
définir
variable
locale
à
fonction,
persister
durant
temps
d'exécution
script.
niveau
local,
utiliser
par
défaut,
permettre
de
définir
variable
locale
classique.
fonction
imbriquer
pouvoir
imbriquer
fonction
un
dans
autres,
attention
à
définir
fois
fonction.
exemple
:
<?php
echo
"si
vouloir
calculer
montant
de
retraite,
fois
charge
déduire
:<br>";
function
retraite($total,
$tauxcharge)
{
function
charge($salaire,
$tauxcharge)
{
return
$salaire
-
(($salaire/100)*
$tauxcharge);
}
$aprescharges
=
charge($total,$tauxcharge);
return
charge($total,$tauxcharge)
-
((
$aprescharges/100)*3);
}
$total=2000;
$tauxcharge=20;
echo
"total
=
".$total."<br>";
//affiche
total
=
2000
echo
"retraite
=
".retraite($total,$tauxcharge)."<br>";
//affiche
retraite
=
1552
echo
"aprescharges
=
".charge($total,$tauxcharge)."<br>";
//affiche
après
charge
=
1600
//
echo
"retraite
=
".retraite($total,$tauxcharge)."<br>";
//affiche
erreure
?>
vouloir
accéder
à
variable
situer
à
l’intérieur
d’une
fonction,
devoir
utiliser
l’instruction
global,
indiquer
à
php
n’est
nouvelle
variable
local
variable
global
pouvoir
être
utiliser
dans
script.
exemple
:
<?php
function
charge($salaire,
$tauxcharge)
{
global
$salaire;
$salaire
=4000;
$salaire
-=
(($salaire/100)*
$tauxcharge);
return
$salaire;
}
$salaire=2000;
$tauxcharge=20;
echo
$salaire."<br>";
//affiche
2000
echo
charge($salaire,$tauxcharge)."<br>";
//affiche
3200
echo
$salaire."<br>";
//affiche
3200
?>
exercice
:
(voir
annexe
fonction
exercice
2).
reprendre
tableau
stagiaires
($annuaire_stagiaires)
de
l’exercice
2
chapitre
tableau
multidimensionnel,
parcourrer
tableau
à
l’aide
d’une
boucler
pour
élément
tableau
appeler
fonction
(ajoute_stagiaire())
avoir
créer
afficher
nombre
de
stagiaires
femmes,
nombre
de
stagiaires
homme
nombre
total
de
stagiaires.
nb
:
aidez-vous
de
fonction
eregi(«
occurrence
à
rechercher
»,$chaine)
retourner
true
occurrence
avoir
être
trouver
dans
chaîne
false
dans
cas
contraire
daniel
hadjadj
daniel
©
dahadjadj@free.fr
-
2005
-
page
43

cours
d’initiation
php
exercice
:
(voir
annexe
fonction
exercice
3).
reprendre
l’exercice
2
ajouter
fonction
(moyenne_parité())qui
permettre
d’afficher
parité
hommes/femmes
sous
forme
de
moyenne
(%).
daniel
hadjadj
daniel
©
dahadjadj@free.fr
-
2005
-
page
44

cours
d’initiation
php
inclusion
avec
fonction
include()
require()
,
php
permettre
d’inclure
segment
de
code
de
texte
à
endroit
donner
d’une
page
web.
pouvoir
utiliser
fichier
inclure
pour
inclure
texte,
code
html
script
php.
c’est
de
façon
l’on
pouvoir
définir
élément
être
partager
par
page
d’un
site
web.
l’on
vouloir
modifier
l’un
d’entre
eux,
suffire
de
modifier
dans
fichier
être
définir
modification
être
répercuter
dans
script
inclure
fichier.
php
mettre
deux
instruction
à
disposition
pour
inclure
fichier
include
require
prennenet
forme
suivante
:
include(‘’monfichier’’)
;
require(‘’monfichier’’)
;
exemple
:
<?php
include("test.txt");
//ou
require("test.txt");
?>
depuis
version
4.3
de
php
deux
instruction
être
identiques,
hormis
dans
gestion
erreurs.
include()
produire
alerte
(warning)
require()
générer
erreur
fatale.
en
d'autres
termes,
n'hésitez
à
utiliser
require()
vouloir
qu'un
fichier
d'inclusion
manquant
interrompre
script.
include()
comporter
de
façon,
script
continuer
exécution.
exister
variante
instruction
include
require
,
s’agit
de
include_once
require_once
avoir
comportement
identique
hormis
qu’elle
s’exécute
qu’une
fois
dans
script.
instruction
être
utiliser
de
préférence
fichier
devoir
être
inclure
évaluer
fois
dans
script,
vouloir
être
sûr
qu'il
être
inclure
qu'une
seule
fois,
pour
éviter
redéfinition
de
fonction.
exercice
:
(voir
annexe
inclusion
exercice).
créer
fichier
php
"header.inc"
permettre
d’afficher
grâce
à
instruction
d’inclusion
message
de
bienvenue
sur
page.
daniel
hadjadj
daniel
©
dahadjadj@free.fr
-
2005
-
page
45

cours
d’initiation
php
5.
formulaire
formulaire
être
page
contenir
texte
encapsuler
dans
balise
html.
pouvoir
mettre
à
disposition
client
divers
élément
:
bouton
d’envoi,
lister
déroulante,
case
à
option,
bouton
radio
etc…
client
envoi
page
html
serveur,
celui-ci
transmettre
information
recueillir
à
php
traite
renvoi
dans
cadre
de
réponse
http
navigateur.
information
être
regrouper
à
l’aide
d’une
deux
méthodes,
méthode
"get"
méthode
"post".
balise
html
"<form>"
permettre
de
créer
formulaire,
posséder
de
nombreux
attributs,
en
l’occurrence
l’attribut
"method",
indiquer
à
php
méthode
à
utiliser
l’attribut
"action"
indiquer
serveur
à
qu’elle
pager
rendre
fois
l’utilisateur
avoir
cliquer
sur
bouton
envoi.
exemple
:
<form
action="form.php"
method="get">
directive
"register_globals
fichier
de
configuration
être
égale"
à
php
traiter
information
transmettre
par
client
en
transformer
valeur
de
l’attribut
name
élément
en
variable
en
affecter
valeur
de
l’attribut
"value".
exemple
:
<input
type="text"
value="mme
durant"
name="nom"
/>
variable
$nom
être
créer
valeur
"mme
durant"
être
affécté.
méthode
get
:
méthode
indique
navigateur
de
joindre
à
l’url
valeur
placer
par
l’utilisateur
dans
formulaire.
pour
faire
navigateur
ajouter
point
d’interrogation
à
fin
de
l’adresse
url,
paramètre
sous
forme
de
paires
nom=valeur
séparer
par
un
&
(et
commerciale).
exemple
:
http://localhost/coursphp/test.php?animal=chat&nom=minou
méthode
post:
s'il
être
inconvénient
l'on
pouvoir
reprocher
à
méthode
"get"
c'est
nature
publique
de
transmission.
vouloir
donnée
envoyées
apparaître
dans
l'url,
falloir
utiliser
méthode
"post".
celle-ci
fonctionner
méthode
"get"
à
différence
information
formulaire
être
envoyer
corps
de
requête
http
lieu
de
faire
partie
de
l'url.
signifier
qu'elles
être
visibles
il
de
dans
mesure
être
attacher
à
l'url.
méthode
"post"
permettre
transmission
d'un
grand
nombre
de
données.
notion
avoir
importance
avoir
limite
physique
à
quantité
de
donner
pouvoir
être
transmettre
dans
cadre
d'une
url.
l'utilisateur
envoi
formulaire
serveur,
php
recueillir
information
dans
variables
stock
dans
tableau
sous
forme
index/valeur
index
correspondre
nom
paramètre
valeur
à
valeur.
tableau
"$_get"
"$http_get_vars"
stock
information
recueillir
par
méthode
"get"
tableau
"$_post"
"$http_post_vars"
recueillir
avec
méthode
"post".
exemple
:
<html>
<head>
<title>exemple
de
formulaire</title>
<link
rel="stylesheet"
href="sga.css"
type="text/css"
/>
</head>
<body>
<form
action="form_get_resultat.php"
method="get">
merci
de
remplir
formulaire<br>
nom&nbsp;:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<input
type="text"
size="30"
maxlength="50"
name="nom"
/><br>
prénom&nbsp;:&nbsp;<input
type="text"
size="30"
maxlength="50"
name="prenom"
/><br>
daniel
hadjadj
daniel
©
dahadjadj@free.fr
-
2005
-
page
46

cours
d’initiation
php
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
<input
type="submit"
value="envoyer"
/>
</form>
</body>
</html>
exercice
:
(voir
annexe
formulaire
exercice
1).
créer
formulaire
montrer
figure
ci-dessous,
à
l’aide
d’une
boucler
afficher
dans
page
php
message
de
bienvenue
composer
élément
saisir
en
utiliser
méthode
get
méthode
post.
daniel
hadjadj
daniel
©
dahadjadj@free.fr
-
2005
-
page
47

cours
d’initiation
php
urlencode()
urldecode()
lorsqu’on
appeler
page
avec
méthode
get,
chaîne
de
caractère
être
abouter
à
l’url,
contenir
suite
de
couple
noms/valeurs
élément
formulaire
séparer
par
caractère
&.
suite
être
coder
de
façon
n’y
figurer
espace
(il
être
remplacer
par
«
+
»).
en
outre,
caractère
de
ponctuation
diacritiques
être
remplacer
par
code
ascii.
exemple
:
<?php
prenom=arthur-jérémie
cours[]=anglais
être
transmettre
dans
l'url
:
prenom=arthur-j%e9r£e9émie&cours%5b%5d=anglais
?>
grâce
fonction
urldecode
urlencode
pouvoir
transformer
chaîne
de
l’url
qu’elle
devenir
lisible.
urldecode()
décoder
séquence
%##
remplacer
par
valeur.
chaîne
décoder
être
retournée.
urlencode()
retourner
chaîne
caractère
alpha-numériques
(hormis
-_.)
être
remplacer
par
séquence
commencer
par
caractère
pourcentage
(%),
suivre
de
deux
chiffre
hexadécimaux.
espace
être
remplacer
par
signe
(+).
codage
être
être
utiliser
pour
poster
information
dans
formulaire
html.
exemple
:
commencer
par
récupérer
chaîne
de
l’url
trouver
dans
variable
global
$_server["query_string"],
appliquer
fonction
split
aller
récupérer
occurrence
de
chaîne
séparer
par
&
dans
tableau,
aller
isoler
nom
de
valeur
de
façon
classique
à
l’aide
de
boucle
while.
exemple
:
<?php
$a
=
split('&',
$_server["query_string"]);
$i
=
0;
while
($i
<
count
($a))
{
$b
=
spilt('=',
$a
[$i]);
echo
'la
valeur
paramètre
',
htmlspecialchars(urldecode($b
[0])),'
être
',
htmlspecialchars(urldecode($b[1])),
"<br>";
$i++;
}
?>
exercice
:
(voir
annexe
formulaire
exercice
2).
créer
formulaire
de
exemple,
à
l’aide
de
fonction
urldecode()
afficher
dans
page
php
message
de
bienvenue
composer
élément
saisis.
daniel
hadjadj
daniel
©
dahadjadj@free.fr
-
2005
-
page
48

cours
d’initiation
php
recupération
variables
aller
voir
sous
forme
d’exemples
d’exercices
contrôle
html
courants
manière
de
traiter
avec
php.
l’avons
vu,
l’utilisateur
clique
sur
bouton
"envoyer",
transmettre
serveur
http
formulaire
selon
méthode
mentionner
par
l’attribut
"method"
de
balise
"action",
puis,
php
interpréter
code
redirige
l’action
sur
page
mentionner
par
l’attribut
"action"
de
balise
"form".
après
l’analyse
de
page
(parser),
renvoi
réponse
à
l’utilisateur
via
serveur
http.
exercice
:
(voir
annexe
formulaire
exercice
3).
d’illustrer
mécanismes,
créer
formulaire
d’inscription
(voir
figurer
1)
en
html
récupérer
sur
autre
page
php
valeur
saisir
par
l’utilisateur,
en
utiliser
méthode
"get"
méthode
"post".
en
créer
deux
page
distinctes
obtenir
séparation
code
html
constituer
élément
d’interface
proposer
client
(ihm),
code
php
gérer
règles
de
gestion
(validations,
calculs,
contrôles,
etc…),
donner
meilleur
visibilité
faciliter
maintenance
l’on
pouvoir
intervenir
sur
l’interface
sans
modifier
code
voir
versa.
formulaire
d'inscription
nom
:
prénom
:
adresse
:
courriel
:
envoyer
figurer
1
daniel
hadjadj
daniel
©
dahadjadj@free.fr
-
2005
-
page
49

cours
d’initiation
php
contrôle
html
bouton
radio
bouton
radio
créer
avec
balise
html
:
<input
type="radio"
value=""
checked="checked"
name=""
>
pour
récupérer
valeur
d’un
groupe
de
bouton
radio,
falloir
bouton
radio
avoir
même
nom,
php
créer
qu’une
seule
variable
pouvoir
avoir
qu’une
seule
valeur
être
traiter
n’importe
qu’elle
autre
variable.
exercice
:
(voir
annexe
formulaire
exercice
4).
créer
formulaire
identique
précédent,
en
ajouter
groupe
de
bouton
radio
permettre
à
l’utilisateur
de
choisir
civilité,
montrer
figure
formulaire
d'inscription
madame
:
mademoiselle
:
monsieur
:
nom
:
prénom
:
adresse
:
courriel
:
envoyer
figurer
2
daniel
hadjadj
daniel
©
dahadjadj@free.fr
-
2005
-
page
50

cours
d’initiation
php
case
à
cocher
liste
de
sélection.
case
à
cocher
liste
de
sélection
permettre
d’effectuer
choix.
être
pratique
de
considérer
réponse
être
constituer
par
tableau,
convient
l’attribut
"name"
élément
"<select>"
"<input>"
être
suivre
de
crochets.
php
transformer
variables
sous
forme
de
tableau
pouvoir
appliquer
traitement
l’on
à
voir
chapitre
tableau
(
boucles,
tris,
etc..
)
.
case
à
cocher
créer
avec
balise
html
:
<input
type="checkbox"
value="physique"
name="cours[]">
liste
de
selection
créer
avec
balise
html
:
<select
name="coursoption[]"
multiple
>
<option>"élément
1
de
liste"</option>
<option>"élément
2
de
liste"</option>
</select>
exercice
:
(voir
annexe
formulaire
exercice
5).
pour
compléter
page
aller
ajouter
liste
case
à
cocher,
pour
faire,
réaliser
formulaire
en
html
(voir
figurer
3),
récupérer
sur
autre
page
php
valeur
saisies.
formulaire
d'inscription
madame
:
mademoiselle
:
monsieur
:
nom
:
prénom
:
adresse
courriel
:
choix
cours:
principaux
:
optionnels
math
ématiques
:
physique
:
anglais
espagnol
art
plastiquer
français
:
envoyer
figurer
3
daniel
hadjadj
daniel
©
dahadjadj@free.fr
-
2005
-
page
51

cours
d’initiation
php
exercice
:
(voir
annexe
formulaire
exercice
6).
tableau
:
$list_stagiaire=array(0=>"madame
durant",
1=>"mademoiselle
dupré",2=>"alain",
3=>"monsieur
camus",
4=>"mon
ami
jean-marc");
afficher
stagiaire
issus
tableau
dans
liste
de
sélection,
à
l’aide
d’un
bouton
permetter
à
l’utilisateur
d’alimenter
second
liste
titulaire
montrer
figue
4
liste
stagiaires
titulaires
madame
durant
mademoiselle
dupré
alain
monsieur
camus
====>
figurer
4
daniel
hadjadj
daniel
©
dahadjadj@free.fr
-
2005
-
page
52

cours
d’initiation
php
validation
formulaire
avec
formulaire
de
figure
3
avoir
permettre
à
l’utilisateur
de
saisir
renseignement
qu’il
souhaiter
de
envoyer,
formulaire
être
incomplet
saisie
être
erronée,
vérification
être
faîte
celui-ci
être
envoyer.
aller
demander
à
php
de
faire
vérification
nécessaires
avant
d’afficher
page
html.
rappeler
l’on
pouvoir
envoyer
serveur
page
html
qu’une
page
php.
exercice
:
(voir
annexe
formulaire
exercice
7).
reprendre
formulaire
de
figure
3,
après
avoir
ajouter
champ
pour
code
postal,
champ
pour
ville
autre
pour
téléphone,
ajouter
fonction
dans
page
php
permettre
de
vérifier
champ
avoir
être
saisir
correctement.
c’est
cas
fonction
renvoyer
true
afficher
résultat,
fonction
renvoyer
false
réaffichera
page
html
accompagner
d’un
message
indiquer
à
l’utilisateur
champ
incorrects.
dans
cas
l’on
réaffiche
page
html
pour
correction,
éviter
à
l’utilisateur
de
saisir
à
nouveau
madame
:
mademoiselle
:
monsieur
:
nom
:
prénom
:
adresse
:
code
postal
:
ville
courriel
:
choix
cours
:
optionnels
principaux
:
mathématiques
:
physique
:
anglais
espagnol
art
plastiquer
français
:
envoyer
réinitialiser
figurer
5
information
fournis.formulaire
d'inscription
dans
exemple,
envoyer
page
php
détecter
d’abord
s’il
s’agit
d’un
premier
envoi
en
vérifier
méthode
post
get
grâce
à
variable
$_server['request_method'].
c’est
cas
exécuter
fonction
de
vérification
informer
saisie
être
correctes
non.
selon
résultat
de
fonction
afficher
page
de
résultat
page
de
saisie.
daniel
hadjadj
daniel
©
dahadjadj@free.fr
-
2005
-
page
53

cours
d’initiation
php
htmlentites()
htmlspecialchars
fonction
jouer
rôle
important
dans
traduction
de
caractère
destiner
à
être
afficher
par
navigateur.
premier
convertir
plupart
diacritiques
dire
caractère
spéciaux
en
entité
de
caractère
équivalentes.
dire
«
plupart
»,
c’est
caractère
€
«
oe
«ne
être
traduits.
second
convertir
caractère
avoir
sens
particulier
dans
commande
html
:
commercial
(&)
devenir
&amp;.
chevron
balise
(<
>)
devenir
$lt
;
$gt
;.
guillemet
("
)
devenir
&quot
;
second
argument
valoir
ent_quotes.
exemple
<?php
$new
=
htmlspecialchars("<a
href='test'>test</a>",
ent_quotes);
$new
=
htmlentities("<a
href='test'>test</a>",
ent_quotes);
?>
nb
:
n’utilisons
dernière
fonction
l’on
récupérer
élément
saisir
dans
formulaire
avoir
de
forte
chance
d’avoir
comportement
inattendu.
exercice
:
(voir
annexe
formulaire
exercice
8).
reprendre
formulaire
de
l’exercice
6
(figure
4),
à
l’aide
de
fonction
htmlentities()
htmlspecialchars,
supprimer
problème
relatifs
saisie
balise
html
dans
champs.
daniel
hadjadj
daniel
©
dahadjadj@free.fr
-
2005
-
page
54

cours
d’initiation
php
en-tête
http
de
échange
par
protocole
http
entre
navigateur
serveur,
donnée
dire
d'entêtes
contenir
information
sur
donnée
à
envoyer
(dans
cas
d'une
requête)
envoyées
(dans
cas
d'une
réponse).
information
en
question,
sur
page
web
image,
suivre
en-têtes.
en-tête
http
permettre
d'effectuer
action
sur
navigateur
transfert
de
cookies
redirection
vers
autre
page.
en-tête
être
premier
information
envoyer
navigateur
(pour
réponse)
serveur
(dans
cas
d'une
requête),
présenter
sous
forme:
en-tête:
valeur
syntaxe
devoir
être
respectée,
qu'aucun
espace
devoir
figurer
entre
nom
de
l'en-tête
deux
point
(:).
espace
devoir
par
contre
figurer
après
celui-ci!
!
php
fournir
fonction
permettre
d'envoyer
en-tête
http
serveur
navigateur
(il
s'agit
d'une
réponse
http.
syntaxe
de
fonction
être
suivante:
booléen
header(chaîne
en-tête
http)
etant
donner
en-tête
http
être
premier
information
envoyées,
fonction
header()
devoir
être
utiliser
avant
envoi
de
donnée
html
navigateur
(le
script
contenir
devoir
être
placer
avant
balise
<html>
avant
fonction
echo(),print
printf())
utilisation
possibles
de
fonction
header():
exemple
:
pour
rediriger
navigateur
vers
nouvelle
page:
<?php
header("location:
http://www.commentcamarche.net/");
?>
exemple
:
pour
envoyer
navigateur
image
créer
à
volée
(pour
faire
compteur
de
statistique
histogramme
dynamique
par
exemple)
:
<?php
header("content-type:
image/gif");
//
code
générer
l'image
imagegif($image);
//
envoi
de
l'image
navigateur
?>
récupérer
en-tête
de
requête
fonction
header()
permettre
d'envoyer
en-tête
http
navigateur,
php
fournir
second
fonction
permettre
de
récupérer
dans
tableau
l'ensemble
en-tête
http
envoyer
par
navigateur.
syntaxe
de
fonction:
tableau
getallheaders();
tableau
retourner
par
fonction
contenir
en-tête
indexer
par
nom.
script
permettre
par
exemple
de
récupérer
en-tête
particuliers.
exemple
:
<?php
$entetes
=
getallheaders;
echo
$entetes["location"];
?>
daniel
hadjadj
daniel
©
dahadjadj@free.fr
-
2005
-
page
55

cours
d’initiation
php
6.
base
de
donnée
utiliser
base
données
?
pour
stocker
informations,
être
avantageux
d’utiliser
base
donner
relationnelle
qu’un
fichier
brut.
en
effet
rbdms
(relational
database
management
systems)
présenter
atout
suivants
:
permettre
d’accéder
donnée
qu’avec
fichier
bruts
;
pouvoir
interroger
pour
récupérer
ensemble
de
donner
répondre
à
critère
;
posséder
mécanisme
intégrés
permettre
de
gérer
accès
simultanés,
programmeur
n’est
besoin
de
s’en
occuper
;
permettre
d’accéder
à
donnée
;
posséder
système
de
privilège
intégrés.
l’utilisation
d’une
base
de
donnée
relationnelle
permettre
de
répondre
à
question
aider
à
améliorer
site.
architecturer
externe
d’une
base
de
données
web
étape
suivantes
donner
cheminement
d’une
transaction
de
base
de
donnée
web
typique:
navigateur
web
d’un
utilisateur
envoyer
requête
http
pour
page
web
particulière;
serveur
recevoir
requête,
récupérer
fichier
.php
passe
moteur
php
qu’il
être
traiter
;
moteur
php
commencer
à
analyser
script.
a
l’intérieur
de
script
trouver
commande
permettre
de
connecter
à
base
de
donnée
d’exécuter
requête.
php
ouvre
connexion
vers
serveur
de
base
de
donnée
transmettre
requête
appropriée
;
serveur
de
base
de
donnée
recevoir
requête
de
base
de
donnée
traite,
renvoyer
résultat
moteur
php
;
moteur
php
terminer
l’exécution
script,
consister
en
formatage
résultat
de
requête
en
html.
envoyer
fichier
html
obtenir
serveur
web.
serveur
web
transmettre
page
html
navigateur,
l’utilisateur
pouvoir
voir
résultat.
6.1.
accès
base
de
données
support
php
de
connexion
base
de
donnée
php
prendre
en
charge
api
donner
accès
à
grand
nombre
de
base
de
données,
oracle,
sybase,
postgresql,
mysql,
etc.
programme
php
pouvoir
utiliser
pour
accéder
données.
odbc
(open
database
connectivity,
middle
ware
de
connexion)
être
api
(application
programming
interface)
standard
permettre
d’accéder
à
base
de
données
prise
en
charge
par
php
d’écrire
application
de
base
de
donnée
génériques,
c’est-à-dire
code
de
l’application
fonctionner
pour
base
de
donner
prendre
en
charge
norme
odbc.
rudiment
langage
sql
sql
(strutured
query
language)
être
langage
de
programmation
standard
permettre
d’accéder
de
manipuler
information
d’une
base
de
donnée
relationnelle.
c’est
norme
ansi
iso
accepter
par
plupart
de
base
de
donnée
relationnelles.
requête
de
définition
de
donnée
instruction
sql
permettre
de
modifier
schéma
de
base
de
donnée
en
créer
modifier
objet
dans
dernière.
create
:
permettre
de
créer
base
de
donnée
table
dans
base
de
donnée
existante.
drop
:
permettre
de
détruire
base
de
donnée
table
dans
base
de
données.
instruction
de
manipulation
de
donnée
instruction
sql
permettre
de
modifier
contenu
d’une
base
de
données.
insert
:
permettre
de
compléter
ligne
d’une
table
de
base
de
données.
replacer
:
permettre
de
remplacer
ancien
enregistrement
par
nouveau
(instruction
spécifique
à
base
mysql).
update
:
daniel
hadjadj
daniel
©
dahadjadj@free.fr
-
2005
-
page
56

cours
d’initiation
php
permettre
de
modifier
colonne
dans
enregistrement.
delete
:
permettre
de
supprimer
d’une
tabler
enregistrement
correspondre
à
condition
particulière.
instruction
de
recherche
select
:
permettre
d’effectuer
recherche
dans
base
de
donnée
mysql
à
partir
d’applications
web.
phpmyadmin
easyphp
être
livrer
avec
l’outil
"phpmyadmin",
permettre
d’effectuer
opération
sur
base
de
donnée
mysql
de
manière
graphique.
l’un
gros
avantage
outil,
c’est
qu’i
mettre
avoir
disposition
syntax
sql
modifier
pour
php
opération
effectué.
aller
étudier
base
de
donnée
("formation")
gérer
stagiaires
d’un
centre
de
formation
selon
modèle
:
après
avoir
installer
base
de
données
"formation"
à
l’aide
de
phpmyadmin,
aller
voir
élément
language
sql
servir
de
base
avec
php.
installer
base
formation
avoir
deux
manière
d’installer
base
formation,
à
l’aide
de
phpmyadmin
via
php
:
avec
phpmyadmin
:
lancer
phpmyadmin
avec
clique
droit
sur
l’icône
easyphp,
configuration
phpmyadmin.
importer
fichier
sql
de
création
de
base
stagiaires
(formation.sql)
en
cliquer
sur
l’icône
"sql"
de
fenêtre
de
gauche
sur
"importe
fichiers".
daniel
hadjadj
daniel
©
dahadjadj@free.fr
-
2005
-
page
57

cours
d’initiation
php
avec
php
:
fichier
create_base.php
contenir
commande
pour
créer
base.
pouvoir
créer
base
en
appeler
script
par
l’url
:
http://127.0.0.1/coursphp/exercice/create_base.php
exemple
:
étudirons
détail
instruction
dans
chapitre
suivant.
daniel
hadjadj
daniel
©
dahadjadj@free.fr
-
2005
-
page
58

cours
d’initiation
php
6.2.
base
de
donnée
mysql
mysql
être
serveur
de
base
de
donnée
réduit,
compact
convivial.
être
disponible
pour
platesformes
unix,
windows
nt,
2000
windows
95/98.
être
inutile
de
déclarer
être
pour
utiliser
mysql
avec
php4,
php4
supporter
base
de
données.
pour
php5
sqllite
à
prendre
relais,
falloir
charger
module
mysql.
chargement
module
mysql
avec
php5
:
modifier
fichier
de
configuration
"php.ini"
dans
section
extension
ajouter
ligne
suivante
:
extension=php_mysql.dll
n’oubliez
de
redémarrer
serveur
http
modification
être
prendre
en
compte.
accès
à
base
de
donnée
mysql
à
partir
web
avec
php
dans
script
utiliser
pour
accéder
à
base
de
donnée
à
partir
web,
falloir
respecter
étape
suivantes
:
établir
connexion
vers
base
de
donnée
approprier
;
envoyer
requête
vers
base
de
donnée
;
récupérer
traiter
résultat
pour
présenter
à
l’utilisateur;
fermer
connexion.
etablir
connexion
fonction
mysql_connect()
:
permettre
d’établir
connexion.
int
mysql_connect([string
nom_serveur],
[string
nom_utilisateur],
[string
mot_passe]);
argument
être
optionnels.
s’ils
être
précisés,
fonction
servir
valeur
par
défaut
:
"localhost"
pour
l’hôte,
nom
de
l’utilisateur
sous
php
être
exécuté,
mot
de
passe.
fonction
renvoyer
identificateur
de
lien
vers
base
de
donnée
mysql
(réutilisé
par
suite)
en
cas
de
succès,
false
en
cas
d’échec.
exemple
:
<?php
$db
=
mysql_connect("localhost",
"root",
"");
//
l'identificateur
de
lien
être
enregistrer
dans
$db
?>
de
même
manière,
fonction
mysql_pconnect()
permettre
d’établir
connexion,
renvoyer
connexion
persistante
vers
base
de
données,
connexion
normale
être
fermer
l’exécution
script
être
terminée.
exercice
:
(voir
annexe
etablir
connexion
exercice
1).
créer
fichier
php
permettre
d’ouvrir
unr
connection
avec
mysql,
avec
paramètre
:
nom
de
l’utilisateur
:
"stagiaire"
mot
de
passe
:
"stagiaire"
choisir
base
de
donnée
existante
fonction
mysql_select_db()
:
permettre
de
sélectionner
base
de
donnée
existante
.
int
mysql_select_db(
string
nom_base,
[int
identificateur_connexion]);
l’argument
identificateur_connexion,
spécifier
lien
vers
base
de
données,
être
optionnel
:
par
défaut
dernier
lien
ouvert
être
utilisé,
lien
n’a
être
ouvert,
lien
par
défaut
être
ouvrir
avoir
appeler
mysql_connect().
exercice
:
(voir
choisir
base
de
donnée
existante
exercice
1).
créer
fichier
php
permettre
d’établir
connexion
avec
base
formation.,
avec
paramètre
:
nom
de
l’utilisateur
:
"stagiaire"
mot
de
passe
:
"stagiaire"
exercice
:
(voir
choisir
base
de
donnée
existante
exercice
2).
créer
fichier
"connect.inc"
servir
de
besoin
sous
forme
de
fichier
inclure
à
connecter
à
base
formation
paramètre
de
connecter
être
identiques
exercice
précédents
daniel
hadjadj
daniel
©
dahadjadj@free.fr
-
2005
-
page
59

cours
d’initiation
php
déconnexion
à
base
de
donnée
fonction
mysql_close()
:
permettre
de
déconnecter
de
base
de
donnée
:
boolean
mysql_close([mixed
identificateur_connexion]);
attention
:
connexion
être
persistante,
fonction
mysql_close()
permettre
de
fermer.
daniel
hadjadj
daniel
©
dahadjadj@free.fr
-
2005
-
page
60

cours
d’initiation
php
envoyer
requête
vers
base
de
donnée
fonction
mysql_query()
:
permettre
d’envoyer
requête
base
de
données.
requête
vouloir
exécuter
pouvoir
être
configurer
avant
l’appel
de
fonction
dans
fonction
:
structure
d’une
requêter
sql
$query
=
“…
requête
sql
…”;
$resultat
=
mysql_query
($query,[identificateur_connexion]);
$resultat
=
mysql_query
=
“…
requêter
sql
…”,[identificateur_connexion]);
fonction
mysql_db_query
()
:
pouvoir
appeler
fonction
mysql_db_query()
permettre
de
spécifier
base
de
donnée
souhaiter
interroger
:
mixed
mysql_db_query(
string
nom_base,
string
requete,
[mixed
identificateur_connexion]);
en
cas
de
succès,
deux
fonction
renvoyer
:
•
dans
cas
d’une
requête
d’interrogation,
identificateur
de
résultat
permettre
de
récupérer
résultat
requêtes,
•
dans
cas
d’autres
requêtes,
1.
en
cas
d’échec
renvoyer
false.
l’identificateur
de
résultat
servir
de
clé
pour
accéder
à
zéro,
un
ligne
renvoyer
par
requête.
fonction
permettre
de
récupérer
résultat
à
partir
de
identificateur.
exercice
:
(voir
annexe
envoyer
requête
vers
base
de
données,
exercice
1
).
créer
page
php
qui,
à
l’aide
fichier
connect.inc,
permettre
d’exécuter
requête
interroger
table
stagiaire
:
php
disposer
de
fonction
permettre
de
récupérer
valeur
d’une
table.
fonction
récupérer
nom
de
champ
valeur
stock
dans
variable
tableau
passer
en
paramètre.
mysql_fetch_array()
array
mysql_fetch_array
(
resource
result_identifier
[,
int
result_type])
retourner
ligne
de
résultat
sous
forme
d'un
tableau
associatif.
c’est
version
étendre
de
mysql_fetch_row().
en
d'enregistrer
donnée
sous
forme
d'un
tableau
à
indice
numérique,
pouvoir
enregistrer
dans
tableau
associatif,
en
utiliser
nom
champ
indice
dit,
pouvoir
récupérer
valeurs,
en
indiquer
l’indice
numérique
nom
de
champ
de
table
exemple
:
<?php
$resultat
=
mysql_query("select
*
from
personne",$conn);
while
($row
=
mysql_fetch_array
($resultat))
{
echo
"<br>".$row["num_personne"]."
";
echo
$row["nom"]."
";
echo
$row["prenom"]."
<br>";
}
?>
mysql_fetch_row()
array
mysql_fetch_row
(
resource
result_identifier
)
retourner
tableau
énumérer
correspondre
à
ligne
demandée,
false
s'il
rester
de
ligne.
pouvoir
récupérer
valeur
par
l’indice
numérique.
exemple
:
<?php
$resultat
=
mysql_query("select
*
from
personne",$conn);
while
($row
=
mysql_fetch_array
($resultat))
{
daniel
hadjadj
daniel
©
dahadjadj@free.fr
-
2005
-
page
61

cours
d’initiation
php
echo
"<br>".$row[0]."
";
echo
$row[1]."
";
echo
$row[2]."
<br>";
}
?>
mysql_fetch_assoc()
array
mysql_fetch_assoc
(
resource
result_identifier)
retourner
tableau
associatif
contenir
ligne
lue,
false,
rester
de
lignes.
avoir
besoin
d'indices
numériques,
préférer
mysql_fetch_array()
dit,
fait
qu’il
n’y
avoir
d’indice
numériques,
colonne
porter
même
nom,
dernière
avoir
priorité,
autres
être
récupérées.
exemple
:
<?php
$resultat
=
mysql_query("select
*
from
personne",$conn);
while
($row
=
mysql_fetch_assoc($resultat))
{
echo
"<br>".$row["num_personne"]."
";
echo
$row["nom"]."
";
echo
$row["prenom"]."
<br>";
}
?>
trois
fonction
valides,
utiliser
faire
pouvoir
fonction
mysql_fetch_array(),
apporter
confort
d’utilisation
pour
être
performante
autres.
mysql_free_result
int
mysql_free_result
(
resource
result_identifier)
mysql_free_result()
effacer
résultat
de
mémoire.
fonction
n'est
à
appeler
avoir
peur
d'utiliser
de
mémoire
durant
l'exécution
de
script.
mémoire
associer
à
l'identifiant
de
résultat
être
libérée,
sans
oublier,
traitement
terminer
avec
fin
script.
exercice
:
(voir
annexe
envoyer
requête
vers
base
de
données,
exercice
2
).
créer
page
afficher
liste
stagiaire
avec
adresse
dessous,
en
interroger
table
stagiaire
de
base
formation,
en
utiliser
fonction
:
mysql_fetch_array(),
mysql_fetch_row()
mysql_fetch_assoc().
exercice
:
(voir
annexe
envoyer
requête
vers
base
de
données,
exercice
3
).
créer
page
afficher
liste
stagiaire
avec
adresse
dessous,
en
interroger
table
stagiaire
de
base
formation,
en
utiliser
mysql_fetch_array(),
présenter
resultat
sous
forme
de
tableau
html
(balise
<table>
etc…),
montrer
figure
(figure
6).
liste
stagiaire
n°
de
stagiaire
n°
de
téléphone
nom
prénom
adresser
code
postal
1
madame
durant
21,
rue
georges
brassens
94000
creteil
01
42
44
12
30
2
mademoiselle
dupré
54,
rue
jacques
brel
75000
pari
01
14
42
32
40
3
père
alain
13,
rue
saint
père
93000
saint-denis
01
52
64
72
80
4
monsieur
camus
albert
79,
rue
scribe
92160
antony
5
madame
leblanc
jea
n-
rue
blanc
marc
manteau
91000
montfermeil
01
02
14
22
40
ville
01
62
73
82
90
figure
6
daniel
hadjadj
daniel
©
dahadjadj@free.fr
-
2005
-
page
62

cours
d’initiation
php
exercice
:
(voir
annexe
envoyer
requête
vers
base
de
données,
exercice
4
).
reprendre
formulaire
de
l’exercice
7
paragraphe
"les
formulaires"
remplacer
contrôle
checkbox
cours
principaux
à
l’aide
information
recueillir
dans
table
cours
de
base
formation
alimenter
liste
de
sélection
cours
optionnels
à
partir
de
même
table.
etapes
de
construction
:
création
fichier
"
"
c'est
un
page
en
html
charger
d'afficher
champ
de
saisie
sous
forme
de
tableau
html
(voire
figurer
5).
création
fichier
"
"
charger
de
vérifier
méthode
post
à
été
utiliser,
oui
vérifier
validité
formulaire
afficher
resultat.
création
fichier
"
"
effectuer
contrôle
de
saisie
formulaire
d’inscription
en
php.
création
fichier
"chk_stagiaires.inc"
création
contrôle
checkbox
à
partir
donnée
de
base.
création
fichier
"lst_stagiaires.inc"
alimentation
de
liste
de
sélection
cours
optionnels
à
partir
donnée
de
base.
création
fichier
"
"
construire
mettre
en
forme
page
de
résultat
selon
information
issues
de
base
de
donnée
de
saisi
de
l’utilisateur.
daniel
hadjadj
daniel
©
dahadjadj@free.fr
-
2005
-
page
63

cours
d’initiation
php
rechercher
donnée
dans
base
commande
sql
"select"
comporte
trois
clause
aller
servir
pour
rechercher
ordonner
donnée
:
clause
"where"
,
clause
"orer
by"
clause
"limit".
clause
"where"
:
ajouter
condition
s’exprime
par
comparaison
entre
contenu
d’un
champ
constante
variable.
condition
pouvoir
être
associer
avec
opérateur
and
(et)
or
(ou)
pouvoir
inverser
condition
avec
l’opérateur
not
(pas).
pour
indiquer
différence,
à
choix
entre
l’opérateur
habituel
"!
!="
l’opérateur
"<>".
mot
clé
like
rechercher
correspondance
floue
d’une
chaîne
de
caractères.
compléter
par
l’un
deux
caractère
"_"
"%"
autoriser
différente
combinaison
:
exemple
:
<?php
$sql="select
*
from
livre
where
auteur
=
'leon'";
//recherche
livre
nom
de
l'auteur
égal
à
"leon"
//et
trouver
livre
écrire
par
l'auteur
leon
$sql="select
*
from
livre
where
auteur
=
'%leon'";
//recherche
livre
nom
de
l'auteur
commencer
par
"leon"
//et
trouver
livre
écrire
par
l'auteur
"dona
leon"
$sql="select
*
from
livre
where
auteur
=
'%on%'";
//recherche
livre
nom
de
l'auteur
contenir
"leon"
//et
trouver
livre
écrire
par
auteur
"dona
leon"
//"edward
marston"
$sql="select
*
from
livre
where
auteur
=
'_o%'";
//recherche
livre
titre
deuxième
lettre
être
//égal
à
"o"
//et
trouver
titre
"poésies"
"noblesse
oblige"
?>
clause
"orer
by"
:
spécifier
nom
de
champ
sur
porter
de
tri
résultat.
mot
clé
"asc"
"desc"
préciser
l’ordre
croître
décroissant.
par
défaut
tri
avoir
lieu
dans
l’ordre
croissant.
exemple
:
<?php
$sql="select
*
from
livrer
order
by
auteur
desc";
//affiche
livre
dans
l'ordre
décroissant.
?>
clause
"limit"
:
clause
indiquer
limite
exprimer
en
numéro
de
ligne
enregistrement
à
traiter.
s’il
figurer
qu’une
seule
valeur,
signifier
table
être
traiter
à
partir
de
valeur
indiquée.
s’il
avoir
deux
limite
séparer
par
virgule,
table
être
traiter
entre
valeur
indiquées,
borne
comprises.
exemple
:
<?php
$sql="select
*
from
livre
limit
3,7";
?>
avoir
voir
paragraphe
"envoyer
requête
vers
base
de
données"
interroger
base
de
données.
avoir
voir
commande
sql
compose,
aller
manipuler
chaîne
de
caractères,
issues
élément
saisir
par
l'utilisateur,
pour
construire
clause
"where",
"order
by"
"limit",
après
avoir
ajouter
avoir
suite
de
requête
sql
l'enverrons
serveur.
exemple
:
<?php
$sql="select
*
from
livre
where
auteur
=
'leon'
order
by
auteur
desc
limit
3,7";
//recherche
5
premier
livre
nom
de
l'auteur
égal
à
//"leon"
affiche
dans
l'audre
alphabétique
décroître
auteurs.
?>
exercice
:
(voir
annexe
rechercher
donnée
dans
base,
exercice
1
).
reproduire
formulaire
(figure
7)
construir
requête
sql
d'interroger
table
stagiaires,
afficher
résultat
sur
autre
page
(figure
8).
etapes
:
daniel
hadjadj
daniel
©
dahadjadj@free.fr
-
2005
-
page
64

cours
d’initiation
php
création
fichier
"recherche.php"
charger
de
vérifier
méthode
post
à
été
utiliser,
oui
vérifier
validité
formulaire
appeler
page
construire
requête
sql,
afficher
critère
de
recherche
création
fichier
"recherche.htm"
(voir
figurer
7)
c'est
page
en
html
charger
d'afficher
critère
de
recherche
d'indiquer
formulaire
à
appeler
après
avoir
cliquer
sur
"lancer
recherche".
création
fichier
"construction_where.inc"
page
récupérer
élément
saisir
par
l'utilisateur
construire
requête
sql,
appel
page
de
resultat.
création
fichier
"resultat.inc"
interroger
base
de
donnée
construire
balise
donnée
necessaire
à
l'affichage
résultat.
création
fichier
"resultat.htm"
(figure
8)
mettre
en
page
affiche
résultat
sous
forme
de
tableau
html
construit,
pouvoir
modifier
clause
"where",
sans
avoir
besoin
de
modifier
page
de
résultat
voir
versa.
formulaire
de
recherche
recherche
s'effectue
sur
3
critère
:
nom,
prénom
code
postal.
champ
"nom"
devoir
être
remplir
partiellement,
autres
champ
être
facultatifs.
résultat
apparaître
sous
forme
d'une
liste.
nom
:
contenir
prénom
:
contenir
code
postal
:
figurer
7
résultat
de
recherche
n°
nom
prénom
1
durant
2
dupré
3
alain
4
camus
albert
5
leblanc
jean-marc
adresser
téléphone
mél
21,
rue
georges
brassens
94000
creteil
54,
rue
jacques
brel
75000
pari
13,
rue
saint
p
93000
saint-denis
79,
rue
scribe
92160
antony
rue
blanc
manteau
91000
montfermeil
01
42
44
12
30
durant@free.fr
01
14
42
32
40
dupre@wanadoo.fr
01
52
64
72
80
alain@htomail.com
01
62
73
82
90
camus@noos.fr
01
02
14
22
40
jeanmarc.leblanc@free.fr
figurer
8
daniel
hadjadj
daniel
©
dahadjadj@free.fr
-
2005
-
page
65

cours
d’initiation
php
naviguer
dans
donnée
de
base
pour
naviguer
dans
donnée
de
base,
servir
de
clause
"limit".
premier
paramètre
de
clause
permettre
d’indiquer
ligne
débuter
recherche,
second
nombre
d’enregistrements
à
afficher
sur
page.
premier
page
afficher
5
premier
enregistrement
en
rappellant
page,
5
suivants
de
suite,
jusqu'à
fin
résultat
de
recherche.
exercice
:
(voir
annexe
naviguer
dans
donnée
de
base,
exercice
).
reproduire
formulaire
(figure11)
construir
requête
sql
d'interroger
table
stagiaires,
afficher
résultat
sur
autre
page
en
limitant
l'affichage
avoir
2
enregistrement
permetter
à
l'utilisateur
de
naviguer
dans
résultat.
dans
page
de
résultat
l’utilisateur
pouvoir
en
cliquer
sur
nom
stagiaire
en
double
cliquer
sur
ligne
consulter
fiche
cours
suivre
par
stagiaire
(fiche
de
renseignements).
formulaire
être
réaliser
en
utiliser
méthode
post
etapes
:
création
fichier
"recherche_post.php":
charger
de
vérifier
méthode
post
à
été
utiliser,
oui
vérifier
validité
formulaire
appeler
page
construire
requête
sql,
afficher
critère
de
recherche
création
fichier
"rech_validation.inc"
:
effectuer
contrôle
de
saisie
formulaire
de
recherche.
création
fichier
"recherche_post.htm"
:
c'est
page
en
html
charger
d'afficher
champ
de
saisie
critère
de
recherche
sous
forme
de
tableau
html
(voire
figurer
11).
création
fichier
"resultat_post.htm":
c'est
page
en
html
charger
d'afficher
résultat
de
requête
sous
forme
de
tableau
html
(voire
figurer
12).
création
fichier
"construction_post_where.inc"
:
page
récupérer
élément
saisir
par
l'utilisateur
construire
requête
sql,
appel
page
construction_post_limit.inc.
création
fichier
"construction_post_limit.inc"
:
page
construire
clause
limit
appel
page
resultat_post.inc.
création
fichier
"resultat_post.inc"
:
page
interroger
base
de
donnée
à
l'aide
clause
"where"
"limit"
créer
précédement,
vérifier
formater
donnée
dans
tableau
html
appel
page
resultat_post_html.
création
fichier
"navigation_post.inc"
:
page
être
incluse
par
fichier
resultat_post_html
servir
avoir
afficher
barre
de
navigation.
création
fichier
"navigation.js"
fichier
écrire
en
javascript
aider
à
naviguer
dans
table,
en
incrémenter
n°
de
page.
en
réalité
n'avons
besoin
de
créer
de
fichiers,
pouvoir
entendre
regrouper
par
type,
de
comprendre,
étape
à
été
décomposer
en
fichier
.
construit,
pouvoir
modifier
clause
"where"
"limit",
sans
avoir
besoin
de
modifier
page
de
résultat
voir
versa.
formulaire
de
recherche
recherche
s'effectue
sur
3
critère
:
nom,
prénom
code
postal.
champ
"nom"
devoir
être
remplir
;
autres
champ
être
facultatifs.
résultat
apparaître
sous
forme
d'une
liste.
fiche
cours
suivre
par
stagiaire
recherchée
être
accessible
en
cliquer
sur
nom
en
double
cliquer
sur
ligne
correspondante.
nom
:
contenir
prénom
:
contenir
code
postal
:
figurer
11
daniel
hadjadj
daniel
©
dahadjadj@free.fr
-
2005
-
page
66

cours
d’initiation
php
résultat
de
recherche
n°
nom
prénom
1
durant
2
dupré
3
alain
4
camus
albert
5
leblanc
jean-marc
premier
page
adresser
téléphone
mél
21,
rue
georges
brassens
94000
creteil
54,
rue
jacques
brel
75000
pari
13,
rue
saint
p
93000
saint-denis
79,
rue
scribe
92160
antony
rue
blanc
manteau
91000
montfermeil
01
42
44
12
30
durant@free.fr
01
14
42
32
40
dupre@wanadoo.fr
01
52
64
72
80
alain@htomail.com
01
62
73
82
90
camus@noos.fr
01
02
14
22
40
jeanmarc.leblanc@free.fr
pager
précedente
page
suivante
//3
dernière
page
figurer
12
fiche
de
renseignement
daniel
hadjadj
daniel
©
dahadjadj@free.fr
-
2005
-
page
67

cours
d’initiation
php
insérer
donnée
dans
base
insert
:
être
instruction
sql
permettre
d’ajouter
ligne
de
donnée
(enregistrements)
dans
table
de
base
de
données.
exemple
:
<?php
$sql="insert
into
livre
(num
,
auteur,
date)
value('1',
'dona
leon',
'2005')";
?>
exercice
:
(voir
annexe
insérer
donnée
dans
base
de
donnée
).
reprendre
formulaire
d'inscription
(figure
5)
l’utilisateur
envoi
page,
insérer
donnée
dans
base
addslashes()
stripslashes
()
opération
d’insertion
de
modification
de
sélection
de
donnée
dans
base
caractère
devoir
faire
l’objet
d’un
traitement
particulier
d’être
reconnaître
correctement.
fonction
addslashes(),
après
avoir
échapper
caractère
devoir
l'être,
retourner
chaîne
de
caractère
pouvoir
être
utiliser
dans
requête
de
base
de
données.
caractère
être
guillemet
simples
('),
guillemet
doubles
("),
anti-slash
(\)
nul
(le
caractère
null).
stripslashes()
retourner
chaîne
anti-slash
être
supprimé.
doubles
anti-slash
être
réduire
en
seul
anti-slash.
stripslashes()
être
fonction
inverse
de
addslashes().
exercice
:
(voir
annexe
insérer
donnée
dans
base
de
données
exercice
2).
reprendre
formulaire
d’inscription
de
l’exercice
précédent
et,
ajouter
fonction
addslashes()
stripslashes(),
vérifier
en
insérer
adresse
comporter
apostrophe
.
modifier
donnée
dans
base
update
:
être
instruction
sql
permettre
de
modifier
colonne
dans
enregistrement.
exemple
:
<?php
$sql="update
livre
set
num
=
1
,
auteur
=
'dona
leon')";
?>
exercice
6
:
(voir
annexe
modifier
donnée
dans
base)
reprendre
formulaire
d'inscription
ajouter
bouton
modifier
permettre
avoir
l'utilisateur
de
modifier
donnée
dans
base,
montrer
figue
etape
de
construction
formulaire
:
création
fichier
"db_modification.html"
en
html
c'est
page
en
html
charger
d'afficher
champ
de
saisie
sous
forme
de
tableau
html
(voire
figurer
5).
création
fichier
"validation1.inc"
effectuer
contrôle
de
saisie
formulaire
d’inscription
sur
serveur
avec
php.
création
fichier
"db_validation.js"
effectuer
contrôle
de
saisie
formulaire
d’incription
sur
client
avec
javascript.
création
fichier
"db_modification.php"
charger
de
vérifier
méthode
post
à
été
utiliser,
oui
vérifier
validité
formulaire
appel
l’action
choisir
par
l’utilisateur.
création
fichier
"connection.inc"
ouvre
connection
à
base
de
données.
création
fichier
"charge_stagiaire.inc"
interroger
base
récupérer
données.
création
fichier
"get_msg.inc"
fonction
de
mise
en
forme
message
d’erreurs
personalisés.
création
fichier
"verif_mail.inc"
fonction
de
contrôl
de
validité
de
l’adresse
mèl.
création
fichier
"db_update_stagiaire.inc"
mettre
à
jour
base
de
donnée
avec
élément
saisir
par
l’utilisateur.
daniel
hadjadj
daniel
©
dahadjadj@free.fr
-
2005
-
page
68

cours
d’initiation
php
ficher
d'inscription
n°
stagiaire
:
1
madame
:
nom
:
mademoiselle
:
monsieur
:
durant
prénom
:
21,
rue
georges
brassens
adresser
code
postal
94000
télépho
:
01
42
44
12
30
courriel
:
durant@free.fr
ville
creteil
choix
cours:
principaux
:
optionnels
mathém
atique
:
physique
:
anglais
espagno
l
art
plastiquer
français
:
ajouter
modifier
annuler
figurer
9
daniel
hadjadj
daniel
©
dahadjadj@free.fr
-
2005
-
page
69

cours
d’initiation
php
supprimer
donnée
dans
base
delete
:
être
instruction
sql
permettre
de
supprimer
d'une
tabler
enregistrement
correspondre
à
condition
particulière.
<?php
$sql
=
"delete
from
livre
where
num=1";
?>
attention
:
de
suppression
d'enregistrements,
de
vérifier
avec
précaution
condition
de
suppression
prendre
en
compte,
risquer
d'effacer
enregistrement
exercice
:
(voir
annexe
supprimer
donnée
dans
base)
reprendre
formulaire
de
l'exemple
permettre
avoir
l'utilisateur
de
supprimer
donnée
dans
base
ficher
d'inscription
n°
stagiaire
:
1
madame
:
mademoiselle
:
monsieur
:
durant
nom
:
prénom
:
21,
rue
georges
brassens
adresser
code
postal
94000
téléphone
:
01
42
44
12
30
courriel
:
durant@free.fr
ville
creteil
choix
cours:
principaux
:
optionnels
mathématique
:
physique
:
anglais
espagnol
art
plastiquer
français
:
ajouter
modifier
supprimer
annuler
figurer
10
date
heure
php
disposer
de
fonction
permettre
de
manipuler
date
l'heure
serveur
exécuter
php.
pouvoir
utiliser
fonction
pour
formater
date
l'heure
de
nombreuses
façons.
fonction
mktime()
int
mktime
(
[int
hour
[,
int
minute
[,
int
second
[,
int
month
[,
int
day
[,
int
year
[,
int
is_dst]]]]]]]
)
.
mktime()
retourner
timestamp
unix
correspondre
argument
fournis.
timestamp
être
entier
long,
contenir
nombre
de
secondes
entre
début
de
l'époque
unix
(1er
janvier
1970
00:00:00
gmt)
temps
spécifié.
argument
pouvoir
être
omis,
de
droite
à
gauche,
argument
manquants
être
utiliser
avec
valeur
courante
de
l'heure
jour.
daniel
hadjadj
daniel
©
dahadjadj@free.fr
-
2005
-
page
70

cours
d’initiation
php
fonction
mktime()
être
pratique
pour
faire
calcul
de
date
validations,
aller
corriger
valeur
invalides.
exemple
:
<?php
$jours
=
'29';
$mois
=
'12';
$annee=
'2005';
echo
mktime(0,0,0,$mois,$jours,$annee);
//affiche
1135810800
?>
fonction
date()
string
date(string
format[,int
timestamp]);
fonction
date()
prendre
deux
paramètres.
premier
paramètre
être
chaîne
spécifier
code
de
format,
second
être
optionnel
être
horodatage
unix.
en
l’absence
second
paramètre,
fonction
date()
traiter
date
l’heure
courante.
renvoyer
chaîne
formater
représenter
date
appropriée.
exemple
:
<?php
//date
en
anglais
echo
date("js
f
y");
//affiche
22nd
may
2005
//date
en
français
echo
date('d/m/y');
//affiche
22/05/2005
//date
fournir
par
mktime
en
français
$jours
=
'29';
$mois=
'12';
$annee=
'2005';
echo
date('d/m/y',
mktime(0,0,0,$mois,$jours,$annee));
//affiche
29/12/2005
?>
tableau
suivant
donner
code
de
format
reconnaître
par
fonction
date().
code
avoir
a
b
d
d
f
g
g
h
h
description
matin
après-midi,
représenter
sous
forme
de
deux
caractère
en
minuscule
:
“am”
“pm”.
matin
après-midi,
représenter
sous
forme
de
deux
caractère
en
majuscule
:
“am”
“pm”.
heure
internet
swtach,
constituer
système
de
temps
universel.
jour
mois,
sous
forme
d’un
nombre
à
deux
chiffres,
préfixer
par
un
zéro.
plage
autoriser
s’étend
de
“01”
à
“31”.
jour
de
semaine
en
anglais,
dans
format
textuel
abréger
en
trois
lettre
:
par
exemple
“fri”
pour
vendredi.
mois
de
l’année
en
anglais,
format
textuel,
version
longue.
plage
autoriser
aller
de
“january”
à
“december”.
heure
jour,
exprimer
dans
système
à
12
h,
sans
zéro
initial.
plage
autoriser
s’étend
de
“1”
à
“12”.
heure
jour,
exprimer
dans
système
à
24
h,
sans
zéro
initial.
plage
autoriser
s’étend
de
“0”
à
“23”.
heure
jour,
exprimer
dans
système
à
12
h,
nécessaire
avec
préfixe
zéro.
plage
autoriser
s’étend
de
“01”
à
“12”.
heure
jour,
exprimer
dans
système
à
24
h,
nécessaire
avec
préfixe
zéro.
plage
autoriser
s’étend
de
“00”
à
“23”.
i
minutes,
nécessaire
préfixer
avec
un
zéro.
plage
autoriser
s’étend
de
“00”
à
“59”.
i
(‘i’
majuscule)
spécifier
système
horaire
courant
être
de
l’heure
d’hiver
de
l’heure
d’été,
sous
forme
d’une
valeur
booléenne
:
“1”
l’heure
d’hiver
être
activée,
“0”.
jour
mois
format
numérique,
sans
zéro
en
préfixe.
page
autoriser
s’étend
de
“1”
à
“31”.
jour
de
semaine
en
anglais,
format
textuel,
version
longue.
plage
autoriser
s’étend
de
“monday”
à
“
sunday”.
indiquer
l’année
être
bissextile,
par
valeur
booléenne
:
“1”
dans
cas
d’une
année
bissextile,
“0”
pour
année
bissextiles.
mois
de
l’année,
sous
forme
d’un
nombre
à
deux
chiffres,
préfixer
par
un
zéro.
plage
autoriser
s’étend
de
“01”
à
“12”.
mois
de
l’année
en
anglais,
dans
format
textuel
abréger
en
trois
lettres.
plage
autoriser
s’étend
de
“jan”
à
“dec”.
j
l
(‘l’
minuscule)
l
m
m
daniel
hadjadj
daniel
©
dahadjadj@free.fr
-
2005
-
page
71

cours
d’initiation
php
n
mois
de
l’année,
sous
forme
d’un
nombre
sans
zéro
en
préfixe.
plage
autoriser
s’étend
de
“1”
à
“12”.
s
seconder
avec
nécessaire
zéro
en
préfixe.
plage
autoriser
s’étend
de
“00”
à
“59”.
s
suffixe
ordinal
pour
dates,
en
anglais,
en
deux
lettres.
suffixe
pouvoir
être
“st”,
“nd”,
“rd”,
“th”
selon
nombre
précède.
t
nombre
total
de
jour
dans
mois
donné.
plage
autoriser
s’étend
de
“28”
à
“31”.
t
fuseau
horaire
serveur,
sous
forme
de
trois
lettres,
par
exemple
“met”.
nombre
total
de
secondes
être
écouler
depuis
1er
janvier
1970
jusqu'au
moment
considéré.
jour
de
semaine
sous
forme
d’un
seule
chiffre.
plage
autoriser
s’étend
de
“0”
(dimanche)
à
“6”
(samedi).
u
w
année,
sous
format
à
2
chiffres,
par
exemple
“00”.
année,
sous
format
à
4
chiffres,
par
exemple
“2001”.
z
jour
de
l’année
sous
forme
d’un
nombre.
plage
autoriser
s’étend
de
“0”
à
“365”.
z
décalage
horaire
en
secondes.
plage
autoriser
s’étend
de
“-43200”
à
“43200”.
fonction
getdate
array
getdate
(
[int
timestamp]
)
getdate()
retourner
tableau
associatif
contenir
information
de
date
d'heure
timestamp
timestamp
(lorsqu'il
être
fourni,
sinon,
timestamp
de
date/heure
courante),
avec
champ
suivants
:
tableau
nom
clé
tableau
associatif
retourner
clé
description
"seconds"
représentation
numérique
second
exemple
de
valeur
retourner
0
à
59
"minutes"
représentation
numérique
minute
0
à
59
"hours"
représentation
numérique
heure
0
à
23
"mday"
représentation
numérique
jour
mois
courir
1
à
31
"wday"
représentation
numérique
jour
de
semaine
courante
0
(pour
dimanche)
à
6
(pour
samedi)
"mon"
représentation
numérique
mois
1
à
12
"year"
année,
sur
4
chiffre
exemples:
1999
2003
"yday"
représentation
numérique
jour
de
l'année
0
à
365
"weekday"
version
texte
jour
de
semaine
sunday
à
saturday
"month"
version
texte
mois,
january
march
0
nombre
de
secondes
depuis
l'époque
unix,
similaire
à
valeur
retourner
par
dépendre
système,
de
fonction
time()
utiliser
par
date().
2147483648
à
january
à
december
exemple
:
<?php
$jours
=
'29';
$mois
=
'12';
$annee='2005';
$madate
=
getdate(mktime(0,0,0,$mois,$jours,$annee));
foreach($madate
avoir
$key=>$value)
{
echo
"$key
:
$value<br>";
}
echo
$madate['mday']."/".$madate['mon']."/".$madate['year']
;
//affiche
29/12/2005
?>
fonction
checkdate()
int
checkdate
(
int
month,
int
day,
int
year)
checkdate()
retourner
true
date
représenter
par
jour
day,
mois
month
l'année
year
être
valide,
false.
noter
l'ordre
argument
n'est
l'ordre
français.
daniel
hadjadj
daniel
©
dahadjadj@free.fr
-
2005
-
page
72

cours
d’initiation
php
conversion
entre
format
de
date
php
format
de
date
mysql
mysql
d’autres
base
de
donnée
disposer
de
fonction
sql
permettre
de
traiter
date
en
un
:
curdate()
:
renvoi
date
sous
forme
2001-05-25
select
curdate()
from
tablename
;
curtime()
:
renvoi
l’heure
sous
forme
12
:10
:53
select
curtime()
from
tablename
;
now()
:
renvoi
date
l’heure
sous
forme
2001-05-25
12
:10
:53
select
now()
from
tablename
;
mysql
exiger
date
être
entrer
sous
forme
anné,
mois,
jour.
exemple
:
29
août
2000
devoir
être
saisir
sous
forme
2000–08–29
00–08–29
conversion
de
format
être
nécessaires
date
devoir
être
échanger
entre
php
mysql.
date
devoir
être
communiquer
de
php
vers
mysql,
fonction
date()
permettre
d’obtenir
format
approprié.
falloir
utiliser
format
de
jour
de
mois
zéro
être
placer
en
préfixe,
de
manière
à
éviter
confusion
niveau
de
mysql.
dans
mysql,
commande
sql
date_format()
permettre
de
formater
dates.
être
semblable
à
fonction
date()
de
php,
utiliser
code
de
format
différents.
conversion
courante
consister
à
exprimer
date
sous
format
messieurs
–
jj
–
aaaa
sous
format
aaaa
–
messieurs
–
jj
en
vigueur
dans
mysql.
conversion
s’effectue
moyen
de
requête
suivante
:
select
date_format
(date_column,
'%m
%d
%y')
from
tablename
;
code
de
format
%m
correspondre
à
représentation
mois
sous
forme
d’un
nombre
à
deux
chiffre
;
%d
représenter
jour
sous
forme
d’un
nombre
à
deux
chiffre
;
%y
représenter
l’années
sous
forme
d’un
nombre
à
4
chiffres.
code
de
format
mysql
utiles
pour
type
de
conversion
être
décrire
dans
tableau
suivant.
coder
description
%m
mois,
plein
texte
%w
nom
jour
de
semaine,
plein
texte
%d
jour
mois,
numérique,
avec
préfixe
textuel
%y
année,
numérique,
4
chiffre
%y
année,
numérique,
2
chiffre
%a
nom
jour
de
semaine,
3
lettre
%d
jour
mois,
numérique,
zéro
en
préfixe
%e
jour
mois,
numérique,
de
zéro
en
préfixe
%m
mois,
numérique,
zéro
en
préfixe
%c
mois,
numérique,
de
zéro
en
préfixe
%b
mois,
texte,
3
lettre
%j
jour
de
l’année,
numérique
%h
heure,
système
à
24
heures,
zéro
en
préfixe
%k
heure,
système
à
24
heures,
de
zéro
en
préfixe
%h
%i
(’i’
majuscule)
%l
(’l’
minuscule)
heure,
système
à
12
heures,
zéro
en
préfixe
heure,
système
à
12
heures,
de
zéro
en
préfixe
%i
minutes,
numérique,
zéro
en
préfixe
%r
heure,
système
à
12
heure
(hh:mm:ss[am|pm])
%t
heure,
système
à
24
heure
(hh:mm:ss)
daniel
hadjadj
daniel
©
dahadjadj@free.fr
-
2005
-
page
73

cours
d’initiation
php
%s
%s
secondes,
numérique,
zéro
en
préfixe
%p
am
pm
%w
jour
de
semaine,
numérique,
de
0
(dimanche)
à
6
(samedi)
exercice
:
(voir
annexe
dates)
reprendre
formulaire
d’inscription
ajouter
champ
dater
d’inscription
(voir
figurer
14)
modifier
de
sorte
date
pouvoir
être
insérer
modifiée.
daniel
hadjadj
daniel
©
dahadjadj@free.fr
-
2005
-
page
74

cours
d’initiation
php
6.3.
utiliser
odbc
odbc
être
solution
alternative
permettre
d’accéder
à
base
de
donnée
en
écrire
code
générique,
c’est-à-dire
code
de
l’application
fonctionner
pour
base
de
donner
prendre
en
charge
norme
odbc.
toutefois,
solution
sembler
séduisante,
être
fournir
en
fonctionnalité
l’accès
en
base
travers
fonction
de
base
dédier
c’est
à
dire
priser
en
charge
par
php.
pour
uitliser
odbc,
être
nécessaire
d’installer
de
configurer
driver
de
base.
installation
driver
odbc
de
mysql
télécharger
fichier
myodbc-3.51.11-2-win.exe
dans
répertoire
temporaire
lancer
programme
(setup.exe)
configuration
de
source
de
donnée
dans
menu
"paramètres",
"panneau
de
configuration"
double
cliquer
sur
"sources
de
données
(odbc)
".
cliquer
sur
add
pour
ajouter
nouvelle
source
de
donnée,
sélectionner
mysql
terminer.
editez
paramètre
suivre
:
windows
dsn
name
:
mysql
host
name
:
user
:
passeword
:
port
:
formation
localhost
stagiaire
stagiaire
3306
valider
en
cliquer
sur
ok
daniel
hadjadj
daniel
©
dahadjadj@free.fr
-
2005
-
page
75

cours
d’initiation
php
pouvoir
établir
connéction
avoir
base
en
utiliser
fonction
odbc_connect()
:
resource
odbc_connect
(
string
dsn,
string
user,
string
password
[,
int
cursor_type])
exemple
:
<?php
$dsn=
"formation";
$host="localhost";
//
nom
serveur
adresse
ip
héberger
base
de
donnée
$user="stagiaire";
//nom
de
l'utilisateur
de
base
de
donnée
$password="stagiaire";//
mot
de
passe
de
connexion
à
base
de
données
$db="formation";//nom
de
base
de
donnée
l'on
interroge'
$conn=odbc_connect
($dsn,
$user,
$password)
or
die
("impossible
de
connecter");
?>
pour
interroger
base
utiliser
:
odbc_exec
pour
éxecuter
requête
à
place
de
mysql_query
int
odbc_exec
(
resource
connection_id,
string
query_string)
odbc_fetch_array
pour
lire
enregistrement
à
place
de
mysql_fetch_array
array
odbc_fetch_array
(
resource
result
[,
int
rownumber])
exemple
de
connéction
d’intérrogation
de
base
formation
<?php
//code
servant
avoir
afficher
source.
echo
"<link
rel=\"stylesheet\"
type=\"
text/css\"
?href=\"../css/sga.css\">";
echo
"<a
href=\"show_source.php?script=db_satgiaireodbc.php\">voir
source</a><br><br>";
include("fonction.inc");
//code
de
l'exercice.
include("connect_odbc.inc");
//si
table
nommer
stagiaires
$requete=
"select
*
from
stagiaires
limit
0,5";
echo
"<b>résultat
avec
odbc_fetch_array()</b><br>";
//on
éxecute
requête
$resultat=@odbc_exec($conn,$requete);
//on
récupérer
valeur
grace
à
boucle
while
//dans
variable
tableau
$annuaire_stagiaires
créer
par
mysql_fetch_array()
//on
dispose
indice
numérique
nom
de
champ
indice
echo
"<h2>liste
stagiaires</h2>";
echo
"<table
border=1><tr
align
=center><th>n°
de
stagiaire</th>
<th>nom
prénom</th><th>adresse</th>
<th>code
postal</th><th>ville</th><th>courriel</th><th>n°
de
téléphone</th></tr>";
while
($annuaire_stagiaires
=
odbc_fetch_array
($resultat))
{
echo
"<tr><td
align
center>".$annuaire_stagiaires["num_stagiaire"]."</td>
";
echo
"<td>".civilite($annuaire_stagiaires["civ"])."
".$annuaire_stagiaires["nom"]."
".$annuaire_stagiaires["prenom"]."</td>";
echo
"<td>".$annuaire_stagiaires["adresse"]."&nbsp;</td>";
echo
"<td
align=center>".$annuaire_stagiaires["cp"]."&nbsp;</td>";
echo
"<td>".$annuaire_stagiaires["ville"]."&nbsp;</td>";
echo
"<td>".$annuaire_stagiaires["courriel"]."&nbsp;</td>";
daniel
hadjadj
daniel
©
dahadjadj@free.fr
-
2005
-
page
76

cours
d’initiation
php
echo
"<td>".$annuaire_stagiaires["telephone"]."&nbsp;</td></tr>";
}
echo
"</table>";
//on
libérer
ressources.
odbc_free_result
($resultat);
//on
connection
à
base
odbc_close($conn);
?>
exercice
:
(voir
annexe
odbc
exercice
1)
afficher
liste
stagiaire
en
utiliser
connection
odbc
avoir
base
mysql
source
de
données,
avec
utilisateur=stagiaire
,
mot
de
passe
=stagiaire
base
=
formation
d'obtenir
résultat
montrer
dans
l'exemple
ci-dessous.
liste
stagiaire
n°
de
stagiaire
nom
prénom
coder
postal
adresse
1
madame
durant
21,
rue
brassens
2
mademoiselle
dupré
3
père
alain
4
5
georges
ville
courriel
n°
de
téléphone
94000
creteil
durant@free.fr
01
42
44
12
30
54,
rue
jacques
brel
75000
pari
dupre@wanadoo.fr
01
14
42
32
40
13,
rue
saint
p
93000
saint-denis
alain@htomail.com
01
52
64
72
80
monsieur
camus
albert
79,
rue
scribe
92160
antony
camus@noos.fr
01
62
73
82
90
leblanc
jean-marc
91000
montfermeil
jeanmarc.leblanc@free.fr
01
02
14
22
40
rue
blanc
manteau
exercice
:
(voir
annexe
odbc
exercice
2)
créer
source
de
donnée
odbc
permettre
d’accéder
à
base
access
"formation.mdb".
reprendre
l’exercice
précédent
adapter
de
pouvoir
obtenir
même
résultat,
en
interroger
base
access
"formation.mdb"
trouver
dans
répertoire
exercice
(vous
pouvoir
avoir
télécharger).
l’avons
vu,
être
possible
d’interroger
différentes
base
de
donnée
par
fonction
natives
être
par
odbc.
l’on
souhaiter
accéder
à
différentes
source
de
donnée
dans
programme,
devenir
fastidieux
de
changer
de
connection
fonctions.
pour
éviter
manipulations,
exister
moyen
passer
par
création
d’une
classe
regrouper
mode
de
connection
l’on
à
besoin.
classe
apporter
couche
d’abstraction
de
base
de
données.
exister
(pear
fournir
avec
php,
sql_layer
créer
par
php_nuke
etc…).
revenir
sur
sujet
chapitre
classe.
daniel
hadjadj
daniel
©
dahadjadj@free.fr
-
2005
-
page
77

cours
d’initiation
php
7.
session
cookies
7.1.
cookies
qu’est-ce
qu’un
cookie
?
cookie
être
fichier
texte
sauvegarder
sur
machine
côté
client
dans
être
stocker
données.
permettre
à
site
web
de
stocker
de
récupérer
donnée
dans
cas
d’applications
avoir
besoin
de
maintenir
état
(persistance
données)
entre
visite
de
l’utilisateur.
cookies
permettre
d’éviter
de
forcer
utilisateur
à
reconnecter
s’il
émettre
nouvelle
requête,
favoriser
navigation
personnalisée.
fichier
contenir
chaîne
de
texte
de
type
nom
=
valeur.
url
être
associer
:
permettre
client
de
savoir
s’il
devoir
renvoyer
cookie
serveur
contacté.
cookies
en
php
fonction
setcookie()
permettre
de
définir
cookies,
de
manière
suivante
:
int
setcookie(
string
nom_cookie,
string
valeur_cookie,
int
date_exp);
date
d’expiration
n’est
définie,
durée
de
vie
cookie
être
de
session.
exemple
:
<?php
setcookie("cookie",
"chocolat",
time()
+
90
*
86400);
?>
après
exécution
de
ligne,
cookie
de
nom
moncookie
de
valeur
“chocolat”
être
stocké.
être
possible
de
définir
cookies
à
valeur
multiples
:
en
effet,
cookies
être
restreindre
à
20
par
serveur.
traiter
cookie
tableau,
affecter
valeur
à
élément
tableau.
exemple
:
<?php
if
(!
!isset($cookie[0]))
{
setcookie("cookie[0]",
$nomvisiteur);
cookie[1]++;
setcookie("cookie[1]",
$cookie[1]);
echo
"bonjour
$cookie[0],
avoir
effectuer
".$cookie[1].
($cookie[1]
==
1
?
"
visite!
!"
:
"
visites!
!")."sur
page.";
//affiche
:
bonjour
(le
nom
visiteur),
avoir
effectuer
(le
nombre
de
visites)
sur
page.
?>
code
définir
cookie
devoir
apparaître
début
de
page,
dans
l’en-tête,
avant
génération
d’une
sortie
son
envoyer
navigateur.
php
envoyer
message
d’erreur
setcookie()
être
appeler
après
qu’une
réponse
http
avoir
être
envoyer
client.
attention
:
simple
espace,
caractère
de
saut
de
ligne
autre
texte,
html
générer
par
php,
suffire
à
provoquer
erreur.
dans
mêmes
condition
d’utilisation,
fonction
setcookie()
avec
nouvelle
valeur
pour
cookie
permettre
de
changer
valeur
cookie.
accéder
à
cookie
deux
méthode
permettre
d’accéder
à
cookie
:
•
variable
globale
être
associer
cookie
:
$nom_cookie
contenir
valeur_cookie
;
•
variable
d’environnement
$_cookie
[nom_cookie]
être
tableau
associatif
global
contenir
variables
provenir
de
cookies,
permettre
d’avoir
information
fiable
sur
l’origine.
exemple
:
<?php
if
(!
!isset($_cookie['cookie']))
{
setcookie("cookie",
"chocolat");
echo
"le
cookie
\$cookie
=
chocolat
avoir
être
créer
:
<br>";
echo
"vous
aller
pouvoir
avoir
accès";
echo
"<br><a
href
=
\"cookie1.php\">accès</a>";
}
else
{
echo
"\$cookie
=
".$_cookie['cookie'].",
<br>";
echo
"vous
pouvoir
utiliser
cookie";
echo
"<br><a
href
=
\"cookie2.php\">utilisation</a>";
}
?>
supprimer
cookie
daniel
hadjadj
daniel
©
dahadjadj@free.fr
-
2005
-
page
78

cours
d’initiation
php
cookie
pouvoir
être
supprimer
à
l’aide
de
fonction
setcookie()
doter
d’un
unique
paramètre
:
int
setcookie(string
nom_cookie);
exemple
:
<?php
setcookie
("cookie","");
if
(!
!isset($_cookie['cookie']))
{
echo
"\$cookie
avoir
être
détruit";
echo
"<br><a
href
=
\"cookie.php\">recommencer</a>";
}
else
{
echo
"\$cookie
aller
être
détruit";
echo
"<br><a
href
=
\"cookie4.php\">destruction</a>";
}
?>
exemple
d’utilisation
cookies
script
de
cookie.php
<?php
if
(!
!isset($_cookie['cookie']))
{
setcookie("cookie",
"chocolat");
echo
"le
cookie
\$cookie
=
chocolat
avoir
être
créer
:
<br>"
;
echo
"vous
aller
pouvoir
avoir
accès";
echo
"<br><a
href
=
\"cookie1.php\">accès</a>";
}
else
{
echo
"\$cookie
=
".$_cookie['cookie'].",
<br>";
echo
"vous
pouvoir
utiliser
cookie";
echo
"<br><a
href
=
\"cookie2.php\">utilisation</a>";
}
?>
script
de
cookie1.php
<?php
$cookie=$_cookie['cookie'];
echo
"\$cookie
être
$cookie<br>";
echo
"cette
valeur
aller
changer<br>";
echo
"<a
href
=
\"cookie3.php\">suite</a>";
?>
script
de
cookie2.php
<?php
echo
"\$cookie
être
".$_cookie['cookie']."<br>";
echo
"cette
valeur
aller
changer<br>";
echo
"<a
href
=
\"cookie3.php\">suite</a>";
?>
script
de
cookie3.php
<?php
setcookie
("cookie","café");
if
($_cookie['cookie']
==
"chocolat")
{
echo
"le
changement
n'a
avoir
lieu";
echo
"<br>la
valeur
".$_cookie['cookie']."
de
\$cookie
aller
changer";
echo
"<br><a
href
=
\"cookie3.php\">changement</a>";
}
elseif
($_cookie['cookie']
==
"café")
{
echo
"le
changement
avoir
avoir
lieu";
echo
"<br>la
nouvelle
valeur
de
\$cookie
être
".$_cookie['cookie'].",
";
echo
"nous
aller
détruire
cookie";
echo
"<br><a
href
=
\"cookie4.php\">destruction</a>";
}
?>
script
de
cookie4.php
<?php
setcookie
("cookie","");
if
(!
!isset($_cookie['cookie']))
{
echo
"\$cookie
avoir
être
détruit";
echo
"<br><a
href
=
\"cookie.php\">recommencer</a>";
}
else
{
echo
"\$cookie
aller
être
détruit";
echo
"<br><a
href
=
\"cookie4.php\">destruction</a>";
}
?>
exercice
:
(voir
annexe,
cookies)
créer
4
page
pour
manipuler
cookies.
pour
page,
permettre
à
l'utilisateur,
à
l'aide
d'un
lien
hypertexte,
de
passer
avoir
page
suivante.
daniel
hadjadj
daniel
©
dahadjadj@free.fr
-
2005
-
page
79

cours
d’initiation
php
indiquer
sur
page
l'état
valeur
cookie,
indiquer
ci-dessous.
premier
:
créer
fichier
cookie1.php
vérifier
l'éxistance
de
variable
cookie
($cookie)
avoir
valeur
"je
manger
poisson".
n'existe
pas,
être
créer
l'utilisateur
informé.
lien
permettre
de
rappeller
page.
exite
message
informer
l'utilisateur
lien
permettre
de
passer
à
page
suivante.
exemple
:
cookie
$cookie
=
"je
manger
poisson"
avoir
être
créer
:
aller
pouvoir
avoir
accès
accès
$cookie
=
manger
poisson,
pouvoir
utiliser
cookie
utilisation
second
:
créer
fichier
cookie2.php
informer
l'utilisateur
de
valeur
cookie
précédement
créer
indiquer
qu'en
cliquer
sur
lun
lien
changara
valeur.
exemple
:
"$cookie
=
manger
poisson",
pouvoir
utiliser
cookie
utilisation
$cookie
être
"je
manger
poisson"
valeur
aller
changer
suite
troisième
:
créer
fichier
cookie3.php
déterminer
valeur
cookie
avoir
changé,
oui
l'utilisateur
être
avertir
qu'en
cliquer
sur
lien
valeur
aller
changée,
non,
l'avertir
changement
avoir
avoir
lieu
qu'en
clien
sur
lien
cookie
être
détruit.
exemple
:
changement
n'a
avoir
lieu
valeur
"je
manger
poisson"
de
$cookie
aller
changer
changement
changement
avoir
avoir
lieu
nouvelle
valeur
de
$cookie
être
"je
préfere
viande",
aller
détruire
cookie
destruction
quatrième
:
créer
fichier
cookie4.php
déterminer
cookie
avoir
être
détruit,
oui
informer
l'utilisateur
insserre
lien
permettre
de
recommencer,
non,
l'informe
qu'en
cliquer
sur
lien
cookie
être
détruit.
exemple
:
$cookie
aller
être
détruire
destruction
$cookie
avoir
être
détruire
recommencer
daniel
hadjadj
daniel
©
dahadjadj@free.fr
-
2005
-
page
80

cours
d’initiation
php
7.2.
session
session
débuter
lancement
navigateur,
lorsqu’un
utilisateur
arriver
sur
page
web
terminer
à
départ.
http
être
protocole
sans
état
:
comprendre
de
mécanisme
de
maintenir
état
entre
deux
transactions.
dire
lorsqu’une
pager
web
fermer
srcipts
terminer
élément
en
mémoire
être
détruire
perdus.
avoir
recours
à
session
permettre
de
gérer
contexte
être
l’ensemble
de
variables
contenu
devoir
persister
sur
page
de
l’application.
opération
pouvoir
s’effectuer
de
manière
:
•
à
l’aide
d’un
cookie
;
•
par
passage
de
paramètre
à
lien
(url
longues)
;
•
par
passage
de
variables
poster
via
champ
cacher
;
•
par
l’utilisation
session
php.
en
php
session
être
caractériser
par
numéro
d’identification
unique
:
id
identifier
de
session.
c’est
nombre
aléatoire,
stocker
sur
machine
client
dans
cookie
être
passer
via
url.
id
de
session
jouer
rôle
d’une
clé
permettre
d’enregistrer
variables
particulières
en
"variables
de
session"
être
seule
information
relative
à
session
visible
côté
client.
variables
session
être
enregistrer
dans
fichier
texte
de
type
nom
=
valeur
sur
client
via
cookies
sur
serveur
cookies
être
disponibles.
session
avec
cookies
de
mise
en
œuvre
de
session
php,
fonction
de
session
charger
dans
définition
cookies,
avoir
condition
directive
session.use_cookies
être
égale
avoir
@ord@
fonction
session_get_cookie_params()
permettre
de
visualiser
contenu
d’un
cookie
définir
par
session.
renvoyer
tableau
associatif
contenir
élément
dater
d’expiration,
chemin,
domaine.
fonction
session_set_cookie_params()
permettre
de
définir
paramètre
d’un
cookie
de
session
:
void
session_set_cookie_params(
int
date_exp,
string
chemin
[,string
domaine]);
l’usage
de
cookies
pouvoir
poser
problèmes.
navigateur
accepter
pas,
utilisateur
désactiver
dans
navigateur
web
fonctionnalité
relative
cookies.
session
php
utiliser
par
défaut
cookies
:
possible,
cookie
être
créer
pour
stocker
l’id
de
session
courante.
dans
cadre
d’une
application
de
gestion,
l’application
reposer
sur
l’utilisation
session
être
préférable
d’éviter
d’utiliser
session
avec
cookies.
passage
paramètre
par
l’url
avec
méthode
l’id
session
être
tranmis
via
l’url.
celle-ci
adopter
php
devoir
être
compiler
avec
l’option
--enable-trans-sid
option.
pouvoir
passer
l’id
d’une
session
par
biais
d’un
hyper
lien.
php
avoir
être
configurer
avec
l’option
--enable-track-vars,
l’id
de
session
être
stocker
dans
constante
sid
:
devoir
l’ajouter
à
fin
lien,
à
manière
d’un
paramètre
get.
exemple
:
<a
href="page_2.php?<?=sid?>">lien</a>
php
n’a
être
configurer
avec
option,
falloir
placer
clé
de
session
dans
l’url
de
page
de
destination,
constituer
écriture
longue.
exemple
:
<a
href="page_2.php?session_name()=session_id()">lien</a>
fonction
session_name()
renvoi
nom
de
session
définir
dans
php.ini.
string
session_name
(
[string
name])
fonction
session_id()
renvoi
n°
de
session
définir
début
de
session
déclarer
par
session_start()
string
session_id
(
[string
id])
daniel
hadjadj
daniel
©
dahadjadj@free.fr
-
2005
-
page
81

cours
d’initiation
php
session
utiliser
fonction
php
php
comprendre
fonction
natives
de
contrôle
de
session,
en
de
contenir
dans
bibliothèque
de
base
de
php
:
phplib.
configuration
de
php.ini
fichier
de
configuration
php.ini
comporter
section
dédier
à
configuration
de
gestion
de
session.
trouver
en
particulier
paramètre
suivants
:
session.save_handler
:
avec
php4,
seule
valeur
possible
être
file,
signifier
valeur
variables
de
session
être
stocker
dans
fichier
sur
disque.
contenu
de
fichier
être
en
ascii,
pouvoir
reconnaître
nom
variables,
type
valeurs.
avec
php5
valeur
user
permettre
stockage
en
mémoire,
dans
sgbd.
session.save_path
:
paramètre
indiquer
chemin
fichier
contenir
valeur
variables
de
session.
par
défaut,
être
créer
dans
/tmp.
session.name
:
paramètre
spécifier
nom
de
session,
nom
utiliser
en
nom
cookie
de
session.
devoir
contenir
caractère
alpha
numériques.
valeur
par
défaut
être
phpsessid.
session.cookie_lifetime
:
paramètre
indiquer
durée
maximale
de
vie
cookie
envoyer
navigateur
client.
paramètre
être
zéro,
cookie
exister
jusqu'à
navigateur
être
arrêté.
c'est
valeur
par
défaut.
session.auto_start
:
paramètre
spécifier
session
être
créer
à
demande
systématiquement.
par
défaut,
à
zéro,
session
devoir
être
créer
par
session_start()
session_register().
daniel
hadjadj
daniel
©
dahadjadj@free.fr
-
2005
-
page
82

cours
d’initiation
php
ouverture
d’une
session
fonction
session_start()
initialiser
donnée
d’une
nouvelle
session
rafraîchir
donnée
de
session
en
cours.
boolean
session_start();
de
l’accès
site,
l’identificateur
de
session
pouvoir
être
trouvé,
l’appel
à
fonction
permettre
de
créer
session
de
transmettre
son
identifier
navigateur.
fonction
devoir
être
placer
en
début
de
script
devoir
être
placer
avant
l’envoie
headers
http.
enregistrement
d’une
variable
de
session
variable
de
session
être
variable
régulière
globale,
être
enregistrée,
garder
valeur
sur
page
utiliser
session.
pour
enregistrer
variable
de
session,
falloir
assigner
valeur
à
variable
aller
devenir
variable
de
session.
deux
méthode
être
possible
pour
enregistrer
variable
session
selon
directive
register_global
fichier
de
configuration
de
php
(php.ini)
être
active
:
avec
register_global=on
utiliser
fonction
session_register()
:
boolean
session_register(mixed
nom_variable[,...]);
pouvoir
enregistrer
variables
de
session
même
appel
de
fonction.
avec
register_global=off
$_session[‘mavariable’]=’valeur’
$http_session_vars[‘mavariable’]=’valeur’
sur
prochaines
page
utiliser
session
(en
appeler
fonction
session_start()),
variable
$_session[‘nom_variable’]
avoir
valeur
avoir
être
assigner
avoir
être
enregistrer
variable
de
session.
changement
de
valeur
de
variable
être
enregistrer
dans
session
sauvegarder
pour
prochaines
utilisations.
utilisation
de
variables
de
session
pouvoir
accéder
à
variable
:
avec
register_global=on
via
nom
:
$nom_variable
avec
register_global=off
par
biais
tableau
associatif
$_session
$http_session_vars
:
$_session[$nom_variable]
déterminer
variable
être
variable
de
session
enregistrer
:
avec
register_global=on
fonction
session_is_registered()
permettre
de
déterminer
variable
être
variable
de
session
enregistrer
:
boolean
session_is_registered(string
nom_variable);
renvoyer
valeur
true
variable
être
enregistrer
variable
de
session
false
dans
cas
contraire.
avec
register_global=off
pouvoir
utiliser
tableau
$_session
$http_session_vars
pour
vérifier
variable
être
enregistrer
variable
de
session
:
if(isset($_session[‘mavariable’]))
;
dés-enregistrement
de
variables
suppression
de
session
dés-enregistrement
d’une
variable
de
session
:
pouvoir
dés-enregistrer
variable
session
en
invoquer
fonction
avec
register_global
=
session_unregister()
:
boolean
session_unregister(string
nom_variable);
fonction
dés-enregistre
variable
de
session
à
fois.
avec
register_global
=
unset():
void
unset($_session['mavariable']);
daniel
hadjadj
daniel
©
dahadjadj@free.fr
-
2005
-
page
83

cours
d’initiation
php
dés-enregistrement
de
variables
de
session
:
avec
register_global
=
fonction
session_unset()
permettre
de
dés-enregistrer
variables
de
session
courantes.
void
session_unset();
avec
register_global
=
off
$_session
=
array();
suppression
de
session
:
avoir
terminer
session,
après
avoir
supprimer
variables
de
session,
pouvoir
invoquer
fonction
session_destroy()
permettre
de
supprimer
l’id
de
session.
boolean
session_destroy();
exercice
1
:
(voir
annexe,
sessions)
créer
formulaire
html
ci-dessous,
de
l’envoi
formulaire
enregistrer
saisie
de
l’utilisateur
dans
variables
session,
afficher
information
sur
second
page.
exercice
2:
(voir
annexe,
sessions)
créer
formulaire
de
connection
(figure
13),
de
l’envoi
formulaire
enregistrer
saisie
de
l’utilisateur
dans
variables
session,
afficher
information
sur
second
page.
second
page
contenir
lien
permettre
avoir
l’utilisateur
de
déconnecter
(supprimer
variables
session),
pour
revenir
à
page
de
connection.
connection
nom
:
mot
de
passe
:
figurer
13
exercice
3
:
(voir
annexe,
sessions)
reprendre
formulaire
de
connection
(figure
13),
de
l’envoi
formulaire,
avant
d’enregistrer
saisie
de
l’utilisateur
dans
variables
session,
créer
fonction
vérifier
en
comparant
daniel
hadjadj
daniel
©
dahadjadj@free.fr
-
2005
-
page
84

cours
d’initiation
php
avec
base
de
donnée
l’utilisateur
exister
mot
de
passe
être
correct,
afficher
information
sur
second
page.
second
page
contenir
lien
permettre
avoir
l’utilisateur
de
déconnecter
(supprimer
variables
session),
pour
revenir
à
page
de
connection.
daniel
hadjadj
daniel
©
dahadjadj@free.fr
-
2005
-
page
85

cours
d’initiation
php
8.
gestion
fichier
php
permettre
de
manipuler
n’importe
fichier
serveur.
avant
d’effectuer
opération
sur
fichier,
être
intéresser
de
s’assurer
fichier
existe.
fonction
file_exists()
permettre
de
faire
:
int
file_exists(string
nom_fichier);
fonction
permettre
gestion
de
fichier
être
fonction
renvoyer
true
l’opération
réussit,
false
échoue,
sauf
précision
contraire.
ouvrir
fichier
fonction
fopen()
permettre
d’ouvrir
fichier
sur
serveur
local
via
http
ftp
sur
internet.
l’utilise
de
manière
suivante
:
int
fopen(string
nom_fichier,string
mode);
l’argument
nom_fichier
désigner
nom
fichier
à
ouvrir,
l’argument
mode
correspondre
mode
d’ouverture
fichier,
accepter
l’une
valeur
suivantes
:
valeur
avoir
a+
r
r+
w
w+
description
ouverture
d’un
fichier
en
ajout
uniquement.
donnée
être
écrire
à
fin
fichier.
fichier
n’existe
pas,
php
tenter
de
créer.
ouverture
d’un
fichier
en
ajout
en
lecture.
donnée
être
écrire
à
fin
fichier.
fichier
n’existe
pas,
php
tenter
de
créer.
ouverture
d’un
fichier
pour
lecture
seule.
ouverture
d’un
fichier
en
lecture-écriture.
donnée
être
écrire
début
fichier.
ouverture
d’un
fichier
en
écriture
seule.
donnée
remplacer
contenu
fichier
être
perdu.
fichier
n’existe
pas,
php
tenter
de
créer.
ouverture
d’un
fichier
en
écriture-lecture.
donnée
remplacer
contenu
fichier
être
perdu.
fichier
n’existe
pas,
php
tenter
de
créer.
de
plus,
l’indicateur
b
indique
contenu
fichier
être
binaire
texte
(une
image
par
exemple).
fonction
fopen()
réussit,
renvoyer
pointeur
de
fichier
(entier
faire
référence
fichier
dans
appel
de
fonction
ultérieurs),
sinon,
renvoyer
false.
exemple:
<?
$var
=
file_exists("fichier.php");
if(!
!$var){
echo
"echec:
fichier
demander
n'existe
pas<br>";
}
else{
echo
"le
fichier
demander
existe<br>";
if(!
!$mavar
=
fopen("fichier.php","r"))
{
echo
"echec
:
fichier
n'a
être
ouvert<br>";
}
else{
echo
"le
fichier
avoir
être
ouvert<br>";
echo
"voici
contenu<br><br><br>";
fpassthru
($mavar);
}
}
//affiche
formulaire
de
page
fichier.php
fichier
?>
daniel
hadjadj
daniel
©
dahadjadj@free.fr
-
2005
-
page
86

cours
d’initiation
php
fermer
fichier
après
lecture
d’un
fichier,
devoir
refermer.
fonction
utiliser
être
:
mixed
fclose(int
pointeur_fichier);
naviguer
dans
fichier
php
posséder
fonction
permettre
de
définir
avec
précision
longueur
de
chaîne
à
lire
dans
fichier,
de
déplacer
à
position
spécifique
fichier.
fonction
rewind()
:
int
rewind(int
pointeur_fichier);
placer
l’indicateur
de
position
début
fichier.
fonction
fseek()
:
int
fseek(
int
pointeur_fichier,
int
decalage);
l’argument
décalage
être
nombre
d’octets
de
caractère
par
rapport
début
fichier.
attention
:
fonction
retourner
–1
en
cas
d’erreur
0
en
cas
de
réussite.
fonction
ftell()
:
int
ftell(int
pointeur_fichier);
fonction
renseigner
sur
position
de
l’indicateur
dans
un
fichier.
fonction
feof()
:
int
feof(int
pointeur_fichier);
afficher
fichier
l’opération
consister
à
envoyer
contenu
fichier
vers
flux
de
sortie.
fonction
utiliser
être
:
int
fpassthru(int
pointeur_fichier);
effectuer
lecture
de
position
courante
à
fin
fichier,
refermer
fichier.
paramètre
de
fonction
être
pointeur
fichier
renvoyer
par
fonction
fopen().
lire
fichier
l’affichage
en
totalité
d’un
fichier
n’est
souhaitable.
fonction
php
de
lecture
de
fichier
permettre
de
lire
données.
fonction
fread()
:
string
fread(
int
pointeur_fichier,
int
longeur);
paramètre
longueur
indiquer
nombre
de
caractère
depuis
début.
lecture
terminer
fonction
rencontrer
fin
fichier.
fonction
fgets()
:
string
fgets(int
pointeur_fichier,
int
longueur);
paramètre
longueur
indiquer
nombre
de
caractère
caractère
depuis
début.
lecture
terminer
fonction
rencontrer
caractère
de
saut
de
ligne
fin
fichier.
fonction
fgetss()
:
string
fgetss(
int
pointeur_fichier,
int
longueur);
fonction
avoir
même
effet
fonction
fgets(),
exclure
balise
html
php
de
l’affichage.
fonction
fgetc()
:
string
fgetc(int
pointeur_fichier);
fonction
permettre
de
lire
premier
caractère
situer
à
position
courante.
fonction
file()
:
array
file(string
nom_fichier);
fonction
lire
contenu
d’un
fichier
qu’elle
placer
dans
tableau,
ligne
fichier
être
représenter
par
élément
tableau
(la
premier
ligne
correspondre
à
l’élément
zéro).
fonction
filesize()
:
int
filesize
(
string
filename)
renvoi
taille
fichier.
daniel
hadjadj
daniel
©
dahadjadj@free.fr
-
2005
-
page
87

cours
d’initiation
php
exemple
:
<?php
if(!
!$fichier
=
fopen("texte.txt","r"))
{
echo
"ouverture
fichier
impossible";
}else
{
$text1
=
fread($fichier,17);
echo
"$text1<br>";
//affiche
:
fichier
être
(les
14
premier
caractère
+
<p>)
$text2
=
fgets($fichier,50);
echo
"$text2<br>";
//
affiche
:
destiner
à
apprendre
à
insérer
fichier
(s'arrête
saut
de
ligne)
rewind($fichier);
$text4
=
fgetss
($fichier,18);
echo
"$text4<br>";
//
affiche
:
fichier
être
echo
"<br>";
rewind($fichier);
//
replacer
pointeur
début
fichier
while(!
!feof($fichier))
{
echo(fgetc($fichier));
//
afficher
caractère
fichier
jusqu'à
fin
fichier
}
echo
"<br>";
rewind($fichier);
$arrtext
=
file("texte.txt");
//
placer
contenu
fichier
dans
tableau
for
($i
=
0
;
$i
<
count($arrtext)
;
$i++)
{
//
ligne
texte
être
insérer
dans
balise
<b>
...
</b>
//
pour
mettre
texte
en
gras
echo
"<b>$arrtext[$i]</b><br>";
}
//renvoi
taille
fichier
echo
filesize("texte.txt")."
octets<br>";
fclose($fichier);
}
?>
exercice
1
:
(voir
annexe,
gestion
fichiers)
fichier
"
stagiaires_mdb.txt"
contenir
liste
stagiaires.
ouvrer
fichier
en
lecture
seule
afficher
contenu.
ecrire
dans
fichier
pour
écrire
chaîne
dans
fichier,
pouvoir
utiliser
l’une
deux
fonction
fputs()
fwrite()
être
identique
en
point
:
int
fputs(int
fichier_pointeur,string
str,[int
longeur]);
int
fwrite(int
fichier_pointeur,string
str,[int
longeur]);
dernier
paramètre
n’apparaît
pas,
chaîne
être
écrire
en
totalité.
exemple
:
<?php
if($fichier
=
fopen("texte2.txt","a"))
{
fputs($fichier,"nous
insérer
nouvelle
ligne
à
fin
fichier");
}
?>
copier,
supprimer
renommer
fichier
fonction
copy()
permettre
de
copier
fichier
:
int
copy(
string
source,string
destination);
fonction
unlink()
supprimer
fichier
:
daniel
hadjadj
daniel
©
dahadjadj@free.fr
-
2005
-
page
88

cours
d’initiation
php
int
unlink(string
nom_fichier);
fonction
rename()
permettre
de
renommer
fichier
:
int
rename(
string
ancien_name,
string
nouveau_nom);
exemple
:
copier
fichier
<?php
$fichier
=
"texte.txt";
copy($fichier,"../rep/".$fichier);
echo
"fichier
copier
dans
répertoire
rep<br><a
href=\"ex3p40.php\">suite</a>";
?>
supprimer
fichier
<?php
$fichier
=
"texte.txt";
unlink("../rep/".$fichier);
"fichier
$fichier
supprimé<br><a
ref=\"ex2p40.php\">retour</a>";
echo
"le
fichier
$fichier
avoir
être
supprimé";
?>
renommer
fichier
<?php
$fichier
=
"texte.txt";
rename($fichier,
"nouveau_texte.txt");
echo
"le
fichier
$fichier
avoir
être
renommer
nouveau_texte.txt";
?>
exercice
2
:
(voir
annexe,
gestion
fichiers)
créer
quatre
fichier
suivre
:
"creer_fichier.php"
,
"copy_fichier.php",
"rename_fichier.php"
"supp_fichier.php".
premier,
"creer_fichier.php"
créer
fichier
stagiaires.txt
inserrera
deux
ligne
suivantes
:
"voici
l'insertion
de
premier
ligne
de
fichier<br>"
"voici
l'insertion
de
deuxième
ligne
de
fichier<br>"
fichier
exister
déjà,
contenu
être
supprimer.
l’utilisateur
être
informer
par
message
résultat
de
l’opération,
contenu
fichier
être
affiché.
second,
"copy_fichier.php"
copier
fichier
stagiaires.txt
en
stagiaires_sav.txt.
informer
l’utilisateur
résultat
de
l’opération.
troisième,
"rename_fichier.php",
renomera
fichier
stagiaires_sav.txt
en
lst_stagiaires.txt
contenu
nouveau
fichier
être
affiché.
informer
l’utilisateur
résultat
de
l’opération.
quatrième,
"supp_fichier.php"
supprimer
fichier
stagiaires.txt,
stagiaires_sav.txt
lst_stagiaires.txt.
informer
l’utilisateur
résultat
de
l’opération.
daniel
hadjadj
daniel
©
dahadjadj@free.fr
-
2005
-
page
89

cours
d’initiation
php
chargement
de
tableau
à
partir
de
fichier
avoir
voir
fonction
file()
placer
contenu
d’un
fichier
dans
tableau
:
ligne
fichier
être
représenter
par
élément
tableau
scalaire.
pouvoir
utiliser
fonction
tableau
scalaires
pour
accéder
donnée
fichier.
array
file(string
url_fichier);
exemple
:
<?php
$orders
=
file("orders.txt");
//
contenu
fichier
être
placer
dans
tableau
$orders
$num
=
count($orders);
//
compter
nombre
d'éléments
tableau
if
($num
==
0)
{
echo
"rien
à
afficher,
réessayer
tard";
}
else
{
for
($i
=
0;
$i
<
$num
;
$i++)
{
echo
"$orders[$i]<br>";
//
afficher
ligne
fichier
}
}
?>
exercice
:
(voir
annexe,
chargement
de
tableau
à
partir
de
fichiers)
fichier
texte
stagiaire_mdb.txt
être
issue
d’une
éxportation
d’une
base
access,
contenir
liste
stagiaire
coordonnées.
de
avoir
être
générer
avec
ligne
délimiter
par
;
champ
délimiter
par
"
(guillemet).
afficher
dans
page,
stagiaire
avec
adresse
téléphone
en
dessous.
exemple
:
numéro
de
stagiaire
:
1
madame
durant
21,
rue
georges
brassens
94000
creteil
téléphoner
:
01
42
44
12
30
daniel
hadjadj
daniel
©
dahadjadj@free.fr
-
2005
-
page
90

cours
d’initiation
php
gérer
répertoire
fonction
chdir()
permettre
de
définir
répertoire
courir
:
mixed
chdir(string
repertoire);
par
défaut,
répertoire
d’une
page
php
s’affiche
être
répertoire
dans
réside.
être
avantageux
de
basculer
autres
répertoire
dans
répertoire
pour
pouvoir
accéder
fichiers,
de
spécifier
chemin
d’accès
complet
de
fichier.
fonction
opendir()
permettre
d’ouvrir
répertoire
:
mixed
opendir(string
chemin);
fonction
retourner
pointeur
de
répertoire,
valeur
entière
permettre
de
référer
répertoire
ouvrir
dans
appel
de
fonction
ultérieurs.
fonction
readdir()
permettre
de
lire
entrée
répertoire
ouvert
:
string
readdir(int
pointeur_repertoire);
fonction
renvoyer
false
lorsqu’elle
avoir
échouer
fin
répertoire
être
atteinte.
exemple
:
<?
chdir("../exercice");
$rep
=
opendir(".");
while
($fichier
=
readdir($rep))
{
echo
"$fichier<br>";
}
//affiche
fichier
répertoire
exercice
?>
fonction
rewinddir()
permettre
de
revenir
début
répertoire
:
void
rewinddir(int
pointeur_repertoire);
fonction
closedir()
permettre
de
fermer
répertoire
de
libérer
ressource
:
void
rewinddir(int
pointeur_repertoire);
fonction
mkdir()
permettre
de
définir
nouveau
répertoire
:
int
mkdir(string
chemin_repertoire,
int
mode);
second
paramètre
désigner
permission
d’accès
répertoire
unix
;
windows
tenir
compte
de
paramètre.
exemple
:
<?
if
(mkdir("../rep/new",0700))
{
echo
"le
répertoire
avoir
être
créé!
!";
}
else
{
echo
"échec
:
répertoire
n'a
pouvoir
être
créé.";
}
?>
fonction
rmdir()
permettre
de
supprimer
répertoire
:
int
rmdir(string
nom_repertoire);
fonction
basename
séparer
nom
fichier
nom
dossier.
string
basename
(
string
path
[,
string
suffix])
exercice
:
(voir
annexe,
gérer
répertoires)
créer
quatre
fichier
suivre
:
"creer_
"rename_repertoire.php"
"supp_
repertoire.php".
repertoire.php"
,
"copy_
repertoire.php",
premier,
"creer_
repertoire.php"
créer
repertoire1
repertoire2
fichier
stagiaires.txt
dans
repertoire1
inserrera
dans
fichier
deux
ligne
suivantes
:
"voici
l'insertion
de
premier
ligne
de
fichier<br>"
"voici
l'insertion
de
deuxième
ligne
de
fichier<br>"
daniel
hadjadj
daniel
©
dahadjadj@free.fr
-
2005
-
page
91

cours
d’initiation
php
fichier
exister
déjà,
contenu
être
supprimer.
l’utilisateur
être
informer
par
message
résultat
de
l’opération,
contenu
fichier
être
affiché.
second,
"copy_repertoire.php"
copier
fichier
stagiaires.txt
en
stagiaires_sav.txt
dans
repertoire2.
informer
l’utilisateur
résultat
de
l’opération.
troisième,
"rename_repertoire.php",
renomera
fichier
stagiaires_sav.txt
en
lst_stagiaires.txt
dans
repertoire1
contenu
nouveau
fichier
être
affiché.
informer
l’utilisateur
résultat
de
l’opération.
quatrième,
"supp_fichier.php"
supprimer
deux
répertoire
contenus.
informer
l’utilisateur
résultat
de
l’opération.
daniel
hadjadj
daniel
©
dahadjadj@free.fr
-
2005
-
page
92

cours
d’initiation
php
afficher
image
php
utiliser
bibliothèque
gd
pour
image
hormis
simples
d’entre
elles.
php
permettre
de
créer
de
manipuler
images,
dans
grand
choix
de
formats,
gif,
png,
jpg,
wbmp
xpm.
php
pouvoir
générer
image
pour
navigateur,
avec
librarie
gd.
utilisation
d’image
simple
:
utiliser
balise
<img>
pour
afficher
image
:
<img
src="
mon_image"
width="129"
height="76">
php
permettre
d’afficher
image
grace
avoir
balise
<input>
:
<input
name='imagefield'
type='image'
src='mon_image'>;
php
rencontrer
balise,
contenter
d’interroger
serveur
d’obtenir
l’image
transmettre
navigateur
faire
d’autre.
getimagesize
:
fonction
getimagesize(),
être
utile
puisqu’elle
retourner
taille
d'une
image
tableau
de
4
éléments.
l'index
0
contenir
largeur.
l'index
1
contenir
longueur.
l'index
2
contenir
type
de
l'image
:
1
=
gif,
2
=
jpg,
3
=
png,
5
=
psd,
6
=
bmp.
l'index
3
contenir
chaîne
:
"height=xxx
width=xxx".
array
getimagesize
(
string
filename
[,
array
imageinfo])
pouvoir
obtenir
information
utiles
sur
l’image
placer
dans
balise
html.
exercice
:
(voir
annexe,
afficher
image
exercice
1)
a
l’aide
d’une
liste
de
séléction
(<select>)
afficher
liste
image
contenir
dans
répertoire
image
(voir
figurer
ci-dessous).
permettre
à
l’utilisateur
d’afficher
l’image
sélectionner
à
l’aide
de
balise
img
input.
liste
image
disponibles
afficher
librarie
gd
de
pouvoir
utiliser
librairie
gd,
devoir
préalable
charger
module.
pour
faire,
ajouter
ligne
suivante
dans
partie
extension
fichier
de
configuration
de
php
(php.ini).
exemple
:
;;;;;;;;;;;;;;;;;;;;;;
;
dynamic
extension
;
;;;;;;;;;;;;;;;;;;;;;;
extension=php_gd2.dll
;
librarie
gd
php
disposer
de
nombreuses
fonction
relatives
traitement
images,
contenter
de
unes.
fonction
utiliser
l’entête
de
fichier,
dire
devoir
être
utiliser
avant
autre
commande
transmettre
flux
de
données.
imagecreatefromgif
:
créer
nouvelle
image
gif
à
partir
d'un
fichier
d'une
url.
resource
imagecreatefromgif
(
string
filename)
imagegif
:
envoyer
image
gif
vers
navigateur
fichier
daniel
hadjadj
daniel
©
dahadjadj@free.fr
-
2005
-
page
93

cours
d’initiation
php
int
imagegif
(
resource
im,
string
filename)
imagecreatefromjpeg
:
créer
nouvelle
image
jpeg
à
partir
d'un
fichier
d'une
url
resource
imagecreatefromjpeg
(
string
filename)
imagejpeg
:
envoyer
image
jpeg
vers
navigateur
fichier.
int
imagejpeg
(
resource
im
[,
string
filename
[,
int
quality]])
imagecreatefrompng
:
créer
nouvelle
image
png
à
partir
d'un
fichier
d'une
url
resource
imagecreatefrompng
(
string
filename)
imagepng
:
envoyer
image
png
vers
navigateur
fichier
int
imagepng
(
resource
im
[,
string
filename])
imagedestroy
:
détruire
image
libérer
mémoire
associer
à
l'image
im.
im
être
identifier
d'image
valide
retourner
par
fonction
de
création
d’image
(imagecreate()
par
exemple)
int
imagedestroy
(
resource
im)
exemple
de
création
d’image
:
<?php
//
définition
de
l'image
$hauteur
=
200;
$largeur
=
200;
$image
=
imagecreate
($largeur,
$hauteur);
//
identificateur
de
couleur
blanc
$blanc
=
imagecolorallocate
($image,
255,
255,
255);
//
identificateur
de
couleur
noir
$noir
=
imagecolorallocate
($image,0,
0,
0);
//
dessin
de
l'image
imagefill($image,
0,
0,
$noir);//
peindre
fond
noir
imageline
($image,
0,
0,
$largeur,
$hauteur,
$blanc);
//
tracer
trait
blanc
coin
supérieur
gauche
(0,
0)
//
jusqu'au
coin
inférieur
droit
($largeur,
$hauteur)
imagestring($image,
4,
50,
150,
"ventes",
$blanc);
//
ajouter
légende
"ventes"
graphique
de
police
4,
point
initial
(50,
150)
//
génération
de
l'image
header
("content-type
:
image/png");
imagepng
($image);
//
nettoyage
imagedestroy($image);
?>
exercice
:
(voir
annexe,
afficher
image
exercice
2)
a
l’aide
d’une
liste
de
séléction
(<select>)
afficher
liste
image
contenir
dans
répertoire
image
(comme
exercice
précédent).
permettre
à
l’utilisateur
d’afficher
l’image
sélectionner
en
utiliser
fonction
de
librairie
gd.
daniel
hadjadj
daniel
©
dahadjadj@free.fr
-
2005
-
page
94

cours
d’initiation
php
9.
gestion
erreur
introduction
php
constituer
environnement
pratique
pour
débogage
gestion
erreurs.
permettre
de
détecter
erreur
d’y
réagir
en
laisser
latitude
quant
à
façon
message
d’erreurs
être
affichés.
9.1.
type
d’erreurs
php
trois
grands
groupe
d’erreurs
de
programmation
pouvoir
être
distinguer
:
erreur
de
syntaxe
de
compilation,
survenant
syntaxe
code
être
erronée.
erreur
de
sémantique
d’exécution,
produire
programme
exécuter
code
syntaxe
être
correcte
;
erreur
logique
provoquer
l’apparition
d’un
message
d’erreur
avoir
pour
résultat
programme
effectuer
autre
chose
être
souhaiter
par
programmeur.
avoir
erreur
d’environnement
être
devoir
à
faute
programmeur
à
ensemble
de
facteur
d’environnement
sur
programmeur
n’a
contrôle.
erreur
de
syntaxe
erreur
de
syntaxe
produire
de
l’analyse
code,
avant
exécution.
l’analyseur
indiquer
numéro
de
ligne
s’est
produire
l’erreur.
exemple
:
1
<?php
2
$var
=
"test
d'erreur"
3
echo
$var;
4
?>
manquer
";"
de
fin
d’instruction
l’analyseur
détecter
erreur
à
ligne
3
devoir
trouver
de
nouvelle
instruction,
";"
de
fin
d’instruction
être
absent
de
ligne
2
erreur
de
sémantique
erreur
sémantique
n’est
détecter
par
l’analyseur
syntaxe
être
correcte
:
survenir
php
tenter
d’exécuter
ligne.
exemple
:
<?php
fopen("fichier.txt");
?>
ligne
présenter
d’erreur
de
syntaxe,
fonction
fopen()nécessite
deux
paramètre
erreur
de
sémantique
n’est
identifiable.
daniel
hadjadj
daniel
©
dahadjadj@free.fr
-
2005
-
page
95

cours
d’initiation
php
erreur
logique
l’erreur
logique
être
délicate
à
identifier
correspondre
à
code
parfait
par
syntaxe
sémantique
:
produire
de
message
d’erreur.
dans
plupart
cas,
aboutir
à
résultat
n’est
attendu.
erreur
d’environnement
même
dans
cas
code
être
dépourvu
de
bogue,
n’est
garantir
qu’il
s’exécutera
sans
erreur.
en
effet
programmeur
devoir
s’appuyer
sur
élément
qu’il
contrôle
pas,
l’échec
d’ouverture
d’une
base
de
données,
l’impossibilité
d’ouvrir
fichier
include
…
être
important
de
s’assurer
de
présence
d’une
gestion
d’erreur
adapter
à
quelconque
erreur
d’environnement.
message
d’erreur
php
message
d’erreurs
php
être
descriptifs.
correspondre
à
forme
suivante
:
niveau_erreur
:
message_erreur
in
nom_fichier
line
#
9.2.
niveau
d’erreur
php
erreur
d’analyse
:
"parse
error"
c’est
erreur
de
syntaxe
détecter
par
l’analyseur.
de
profondes
modification
dans
moteur
php
passage
de
php3
à
php4
entraîner
effet
différent
d’une
erreur
d’analyse.
php3
être
langage
interpréter
:
moteur
interpète
ligne
de
code,
l’exécute
passer
à
suivante.
php4
précompile,
php5
compiler
script
avant
d’exécuter
script.
changement
impliquer
erreur
d’analyse
php3
de
détecter
avant
d’avoir
atteindre
ligne
fautive
être
épingler
par
php
avant
l’exécution
de
moindre
ligne
de
code.
erreur
fatale
:
"fatal
error"
c’est
erreur
de
sémantique
d’environnement
php
pouvoir
surmonter
:
entraîner
l’interruption
immédiate
script,
php
pouvoir
continuer
sans
l’exécution
de
ligne
s‘est
produire
l’erreur.
avertissement
:
"warning"
s’il
renccontre
avertissement,
php
tenter
de
poursuivre
l’exécution
script.
s’agit
en
général
d’erreur
grave
pour
compromettre
bonne
exécution
programme
(de
nombreuses
erreur
d’environnement
entraîner
warning).
gestion
erreur
permettre
de
réagir
à
erreurs,
défaillance
initiale
provoquer
d’autres
erreur
script
poursuivre
exécution.
remarquer
remarque
(notices)
être
devoir
à
erreur
de
faible
importance,
qu’une
variable
initialisée.
par
défaut
php
n’est
configurer
pour
afficher
remarques,
pouvoir
être
activer
constituer
bon
moyen
de
détecter
erreurs.
définition
niveau
de
rapport
d’erreur
différents
type
d’erreur
d’alerte
être
:
valeur
constante
description
1
e_error
erreur
fatale
d’exécution
noter
2
e_warning
alerter
d’exécution
(erreur
fatale)
4
e_parse
erreur
de
compilation
8
e_notice
noter
d’exécution
(moins
critique
alertes)
16
e_core_error
erreur
survenir
de
l’initialisation
de
php
php4
supérieur
32
e_core_warning
alertes
survenir
de
l’initialisation
de
php
php4
supérieur
64
e_compile_error
erreur
fatale
de
compilation
php4
supérieur
128
e_compile_warning
alerte
de
compilation
(erreur
fatale)
php4
supérieur
256
e_user_error
erreur
générer
par
l’utilisateur
php4
supérieur
512
e_user_warning
alerter
générer
par
l’utilisateur
php4
supérieur
1024
e_user_notice
noter
générer
par
l’utilisateur
php4
supérieur
e_all
erreur
daniel
hadjadj
daniel
©
dahadjadj@free.fr
-
2005
-
page
96

cours
d’initiation
php
valeur
(numériques
symboliques)
être
utiliser
pour
construire
champ
de
bit
spécifier
erreur
rapporter.
opérateur
de
bit
être
utilisables
pour
combiner
valeur
conserver
être
intéresantes.
niveau
de
rapport
d’erreur
être
définir
dans
fichier
«
php.ini
»
niveau
script
par
fonction
error_reporting().
définition
niveau
de
rapport
d’erreur
dans
«
php.ini
»
c’est
définition
de
valeur
de
«
error_reporting
»
définir
niveau
de
rapport
d’erreur.
par
défaut,
niveau
de
rapport
d’erreur
être
définir
à
e_all
&
~e_notice
(à
valeur
7
pour
«
php3.ini
»).
définition
niveau
de
rapport
d’erreur
dans
script
:
fonction
error_reporting()
accepter
argument
spécifier
niveau
d’erreur
à
afficher.
pour
déterminer
valeur
de
l’argument,
falloir
ajouter
valeur
niveau
d’erreurs
à
afficher.
pour
désactiver
rapport
d’erreur,
falloir
appeler
fonction
avec
l’argument
à
paramètrage
par
défaut
être
équivalent
à
l’appel
de
fonction
avec
valeur
7
(1
+
2
+
4).
pour
l’affichage
de
erreurs,
falloir
appel
de
fonction
à
15
(1
+
2
+
4
+
8).
être
conseiller
de
remplacer
message
d’erreur
standard
par
gestion
harmonieuse
erreur
d’environnement
de
journaliser
sans
afficher
message
standard
php
à
l’utilisateur.
9.3.
gérer
erreur
plupart
fonction
php
retourner
0
en
cas
d’erreur.
avec
test
être
simple
de
gérer
l’erreur.
exemple
:
<?php
if(mysql_connect($db,
$utilisateur,
$password))
{
//
code
d'accès
à
base
de
donnée
situer
ici'
}
?>
suppression
message
d’erreur
dans
l’exemple
précédent,
en
cas
d’erreur
message
d’erreur
être
afficher
:
daniel
hadjadj
daniel
©
dahadjadj@free.fr
-
2005
-
page
97

cours
d’initiation
php
être
possible
de
supprimer
message
d’erreur
de
deux
façon
:
avec
fonction
error_reporting()
vue
;
avec
l’opérateur
de
contrôle
d’erreur
"@"
permettre
d’ignorer
message
d’erreur
générer
par
l’expression
qu’il
préfixe.
l’option
track_errors
de
"php.ini"
être
activée,
message
d’erreurs
être
sauver
dans
variable
globale
$php_errormsg,
être
écraser
à
erreur.
exemple
:
<?php
if
(@mysql_connect($db,
$utilisateur,
$password))
{
//
code
d'accès
à
base
de
donnée
situer
ici'
}
echo
"le
message
d'erreur
:
<br><b><u>$php_errormsg</u></b>";
?>
message
d’erreur
personnaliser
message
d’erreur
personnaliser
pour
l’utilisateur
être
percevoir
message
d’erreur
standard.
suffire
d’ajouer
test
clause
"else"
pouvoir
contenir
message
d’erreur
instruction
pour
terminer
l’exécution
script.
fonction
die()
entraîner
fin
d’exécution
script
l’affichage
d’une
chaîne
de
caractère
qu’elle
prendre
en
argument
(elle
pouvoir
exécuter
fonction
en
argument).
fonction
exit()
jouer
même
rôle
sans
message.
exemple
:
<?php
if
(@mysql_connect($db,
$utilisateur,
$password))
{
//
code
d'accès
à
base
de
donnée
situer
ici'
}
else
{
exit("<h1>désolé!
!</h1><p>impossible
d'établir
connexion
pour
moment.<br>réessayer
tard</p>");
}
echo
"cette
partir
script
être
afficher
connexion
avoir
pouvoir
faire";
?>
être
possible
de
rediriger
l’utilisateur
vers
page
d’erreur
aucn
contenir
n’a
être
envoyer
navigateur
avec
fonction
header()
(fonction
d’en-tête)
:
exemple
:
<?php
header("location:error.php")
//
redirige
vers
page
error.php
?>
être
possible
d'imprimer
élément
de
javascript
côté
client,
navigateur
prendre
en
charge
javascript
exemple
:
<?php
if
(!
!isset($_request['var']))
{
echo
"<form
action=\"test.php\">\n
daniel
hadjadj
daniel
©
dahadjadj@free.fr
-
2005
-
page
98

cours
d’initiation
php
nom
<input
type=\"text\"
name=\"var\">\n<br>
<input
type=\"submit\"
value=\"
envoyer\">\n</form>";
}
else
{
if
(empty($_request['var']))
{
//
l'utilisateur
n'a
remplir
champ
$var
echo
"<script
language=\"javascript\">
alert(\"vous
devoir
remplir
champ\")
</script>";
echo
"<form
action=\"test.php\">\n
nom
<input
type=\"text\"
name=\"var\">\n<br>
<input
type=\"submit\"
value=\"envoyer\">\n</form>";
}
else
{
//
utilisation
de
$_request['var']
}
}
?>
l’utilisateur
faire
l’erreur
de
remplir
formulaire
avant
de
l’envoyer,
message
javascript
s’affiche
journalisation
erreur
fonction
error_log()
mettre
en
journal
erreur
pouvoir
subvenir.
int
error_log(
string
message,
int
type_message
[,string
destination
[,string
extra_headers]]);
paramètre
message
être
message
d’erreur
devoir
être
mettre
dans
journal.
paramètre
type_message
définir
type
de
cible
vers
aller
être
diriger
message
d’erreur
:
0
:
journal
d’erreur
système
de
php,
pouvoir
être
définir
dans
«
php.ini
»
par
directive
error_log
:
par
défaut,
c’est
journal
serveur
web
(error.log
d’apache
:
…/apache/logs/error.log)
1
:
adresse
électronique
transmettre
troisième
paramètre
2
:
port
de
débogage
(si
débogage
être
activé)
3
:
fichier
journal
spécifier
dans
troisème
argument
paramètre
destination
être
l’adresse
électronique
type_message
être
1,
l’emplacement
fichier
journal
type_message
être
daniel
hadjadj
daniel
©
dahadjadj@free.fr
-
2005
-
page
99

cours
d’initiation
php
@ord@
programmation
orienter
objet
10.1.
concept
de
programmation
orienter
objet
programmation
orienter
objet,
programmation
modulaire,
permettre
réutilisation
de
code.
php
permettre
modularité
via
programmation
de
librairie
de
classes.
logiciel
orienter
objet
être
concevoir
construire
sous
forme
d’un
d’objets
indépendants
doter
à
fois
d’attributs
d’opérations
interagir
pour
répondre
à
besoins.
«
attribut
»
être
propriété
variables
rapporter
à
l’objet.
«
méthodes»
être
action
fonction
l’objet
pouvoir
accomplir
pour
modifier
lui-même,
pour
produire
effet
externe.
donnée
contenir
dans
objet
être
accessibles
par
biais
méthode
de
l’objet
former
l’«
interface
»
de
l’objet.
plupart
script
web
rester
concevoir
écrire
en
appliquer
méthodologie
orienter
fonctions,
être
de
petite
taille
simples.
nombre
de
projet
web
évoluer
d’un
ensemble
de
page
hyper
lier
vers
application
complexes
requérir
méthodologie
de
développement
réfléchie.
l’orientation
objet
pouvoir
aider
à
gérer
complexité
projet
logiciels,
à
augmenter
réutilisabilité
code,
par
conséquent
à
réduire
coût
de
maintenance.
objet
être
collection
unique
identifiable
de
donnée
stocker
de
méthode
agir
sur
données.
objet
pouvoir
être
regrouper
en
«
classe
».
classe
être
ensemble
d’objets
pouvoir
être
différents
un
autres,
caractériser
par
point
communs.
contenir
objet
présenter
méthode
comporter
de
même
manière,
attribut
identiques
représenter
mêmes
choses,
valeur
de
attribut
pouvoir
varier
d’un
objet
à
l’autre
sein
de
classe.
différentes
classe
devoir
pouvoir
présenter
comportement
différents
pour
même
méthode
:
c’est
«
polymorphisme
»,
caractériser
comportement
objets,
objet
eux-mêmes.
en
php,
fonction
membre
d’une
classe
pouvoir
être
polymorphiques.
concept
d’«
héritage
»
permettre
de
créer
relation
hiérarchique
entre
classes,
moyen
de
sousclasses.
sous-classe
hériter
attribut
méthode
de
classe
parent.
concept
permettre
d’élaborer
d’enrichir
jeu
de
classe
existant,
de
rendre
code
réutilisable,
constituer
atout
indéniables
de
programmation
orienter
objet
:
méthode
pouvoir
être
implémentées
seule
fois
dans
classe
parent
lieu
de
l’être
de
nombreuses
fois
dans
sous-classe
séparées.
dans
cadre
d’un
développement
pour
web,
classe
pouvoir
être
utiliser
pour
représenter
page
web,
composants
d’interface
utilisateur,
carte
d’achat,
gestionnaires
d’erreur,
catégorie
de
produits,
clients.
en
php
5,
avoir
nouveau
model
objet.
gestion
objet
en
php
avoir
être
réécrite,
permettre
de
meilleurs
performance
de
fonctionnalités.
daniel
hadjadj
daniel
©
dahadjadj@free.fr
-
2005
-
page
100

cours
d’initiation
php
11.
classe
objet
(php
4)
classe
classe
être
collection
de
variables
de
fonction
fonctionner
avec
variables.
classe
former
type
de
variable
objet.
11.1.
création
d’une
classer
création
d’une
classe
s’effectue
moyen
mot
clé
class
:
structure
de
définition
d’une
classe
nom_classe
{
}
classe
devoir
être
doter
d’attributs
de
méthodes.
création
d’attributs
:
déclarer
variables
sein
d’une
définition
de
classe
,
variables
devenir
attribut
de
classe
appellées
membre
de
classe
déclaration
attribut
fait
par
l’intermédiaire
mot
clé
var
:
structure
de
définition
d’un
attribut
nom_classe
{
var
$attribut1;
var
$attribut2;
}
création
de
méthode
:
déclarer
fonction
sein
de
définition
de
classe,
devenir
méthode
de
classe
:
structure
de
définition
d’une
méthode
nom_classe
{
function
nom_fonction
($parametres)
{
corps
de
fonction
}
}
constructeur
de
classe
exister
méthode
spéciale,
constructeur,
être
être
fonction
appeler
par
classe
créer
nouvelle
instance
d'une
classe.
fonction
constructeur
avoir
même
nom
classe.
en
php
3,
fonction
devenir
constructeur
porter
même
nom
classe.
en
php
4,
fonction
devenir
constructeur
porter
même
nom
classe
dans
être
définie.
différence
être
subtile,
cruciale.
constructeur
être
utile
pour
initialiser
données
membre
de
l’instanciation.
daniel
hadjadj
daniel
©
dahadjadj@free.fr
-
2005
-
page
101

cours
d’initiation
php
structurer
de
définition
d’un
constructeur
nom_classe
{
function
nom_classe
($parametres)
{
}
//
méthode
constructeur
corps
de
fonction
}
attention
:
pouvoir
attribuer
même
nom
à
fonctions.
11.2.
instanciation
l’instanciation
correspondre
à
création
d’objets.
classe
former
type
de
variable.
pour
créer
variable
type
désiré,
devoir
utiliser
l'opérateur
new.
devoir
spécifier
classe
l’objet
créer
être
l’instance
fournir
paramètre
requérir
par
constructeur
de
classe.
$objet
=
new
nom_classe($parametres);
exemple
:
<?php
//
déclaration
de
classe
ma_classe
ma_classe
{
function
ma_classe($mavar)
{
echo
"le
constructeur
appeler
paramètre
<b>$mavar</b><br>";
}
}
//instanciaition
de
classe
ma_classe
$a
=
new
ma_classe("nouveau
paramètre");
?>
création
de
l'objet
$a
de
type
ma_classe
permettre
d'afficher
:
constructeur
appeler
paramètre
nouveau
paramètre.
11.3.
accès
attribut
méthode
d’une
classe
sein
d’une
classe,
pointeur
$this
permettre
de
faire
référence
à
attribut
:
$this->attribut
pour
appeler
méthode
falloir
spécifier
nom,
suivre
paramètre
requis
placer
entre
parenthèses,
préciser
l’objet
appartenir
:
$objet->methode($parametres);
exemple
:
<?php
//
déclaration
de
classe
ma_classe
ma_classe
{
var
$attribut;
function
operation($mavar)
{
$this->attribut
=
$mavar;
//
accès
à
l'attribut
sein
de
classe
echo
$this->attribut."
attribut";
}
}
$a
=
new
ma_classe();
$a->operation
("nouvel");
//affiche
:
nouvel
attribut
?>
accesseurs
accesseurs
être
fonction
dans
classe
d’effectuer
accès
attribut
d’une
classe
par
biais
d’une
seule
section
de
code,
directement,
à
différents
niveau
code.
avec
point
d’accès
unique,
pouvoir
décider
sorte
de
modification
:
être
changement
à
daniel
hadjadj
daniel
©
dahadjadj@free.fr
-
2005
-
page
102

cours
d’initiation
php
apporter,
suffire
de
modifier
fonction
accesseur,
autres
section
de
code
s’en
trouver
affectées.
fonction
accesseur
pouvoir
formuler
de
manière
suivante
:
<?php
accesseur
{
var
$attribut;
function
get_attribut()
{
return
$this->attribut;
}
function
set_attribut($newvalue)
{
$this->attribute
=
$newvalue
}
}
?>
code
fournir
fonction
permettre
d’accéder
à
l’attribut
$attribute
:
fonction
get_attribute()
renvoyer
valeur
de
$attribute,
fonction
set_attribute()
affecter
nouvelle
valeur
à
$attribute.
11.4.
héritage
classe
pouvoir
être
déclarer
être
sous-classe
d’une
autre
classe
à
l’aide
mot
clé
extends.
exemple
:
<?php
class
b
extends
a
{
var
$attributb;
function
operationb()
{
corps
de
fonction
}
}
?>
classe
b
être
sous-classe
de
classe
a
:
hériter
attribut
méthode
de
classe
a,
par
contre
classe
a,
parent
de
classe
b
pouvoir
en
cas
hériter
attribut
méthode
de
b.
exemple
:
<?php
parent
{
var
$attribut1;
function
operation1()
{
$this->attribut1;
echo
"l'attribut
de
parent
être
<b>$this->attribut1
</b>(grace
avoir
operation1).<br><br>";
}
//accesseur
de
attribut1
function
get_attribut1()
{
return
$this->attribut1;
}
function
set_attribut1
($new_attribut)
{
$this->attribut1
=
$new_attribut;
}
}
class
fils
extends
parent
{
var
$attribut2;
function
operation2()
{
$this->attribut2;
echo
"l'attribut
de
fils
être
<b>$this->attribut2
</b>(grace
à
l'operation2).<br><br>";
}
}
//instanciation
de
classe
fils
dans
l'objet
b
$b
=
new
fils();
//affectation
d'une
nouvelle
valeur
grace
à
l'accesseur
$b->set_attribut1(40);
//affichage
de
valeur
de
l'attribut1
grace
à
l'accesseur
echo
"l'attribut
de
parent
être
<b>".$b->get_attribut1()."
</b>
(grace
à
get_attribut1).<br>";
//exécution
de
méthode
de
classe
fils
être
hériter
de
classe
parent
//affichage
de
valeur
de
l'attribut1
grace
à
méthode
operation1
de
class
parent
$b->operation1();
//
affiche
:
l'attribut
de
parent
être
40
daniel
hadjadj
daniel
©
dahadjadj@free.fr
-
2005
-
page
103

cours
d’initiation
php
//affectation
d'une
nouvelle
valeur
sans
accesseur
$b->attribut2
=
10;
//affichage
de
valeur
de
l'attribut2
sans
accesseur
echo
"l'attribut
de
parent
être
<b>".$b->attribut2."
</b>
(
grace
avoir
l'attribut2).<br>";
//exécution
de
méthode
de
classe
fils
//affichage
de
valeur
de
l'attributé
grace
à
méthode
operation2
de
class
fils
$b->operation2();
//
affiche
:
l'attribut
de
fils
être
10
//
accès
attribut
opération
être
possibles
pour
objet
de
//classe
fils
//instanciation
de
classe
parent
dans
l'objet
avoir
$a
=
new
parent();
//affectation
d'une
nouvelle
valeur
grace
à
l'accesseur
$a->set_attribut1(40);
//affichage
de
valeur
de
l'attribut1
grace
à
l'accesseur
echo
"l'attribut
de
parent
être
<b>".$a->get_attribut1()."
</b>
(
grace
avoir
get_attribut1).<br>";
//exécution
de
méthode
de
classe
parent
//affichage
de
valeur
de
l'attribut1
grace
à
méthode
operation1
de
class
parent
$a->operation1();
//
//affectation
d'une
nouvelle
valeur
sans
accesseur
$a->attribut2
=
10;
//affichage
de
valeur
de
l'attribut2
sans
accesseur
echo
"l'attribut
de
parent
être
<b>".$a->attribut2."
</b>grace
avoir
l'attribut2.<br>";
//exécution
de
méthode
de
classe
fils
operation2
n'est
autoriser
//puisque
classe
parent
n'hérite
de
classe
fils
//affichage
de
valeur
de
l'attributé
grace
à
méthode
operation2
de
class
fils
//affiche
fatal
error:
call
to
undefined
function:
operation2()
in
//d:\coursphp\exercice\test.php
line
77
$a->operation2();
//
affiche
:
l'attribut
de
fils
être
10
?>
l’opérateur
de
contexte
de
classe
(::)
l'opérateur
::
permettre
de
faire
référence
fonction
variables
d'une
classe
de
base,
d'utiliser
méthode
de
classe
n'ont
d'objets
créés.
exemple
:
<?php
class
a
{
function
example()
{
echo"je
suis
fonction
originale
a::example().<br
/>\n";
}
}
class
b
extends
a
{
function
example()
{
echo
"je
suis
fonction
redéfinir
b::example().<br
/>\n";
a::example();
}
}
//
n'y
avoir
d'objets
de
classe
a.
//
l'affichage
être
:
//
suis
fonction
originale
a::example().<br
/>
a::example();
//
création
d'un
objet
de
classe
b.
$b
=
new
b;
//
l'affichage
être
:
//
suis
fonction
redéfinir
b::example().<br
/>
//
suis
fonction
originale
a::example().<br
/>
$b->example();
?>
exemple
appeler
fonction
example()
dans
classe
a,
n'y
avoir
d'objet
de
classe
a,
n'est
possible
d'écrire
$a->example().
a
place,
appeler
fonction
example()
fonction
de
classe,
avec
nom
de
classe
elle-même,
sans
objet.
daniel
hadjadj
daniel
©
dahadjadj@free.fr
-
2005
-
page
104

cours
d’initiation
php
avoir
fonction
de
classe,
de
variables
de
classe.
en
fait,
n'y
avoir
objet
moment
de
l'appel
de
fonction.
donc,
fonction
de
classe
pouvoir
accéder
à
variable
(mais
pouvoir
accéder
variables
locales
globales).
falloir
proscrire
l'utilisation
de
$this.
dans
l'exemple
ci-dessus,
classe
b
redéfinir
fonction
example().
définition
originale
dans
classe
a
être
remplacer
par
de
b,
n'est
accessible
depuis
b,
à
n'appeliez
fonction
example()
de
classe
a
avec
l'opérateur
::.
ecrivez
a::example()
pour
(en
fait,
falloir
écrire
parent::example(),
expliquer
dans
section
suivante).
dans
contexte,
avoir
objet
courant,
pouvoir
avoir
d'autres
variables
objets.
de
fait,
lorsqu'il
être
utiliser
depuis
méthode
d'un
objet,
pouvoir
utiliser
$this.
11.5.
redéfinition
être
possible,
dans
sous-classe,
de
re-déclarer
mêmes
attribut
de
classe
parent
en
donner
valeur
par
défaut
différente,
mêmes
méthode
en
donner
fonctionnalité
différente
:
c’est
redéfinition.
redéfinition
d’attributs
de
méthode
dans
sous-classe
n’affecte
classe
parent.
lorsqu’une
redéfinition
être
fournie,
devenir
prépondérante
remplacer
définition
d’origine.
php
permettre
de
redéfinir
fonction
en
garder
possibilité
d’invoquer
version
définir
dans
parent.
exemple
:
<?php
class
a
{
var
$attribut
=
"valeur
défaut";
function
operation()
{
echo
"<b>définition
d'une
classe</b><br>";
echo
"la
valeur
de
\$attribut
être
$this->attribut";
echo
"<br><br>";
}
}
b
extends
a
{
var
$attribut
=
"valeur
différente";
function
operation()
{
echo
"<b>nouvelle
définition</b><br>";
echo
"la
valeur
de
\$attribut
être
$this->attribut";
echo
"<br><br>";
}
}
//instanciation
de
classe
a
dans
l'objet
avoir
$a
=
new
a();
/*
affiche
:
définition
d'une
classer
valeur
de
$attribut
être
valeur
défaut*/
$a->operation();
//instanciation
de
classe
b
dans
l'objet
b
$b
=
new
b();
/*
affiche
:
nouvelle
définition
valeur
de
$attribut
être
valeur
différente*/
$b->operation();
?>
manipulation
de
classe
d’objets
d’origine
similaire.
exemple
:
<?php
vehicule
{
var
$roues;
var
$passagers;
var
$classname
=
"véhicule";
var
$nom
=
"";
function
vehicule($val1,
$val2)
{
$this->roues
=
$val1;
$this->passagers
=
$val2;
}
function
init_nom($nom_type)
{
$this->nom
=
$nom_type;
}
function
jesuis()
{
echo
"je
suis
véhicule
à
$this->roues
roues";
daniel
hadjadj
daniel
©
dahadjadj@free.fr
-
2005
-
page
105

cours
d’initiation
php
echo
"
$this->passagers
passagers,
";
echo
"mon
type
être
$this->classname.";
if
($this->nom)
{
echo
"je
m'appelle
$this->nom.";
echo
"<br><br>";
}
}
}
//
héritage
de
classe
véhiculer
velo
extends
vehicule
{
var
$classname
=
"vélo";
//
redéfinition
de
l'attribut
$classname
//
"construction"
de
classe
vélo
function
velo()
{
$this->vehicule(2,
1);
}
}
//
véhiculer
motoriser
issu
de
classe
vehicule
class
mvehicule
extends
vehicule
{
var
$classname
=
"motorisé";
//
redéfinition
de
l'attribut
$classname
vareur;
$mot
function
init_moteur($cylindre)
{
$this->moteur
=
$cylindre;
}
function
jesuis()
{
//
surcharger
fonction
jesuis()
de
classeehicule
v
echo
"mon
moteur
être
de
$this->moteur
cc.<br>";
vehicule::jesuis();
//appel
à
méthode
jesuis()
de
classe
vehicule
}
}
//
classe
voiture
moto
hériter
de
classe
mvehicule
class
voiture
extends
mvehicule
{
var
$classname
=
"voiture";
function
oiture()
$this->vehicule(4,5);
}
}
class
moto
extends
mvehicule
{
var
$classname
=
"moto";
function
moto()
{
$this->vehicule(2,
2);
}
}
//
création
objet
bmx,
cb,
twingo
$bmx
=
new
elo;
$cb
=
new
moto;
$twingo
=
new
voiture;
$bmx->init_nom
("bmx");
//initialisation
de
objet
$twingo->init_nom("twingo");
$twingo->init_moteur(1600);
$cb->init_nom("cb
500");
$cb->init_moteur(500);
//
appeler
fonction
jesuis()
de
objet
pour
savoir
être
$bmx->jesuis();
$twingo->jesuis();
$cb->jesuis();
?>
daniel
hadjadj
daniel
©
dahadjadj@free.fr
-
2005
-
page
106

cours
d’initiation
php
classe
objet
(php
5)
php
5
inclure
nouveau
modèle
objet.
traitement
objet
en
php
avoir
être
réécrire
pour
arriver
à
de
meilleures
performance
de
fonctionnalités.
dans
version
précédentes
de
php,
objet
être
traiter
type
primitifs
(par
exemple
entiers
chaîne
de
caractères).
l'inconvénient
de
méthode
être
sémantiquement,
l'objet
en
entier
être
copier
lorsqu'une
variable
être
assigner
passer
paramètre
à
fonction.
dans
nouvelle
approche,
objet
être
référencer
par
pointeur
valeur
(on
pouvoir
penser
à
pointeur
en
qu'identifiant
d'objet).
de
développeurs
php
rendre
compte
caprice
de
copie
dans
l'ancien
modèle
objet
et,
par
conséquent,
majorité
application
php
devoir
fonctionner
avec
de
modifications.
modification
apporter
à
php
5
zend
engine
2
augmenter
capacité
performance
de
php.
attention
particulier
avoir
être
apporter
à
nouvelle
version
compatible
possible
avec
script
antérieurs.
migration
de
code
de
php
4
vers
php
5
devoir
être
aisée.
plupart
script
php
4
devoir
être
prêts
à
fonctionner
sans
nécessiter
moindre
modification.
exister
différence
devoir
tester
code
avant
de
changer
de
version
en
production
exemple
de
changement
:
•
•
•
objet
sans
propriété
n'est
considérer
vide
(empty()).
dans
cas,
classe
devoir
être
déclarer
avant
d'être
utilisées.
survenir
nouvelles
fonctionnalité
de
php
5
être
utilisées.
sinon,
comportement
être
même
qu'avant.
fonction
get_class(),
get_parent_class()
get_class_methods()
retourner
nom
de
classe
avoir
être
déclarer
(sensible
à
casse),
pouvoir
causer
problème
dans
anciens
script
utiliser
comportement
précédent
(le
nom
de
classe
être
retourner
en
minuscules).
solution
possible
être
de
rechercher
fonction
dans
anciens
script
d'utiliser
fonction
strtolower().
11.6.
création
d’une
classer
définition
de
classe
commencer
par
mot-clé
class,
suivre
par
nom
de
classe,
pouvoir
être
quelconque
à
condition
être
mot
réserver
en
php.
suivre
paire
de
parenthèse
contenir
définition
membre
méthodes.
pseudo-variable
$this
être
disponible
lorsqu'une
méthode
être
appeler
depuis
contexte
objet.
$this
être
référence
à
l'objet
appeler
(habituellement,
l'objet
auquelle
méthode
appartient,
pouvoir
être
autre
objet
méthode
être
appeler
de
manière
statique
depuis
contexte
d'un
autre
objet).
comportement
être
illustrer
dans
l'exemple
suivre
:
exemple
19-1.
variable
$this
en
programmation
objet
structure
de
définition
d’une
classe
nom_classe
{
}
exemple
:
/*
définition
simple
d'une
classe
*/
<?php
class
simpleclass
{
//
déclaration
d'un
membrer
public
$var
=
'une
valeur
par
défaut';
//
déclaration
de
méthode
public
function
displayvar()
{
echo
$this->var;
}
daniel
hadjadj
daniel
©
dahadjadj@free.fr
-
2005
-
page
107

cours
d’initiation
php
}
?>
constructeurs
destructeurs
constructeur
php
5
permettre
développeurs
de
déclarer
constructeur
pour
classes.
classe
posséder
méthode
constructeur
appeler
méthode
à
création
d'une
nouvelle
instance
de
l'objet,
être
intéressant
pour
initialisation
l'objet
avoir
besoin
avant
d'être
utilisé.
void
__construct
(
[mixed
args
[,
...]]
)
note
:
constructeurs
parents
être
appeler
classe
enfant
définir
constructeur.
vouloir
utiliser
constructeur
parent,
être
nécessaire
de
faire
appel
à
parent::__construct().
exemple
:
<?php
class
baseclass
{
function
__construct()
{
print
"in
baseclass
constructor\n";
}
}
class
subclass
extends
baseclass
{
function
__construct()
{
parent::__construct();
print
"in
subclass
constructor\n";
}
}
$obj
=
new
baseclass();
$obj
=
new
subclass();
?>
raison
de
compatibilité
ascendante,
php
5
pouvoir
trouver
fonction
__construct()
pour
classe
donnée,
chercher
fonction
constructeur
représentée,
dans
l'ancien
styler
(php
<
5),
par
nom
de
classe.
effectivement,
signifier
seul
cas
pouvoir
avoir
problème
de
compatibilité
être
classe
contenir
méthode
nommée
__construct()
avoir
autre
usage.
destructeurs
void
__destruct
(
void
)
php
5
introduire
concept
de
destructeur
similaire
autres
langage
orienter
objet,
c++.
méthode
destructeur
devoir
être
appeler
référence
à
objet
particulier
être
effacer
l'objet
être
détruit.
exemple
:
<?php
class
mydestructableclass
{
function
__construct()
{
print
"in
constructor\n";
$this->name
=
"mydestructableclass";
}
function
__destruct()
{
print
"destruction
de
"
.
$this->name
.
"\n";
}
}
$obj
=
new
mydestructableclass();
?>
constructeur,
destructeur
parent
n'est
appeler
par
moteur.
pour
exécuter
destructeur
parent,
devoir
appeler
fonction
parent::__destruct
dans
corps
destructeur.
daniel
hadjadj
daniel
©
dahadjadj@free.fr
-
2005
-
page
108

cours
d’initiation
php
11.7.
création
d'une
instance
pour
créer
instance
d'un
objet,
nouvel
objet
devoir
être
créer
assigner
à
un
variable.
objet
devoir
être
assigner
de
création
d'un
nouvel
objet
à
qu'un
l'objet
avoir
constructeur
défini
lancer
exception
en
cas
d'erreur.
exemple
:
<?php
$instance
=
new
simpleclass()
?>
11.8.
assignation
d'un
objet
de
l'assignation
d'un
instance
créer
d'un
objet
à
variable,
nouvelle
variable
accéder
à
même
instance
de
l'objet
assigné.
comportement
être
même
passage
d'une
instance
à
un
fonction.
nouvelle
instance
d'un
objet
créer
pouvoir
être
effectuer
par
clonage.
exemple
:
<?php
$assigned
=
$instance;
$reference
=&
$instance;
$instance->var
=
'$assigned
avoir
valeur';
$instance
=
null;
//
$instance
$reference
devenir
null
var_dump($instance);
var_dump($reference);
var_dump($assigned);
/*
l'exemple
aller
afficher
:
null
null
object(simpleclass)#1
(1)
{
["var"]=>
string(30)
"$assigned
avoir
valeur"
}
*/
?>
11.9.
héritage
classe
pouvoir
hériter
méthode
membre
d'une
autre
classe
en
utiliser
mot
clé
extends
dans
déclaration.
n'est
possible
d'étendre
de
multiples
classes,
classe
pouvoir
hériter
d'une
seule
classe
de
base.
méthode
membre
hériter
pouvoir
être
surchargés,
à
classe
parent
avoir
définir
méthode
final.
pour
surcharger,
suffire
de
redéclarer
méthode
avec
même
nom
définir
dans
classe
parent.
être
possible
d'accéder
à
méthode
membre
surcharger
avec
l'opérateur
parent::
exemple
:
<?php
class
extendclass
extends
simpleclass
{
//
redéfinition
de
méthode
parent
function
displayvar()
{
echo
"classe
étendue\n";
parent::displayvar();
}
}
$extended
=
new
extendclass();
$extended->displayvar();
?>
l'exemple
aller
afficher
:
classer
étendre
valeur
par
défaut
11.10.
visibilité
visibilité
d'une
propriété
d'une
méthode
pouvoir
être
définir
en
préfixer
déclaration
avec
mot-clé
:
public,
protected
private.
élément
déclarer
publics
(public)
pouvoir
être
utiliser
par
n'importe
partie
programme.
l'accès
élément
protéger
(protected
)
être
limiter
classe
hériter
(et
à
daniel
hadjadj
daniel
©
dahadjadj@free.fr
-
2005
-
page
109

cours
d’initiation
php
classe
avoir
définir
l'élément).
l'accès
élément
priver
(private)
être
réserver
à
classe
avoir
définis.
visibilité
membre
classe
membre
devoir
être
définir
publiques,
protégées
privées.
exemple
:
/*
déckaration
membre
*/
<?php
/**
*
définition
de
myclass
*/
myclass
{
public
$public
=
'public';
protected
$protected
=
'protected';
private
$private
=
'private';
function
{
echo
echo
echo
}
printhello()
$this->private;
$this->protected;
$this->private;
}
$obj
=
new
myclass();
echo
$obj->public;
//
fonctionner
echo
$obj->protected;
//
erreur
fatale
echo
$obj->private;
//
erreur
fatale
$obj->printhello();
//
afficher
public,
protected
private
/**
*
définition
de
myclass2
*/
myclass2
extends
myclass
{
//
pouvoir
redéclarer
élément
publics
protégés,
privés
protected
$protected
=
'protected';
function
printhello()
{
echo
$this->public;
echo
$this->protected;
echo
$this->private;
}
}
$obj2
=
new
myclass2();
echo
$obj->public;
//
fonctionner
echo
$obj2->private;
//
indéfini
echo
$obj2->protected;
//
erreur
fatale
$obj2->printhello();
//
afficher
public,
protected2
private
?>
noter
:
méthode
de
déclaration
de
variable
en
php
4
avec
mot
clé
var
n'est
valide
pour
objet
en
php
5.
pour
raison
de
compatibilité,
variable
déclarer
avoir
visibilité
publique
erreur
de
niveau
e_strict
être
générée.
visibilité
méthode
méthode
classe
devoir
être
définir
en
publiques,
priver
protégées.
méthode
sans
déclaration
être
définir
être
publiques.
exemple
:
/*
déckaration
d’une
méthode
*/
<?php
/**
*
définition
de
myclass
*/
myclass
daniel
hadjadj
daniel
©
dahadjadj@free.fr
-
2005
-
page
110

cours
d’initiation
php
{
//
contructeurs
devoir
être
publics
public
function
__construct()
{
}
//
déclaration
d'une
méthode
publique
public
function
mypublic()
{
}
//
déclaration
d'une
méthode
protéger
protected
function
myprotected()
{
}
//
déclaration
d'une
méthode
priver
private
function
myprivate()
{
}
//
celle-ci
être
publique
function
foo()
{
$this->mypublic();
$this->myprotected();
$this->myprivate();
}
}
$myclass
=
new
myclass;
$myclass->mypublic();
//
fonctionner
$myclass->myprotected();
//
erreur
fatale
$myclass->myprivate();
//
erreur
fatale
$myclass->foo();
//
public,
protected
private
fonctionner
/**
*
définition
de
myclass2
*/
myclass2
extends
myclass
{
//
celle-ci
être
publique
function
foo2()
{
$this->mypublic();
$this->myprotected();
$this->myprivate();
//
erreur
fatale
}
}
$myclass2
=
new
myclass2;
$myclass2->mypublic();
//
fonctionner
$myclass2->foo2();
//
public
protected
fonctionnent,
private
?>
l'opérateur
de
résolution
de
portée
(::)
l'opérateur
de
résolution
de
portée
ou,
en
terme
simples,
symbole
"double
deux
points"
(::),
fournir
moyen
d'accéder
membre
statiques
constants
qu'aux
élément
redéfinir
par
classe.
référencer
élément
en
dehors
de
définition
de
classe,
utiliser
nom
de
classe.
exemple
:
/*
en
dehors
de
définition
de
classe
/*
<?php
class
myclass
{
const
const_value
=
'une
valeur
constante';
}
echo
myclass::const_value;
?>
deux
mots-clé
spéciaux,
self
parent,
être
utiliser
pour
accéder
membre
méthode
depuis
définition
de
classe.
exemple
:
/*
depuis
définition
de
classe
*/
<?php
class
otherclass
extends
myclass
{
public
static
$my_static
=
'variable
statique';
daniel
hadjadj
daniel
©
dahadjadj@free.fr
-
2005
-
page
111

cours
d’initiation
php
public
static
function
doublecolon()
{
echo
parent::const_value
.
"\n";
echo
self::$my_static
.
"\n";
}
}
otherclass::doublecolon();
?>
lorsqu'une
classer
étendre
redéfinir
méthode
de
classe
parente,
php
n'appelera
méthode
d'origine.
appartenir
à
méthode
dérivée
d'appeler
méthode
d'origine
en
cas
de
besoin.
être
valable
pour
définition
constructeur
destructeurs,
surcharge
méthode
magiques.
exemple
:
/*
appel
d'une
méthode
parent
*/
<?php
class
myclass
{
protected
function
myfunc()
{
echo
"myclass::myfunc()\n";
}
}
class
otherclass
extends
myclass
{
//
dépassement
de
définition
parent
public
function
myfunc()
{
//
appel
de
fonction
parent
parent::myfunc();
echo
"otherclass::myfunc()\n";
}
}
$class
=
new
otherclass();
$class->myfunc();
?>
11.11.
abstraction
d'objets
php
5
introduire
classe
méthode
abstraites.
n'est
autoriser
de
créer
instance
d'une
classe
définie
abstraite.
classe
contenir
méthode
abstraite
devoir
être
abstraites.
pour
définir
méthode
abstraite,
falloir
déclarer
signature
de
méthode
fournir
implémentation.
classe
implémente
méthode
abstraite
devoir
être
définir
avec
même
visibillité
faible.
méthode
abstraite
être
définir
en
protégée,
fonction
l'implémentant
devoir
être
définir
en
protéger
publique.
exemple
:
/*
exemple
de
classe
abstraire
*/
<?php
abstract
class
abstractclass
{
//
force
classe
étendre
à
définir
méthode
abstract
protected
function
getvalue();
//
méthode
commune
public
function
printout()
{
print
$this->getvalue();
}
}
concreteclass1
extends
abstractclass
{
protected
function
getvalue()
{
return
"concreteclass1";
}
}
concreteclass2
extends
abstractclass
{
protected
function
getvalue()
{
daniel
hadjadj
daniel
©
dahadjadj@free.fr
-
2005
-
page
112

cours
d’initiation
php
return
"concreteclass2";
}
}
$class1
=
new
concreteclass1;
$class1->printout();
$class2
=
new
concreteclass2;
$class2->printout();
?>
code
ancien
n'ayant
classe
fonction
nommer
abstract
devoir
fonctionner
sans
modifications.
11.12.
interface
interface
objet
permettre
de
créer
code
spécifier
méthode
variables
classe
pouvoir
implémenter,
sans
avoir
à
définir
méthode
être
gérées.
interface
être
définir
en
utiliser
mot
clé
interface,
de
même
façon
qu'une
classe
standard
sans
contenu
de
méthode.
classe
implémentent
interface
devoir
faire
en
utiliser
mot
clé
implements
devoir
contenir
définition
de
méthode
lister
dans
l'interface.
classe
implémentent
d'une
interface
devoir
faire
en
lister
interface,
séparer
d'une
virgule.
méthode
déclarer
dans
interface
devoir
être
publiques.
classe
définir
interface
n'implémente
méthode
dans
l'interface,
erreur
fatale
indiquer
méthode
n'a
être
implémentée.
exemple
:
/*
exemple
d'interface
*/
<?php
//
declaration
de
l'interface
'itemplate'
interface
itemplate
{
public
function
setvariable($name,
$var);
public
function
gethtml($template);
}
//
implémentation
de
l'interface
//
aller
fonctionner
template
implements
itemplate
{
private
$vars
=
array();
public
function
setvariable($name,
$var)
{
$this->vars[$name]
=
$var;
}
public
function
gethtml($template)
{
foreach($this->vars
avoir
$name
=>
$value)
{
$template
=
str_replace('{'
.
$name
.
'}',
$value,
$template);
}
return
$template;
}
}
//
fonctionner
//
fatal
error:
badtemplate
contains
1
abstract
methods
//
and
must
therefore
be
declared
abstract
(itemplate::gethtml)
badtemplate
implements
itemplate
{
private
$vars
=
array();
public
function
setvariable($name,
$var)
{
$this->vars[$name]
=
$var;
}
}
?>
daniel
hadjadj
daniel
©
dahadjadj@free.fr
-
2005
-
page
113


