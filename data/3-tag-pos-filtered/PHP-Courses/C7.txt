m2105
:
web
dynamique
m2105
généralité
langage
php,
variables
concevoir
condit°/boucles
site
dynamiques
tableau
fonction
formulaire
super
globales
session
cookies
cathy.escazut@unice.fr
généralité
(1)
●
php
:
hypertext
processor
–
langage
créer
en
1994
par
r.
lerdorf
reprendre
en
1997
m2105
par
2
étudiant
(a.
gutmanz
&
z.
suraski)
–
logiciel
libre
multi-plateforme
généralité
–
utiliser
pour
conception
de
site
web
variables
dynamique
:
condit°/boucles
●
traitement
formulaire
tableau
●
accès
base
de
données
fonction
●
…
formulaire
–
langage
orienter
objet
typer
super
globales
session
–
syntaxe
proche
c,
de
java,
…
cookies
web
dynamique
–
langage
php
cathy
escazut
2
/
37
généralité
(2)
●
code
php
dans
site
web
:
–
intégrer
code
html
fichier
m2105
.php
<?php
…
?>
–
exécuter
sur
serveur
généralité
–
objectif
:
générer
code
html
être
lire
par
variables
navigateur
condit°/boucles
requêter
client
(.php
demandé)
tableau
http://www
…
.php
serveur
fonction
web
client
formulaire
web
super
globales
session
réponse
serveur
(.html
envoyé)
cookies
web
dynamique
–
langage
php
cathy
escazut
3
/
37
généralité
(3)
m2105
généralité
variables
condit°/boucles
tableau
fonction
formulaire
super
globales
session
cookies
http://iutsa.unice.fr/~escazut/ext/m2105/cours/exemples/php_ex1.php
web
dynamique
–
langage
php
cathy
escazut
4
/
37
variables
(1)
●
durer
de
vie
:
temps
de
production
html
m2105
●
nom
:
commencer
par
$
●
distinction
entre
minuscules
majuscules
généralité
variables
●
déclaration
inutile
condit°/boucles
●
fonction
utiles
:
tableau
–
isset
(<nomvar>)
:
retourne
true
<nomvar>
être
fonction
définie,
false
formulaire
–
empty
(<nomvar>)
:
retourne
true
<nomvar>
être
super
globales
nulle,
vide
définie,
false
session
cookies
web
dynamique
–
langage
php
cathy
escazut
5
/
37
variables
(2)
●
affectation
:
=
–
numérique
:
m2105
$age=20+$x;
–
chaîne
:
$nom="monsieur".$y;
–
booléen
:
$marie=true;
généralité
●
variables
comparaison
:
==
!
!=
<
<=
>
>=
condit°/boucles
tableau
●
afficher
contenu
d'une
variable
:
fonction
echo
$nom
;
echo
"je
suis
{$nom}
j'ai
{$age}
ans";
formulaire
echo
'je
suis
'.$nom.'
j'ai
'.$age.'ans';
super
globales
●
caractère
de
dé-spécialisation
:
\
session
echo
"
\$
\"
\\
"
;
cookies
web
dynamique
–
langage
php
cathy
escazut
6
/
37
variables
(5)
●
2
façon
de
passer
valeur
d'une
page
à
l'autre
:
–
utiliser
l'url
de
page
:
m2105
http://www.truc.fr/page.php
?
nom=moi&
age=20
fichier
page.php
récupèrera
:
généralité
$_get['
nom']
avoir
valeur
«
moi
»
variables
$_get['
age']
avoir
valeur
20
condit°/boucles
tableau
●
valeur
être
passer
par
méthode
get.
fonction
●
passer
de
valeur
sensibles
avec
méthode
formulaire
get
être
visibles
dans
l'url
super
globales
session
–
utiliser
formulaire
(cf.
partir
sur
formulaires)
cookies
web
dynamique
–
langage
php
cathy
escazut
7
/
37
structure
conditionnelles
●
structure
de
base
:
m2105
if
(<condition>)
{
<instructions_if>
;
}
opérateur
logiques
else
{
//
facultatif
!
!&&
||
généralité
<instructions_else>
;
}
variables
condit°/boucles
●
structure
à
choix
multiple
:
tableau
switch
(<nomvar>)
{
fonction
caser
<val1>
:
formulaire
<instructions1>
;
case
<val2>
:
penser
break
super
globales
<instructions2>
;
pour
sortir
d'un
block
…
session
default:
//
facultatif
<instructions>
;
cookies
}
web
dynamique
–
langage
php
cathy
escazut
8
/
37
structure
itératives
●
structure
while
:
m2105
while
(<condition>)
{
<instructions>
;
}
généralité
variables
condit°/boucles
●
structure
for
:
tableau
for
(<init>;
<condition>
;
<incr>)
{
fonction
<instructions>
;
formulaire
}
super
globales
session
cookies
web
dynamique
–
langage
php
cathy
escazut
9
/
37
tableau
(1)
●
tableau
«
séquentiels
»
:
m2105
–
indice
:
entiers
(
indice
1ère
case
=
0
)
–
exemple
:
$t[0]="france";
$t[1]="italie";
$t=array("france",
"italie");
généralité
–
ajout
d'une
valeur
dans
dernière
case
tableau
:
variables
<nomtab>[]
=
<val>;
condit°/boucles
–
tailler
d'un
tableau
:
count(<nomtab>)
tableau
–
parcourir
d'un
tableau
:
fonction
●
utilisation
d'un
for
…
●
formulaire
utilisation
d'un
foreach
super
globales
foreach
(<nomtableau>
avoir
<nomvar>)
{
<instructions>
;
session
}
cookies
<nomvar>
aller
prendre
valeur
de
<nomtableau>
exécuter
<instructions>
web
dynamique
–
langage
php
cathy
escazut
10
/
37
tableau
(2)
m2105
généralité
variables
condit°/boucles
tableau
fonction
formulaire
super
globales
session
cookies
http://iutsa.unice.fr/~escazut/ext/m2105/cours/exemples/php_ex2.php
web
dynamique
–
langage
php
cathy
escazut
11
/
37
tableau
(3)
●
tableau
«
associatifs
»
:
m2105
–
indice
:
chaîne
de
caractère
–
couple
:
clé
=>
valeur
généralité
–
clé
=
valeur
uniques
variables
–
exemple
:
$t['fr']="france";
$t['it']="italie";
condit°/boucles
$t=array('fr'=>"france",
'it'=>"italie");
tableau
–
tailler
d'un
tableau
:
count(<nomtab>)
fonction
–
parcourir
d'un
tableau
:
formulaire
foreach
(<nomtableau>
avoir
<cle>
=>
<val>)
{
super
globales
<instructions>
;
session
}
cookies
–
autres
tableau
associatifs
:
$_get,
$_post,
…
web
dynamique
–
langage
php
cathy
escazut
12
/
37
tableau
(4)
m2105
généralité
variables
condit°/boucles
tableau
fonction
formulaire
super
globales
session
cookies
http://iutsa.unice.fr/~escazut/ext/m2105/cours/exemples/php_ex3.php
web
dynamique
–
langage
php
cathy
escazut
13
/
37
tableau
(5)
●
affichage
information
concerner
tableau
(pour
déboggage)
:
m2105
print_r(<nomtableau>);
–
à
mettre
en
balise
<pre>
</pre>
généralité
–
utiliser
pour
n'importe
variable
variables
●
tri
d'un
tableau
séquentiel
condit°/boucles
sort(<nomtableau>);
//
croître
tableau
rsort(<nomtableau>);
//
décroître
fonction
●
tri
d'un
tableau
associatif
formulaire
ksort(<nomtableau>);
//
croître
sur
clé
super
globales
krsort(<nomtableau>);
//
décroître
sur
clé
session
asort(<nomtableau>);
//
croître
sur
valeur
cookies
arsort(<nomtableau>);
//
décroître
sur
valeur
web
dynamique
–
langage
php
cathy
escazut
14
/
37
tableau
(4)
m2105
généralité
variables
condit°/boucles
tableau
fonction
formulaire
super
globales
session
cookies
http://iutsa.unice.fr/~escazut/ext/m2105/cours/exemples/php_ex4.php
web
dynamique
–
langage
php
cathy
escazut
15
/
37
fonction
(1)
●
écriture
d'une
fonction
:
m2105
function
<nomfct>
(<listeparam>){
<instructions>;
return
<varresultat>;
//
facultatif
}
généralité
variables
●
appel
d'une
fonction
retourner
:
condit°/boucles
<nomfct>
(<listeparam>);
tableau
fonction
●
appel
d'une
fonction
retourner
résultat
:
formulaire
super
globales
<nomvar>
=
<nomfct>
(<listeparam>);
session
cookies
web
dynamique
–
langage
php
cathy
escazut
16
/
37
fonction
(2)
m2105
généralité
variables
condit°/boucles
tableau
fonction
formulaire
super
globales
session
cookies
http://iutsa.unice.fr/~escazut/ext/m2105/cours/exemples/php_ex5.php
web
dynamique
–
langage
php
cathy
escazut
17
/
37
fonction
(3)
●
variables
locales
:
–
variables
apparaître
pour
1ère
fois
dans
m2105
fonction
–
connues
utilisables
dans
fonction
généralité
●
variables
globales
:
variables
–
variables
initialiser
hors
de
fonction
condit°/boucles
–
connues
utilisables
dans
fonction
tableau
–
valeur
stocker
dans
tableau
associatif
:
$globals
fonction
(cf.
partir
sur
variables
super
globales)
formulaire
●
clé
=
nom
de
variable
globale
super
globales
●
valeur
=
valeur
de
variable
globale
session
cookies
web
dynamique
–
langage
php
cathy
escazut
18
/
37
fonction
(4)
m2105
généralité
variables
condit°/boucles
tableau
fonction
formulaire
super
globales
session
cookies
http://iutsa.unice.fr/~escazut/ext/m2105/cours/exemples/php_ex6.php
web
dynamique
–
langage
php
cathy
escazut
19
/
37
fonction
(5)
●
fonction
include
:
–
permettre
d'inclure
contenu
d'un
fichier
m2105
.php
–
utile
pour
:
●
structuration
de
page
d'un
site
généralité
●
déclaration
fonctions,
variables
globales,
…
variables
–
syntaxe
:
condit°/boucles
include
(<nomfic.php>);
tableau
fonction
●
nom
fichier
être
chaîne
de
caractères,
devoir
être
entre
guillemet
formulaire
●
contenu
de
<nomfic.php>
être
insérer
à
place
super
globales
de
l'instruction
include
session
cookies
web
dynamique
–
langage
php
cathy
escazut
20
/
37
fonction
(6)
●
fonction
header
:
–
permettre
de
rediriger
vers
autre
page
m2105
–
utiliser
en-tête
http
fonction
devoir
être
appeler
début
généralité
–
syntaxe
:
variables
header
('location:
<nomfic.php>');
condit°/boucles
exit();
tableau
–
oublier
de
mettre
exit
fonction
–
nom
fichier,
<nomfic.php>,
:
●
formulaire
chemin
relatif
●
super
globales
chemin
absoudre
●
url
(avec
passage
de
session
paramètres)
cookies
web
dynamique
–
langage
php
cathy
escazut
21
/
37
fonction
(7)
●
fonction
utiles
sur
chaîne
:
–
strlen
(<unech>)
m2105
retourner
longueur
de
chaîne
passer
en
paramètre
–
str_replace
(
<quoi>
,
<par>
,
<unech>
)
retourner
chaîne
occurrence
de
<quoi>
généralité
dans
<unech>
avoir
être
remplacer
par
<par>
variables
–
strtolower(
<unech>
)/strtoupper(
<unech>)
retourner
chaîne
caractère
de
<unech>
condit°/boucles
avoir
être
mettre
en
minuscules/majuscules
tableau
–
explode
(<sep>,
<unech>)
exploser
fonction
<unech>
en
fonction
de
<sep>
ranger
«
morceau
»
dans
tableau
être
retourner
formulaire
–
htmlent
ities(
<unech>)
super
globales
retourner
chaîne
dans
caractère
de
<unech>
être
transformer
en
html
(ex
:
&
=>
&amp;
)
session
–
autres
fonction
sur
chaîne
référencer
sur
cookies
http://fr2.php.net/manual/fr/ref.strings.php
web
dynamique
–
langage
php
cathy
escazut
22
/
37
fonction
(8)
●
manipulation
date
:
–
date
manipuler
sous
forme
de
timestamp
(
=
nombre
m2105
de
secondes
écouler
depuis
01/01/1970)
–
fonction
time
()
retourner
timestamp
correspondre
à
date/heure
généralité
courante
variables
–
fonction
mkt
ime
(
<h>
,
<min>
,
<s>
,
<d
>
,
<m
>
,
<y>
)
retourner
timestamp
correspondre
à
date
spécifier
condit°/boucles
en
paramètre
tableau
–
fonction
dater
(<format>,
<timestamp>
)
fonction
retourner
chaîne
correspondre
<timestamp>
mettre
en
forme
suivant
<format>
utiliser
(entre
autres)
:
formulaire
s
:
second
i
:
minute
h
:
heure
super
globales
d:
jour
m
:
mois
:
année
session
–
autres
fonction
sur
date
référencer
sur
http://fr2.php.net/manual/fr/ref.datetime.php
cookies
web
dynamique
–
langage
php
cathy
escazut
23
/
37
fonction
(9)
m2105
généralité
variables
condit°/boucles
tableau
fonction
formulaire
super
globales
session
cookies
http://iutsa.unice.fr/~escazut/ext/m2105/cours/exemples/php_ex7.php
web
dynamique
–
langage
php
cathy
escazut
24
/
37
formulaire
(1)
rappel
●
information
saisir
dans
formulaire
html
être
«
envoyé
»
à
script
php.
avoir
2
fichier
:
m2105
fichier
.html
(ou
.
php)
contenir
code
html
formulaire
généralité
fichier
.php
pour
traitement
information
en
provenance
formulaire
variables
●
condit°/boucles
coder
html
:
tableau
<form
method='post'
action='script.php'>
<p>
fonction
<!
!--
champ
formulaire
-->
</p>
formulaire
</form>
super
globales
falloir
champ
button
de
type
submit
session
●
script
script.php
récupèrera
donnée
dans
cookies
tableau
(
$_post
)
web
dynamique
–
langage
php
cathy
escazut
25
/
37
formulaire
(2)
fichier
html
contenir
formulaire
m2105
généralité
variables
condit°/boucles
tableau
fonction
formulaire
super
globales
session
cookies
web
dynamique
–
langage
php
cathy
escazut
26
/
37
formulaire
(3)
fichier
php
pour
traiter
donnée
formulaire
m2105
généralité
variables
condit°/boucles
tableau
fonction
formulaire
super
globales
session
cookies
http://iutsa.unice.fr/~escazut/ext/m2105/cours/exemples/php_ex8.html
web
dynamique
–
langage
php
cathy
escazut
27
/
37
variables
super-globales
(1)
●
variables
super-globales
:
–
variables
créer
par
php
m2105
chargement
d'une
page
.php
–
connues
accessibles
dans
page
site
–
nom
commencer
par
généralité
$_
être
écrire
en
majuscules
($_get,
$_post,
…
)
variables
–
être
tableau
associatifs
:
condit°/boucles
$globals
:
variables
globales
tableau
$_get
:
pour
passer
variables
par
l'url
fonction
$_post
:
pour
passer
variables
sans
passer
par
l'url
formulaire
$_server
:
récupérer
information
serveur
$_env
:
variables
d'environnement
super
globales
$_files
:
pour
envoyer
fichier
sur
serveur
session
$_session
:
partager
variables
sur
site
cookies
$_cookie
:
pour
stocker
cookies
enregistrer
web
dynamique
–
langage
php
cathy
escazut
28
/
37
variables
super-globales
(2)
m2105
généralité
variables
condit°/boucles
tableau
fonction
formulaire
super
globales
session
cookies
http://iutsa.unice.fr/~escazut/ext/m2105/cours/exemples/php_ex9.php
web
dynamique
–
langage
php
cathy
escazut
29
/
37
variables
super-globales
(3)
m2105
généralité
variables
condit°/boucles
tableau
fonction
formulaire
super
globales
session
cookies
http://iutsa.unice.fr/~escazut/ext/m2105/cours/exemples/php_ex10.php
web
dynamique
–
langage
php
cathy
escazut
30
/
37
variables
de
session
(1)
●
objectif
:
faire
«
passer
variables
»
entre
page
m2105
site
(
≈
variables
globales
)
●
fonctionnement
:
généralité
–
à
connexion
client
:
création
d'une
session
variables
●
attribution
d'un
identifier
de
session
●
condit°/boucles
création
tableau
associatif
$_session
tableau
–
différentes
page
pouvoir
stocker
(et
accéder)
couple
(clé,
valeur)
dans
$_session
fonction
:
$_session['prenom']=
"cathy"
;
formulaire
super
globales
–
à
déconnexion
client
:
fermeture
de
session
●
$_session
détruire
session
cookies
web
dynamique
–
langage
php
cathy
escazut
31
/
37
variables
de
session
(2)
●
création
d'une
session
:
session_start()
–
indique
tableau
m2105
$_session
pouvoir
être
utiliser
dans
script
–
à
mettre
début
savoir
script
(avant
code
html)
généralité
●
fermeture
de
session
:
session_destroy()
variables
–
destruction
de
$_session
condit°/boucles
tableau
session_destroy
être
manquant
:
destruction
automatique
de
$_session
après
temps
fonction
d'inactivité
à
fermeture
navigateur.
formulaire
super
globales
session
cookies
web
dynamique
–
langage
php
cathy
escazut
32
/
37
variables
de
session
(3)
fichier
n°1
m2105
généralité
variables
condit°/boucles
tableau
fonction
formulaire
super
globales
session
cookies
http://iutsa.unice.fr/~escazut/ext/m2105/cours/exemples/php_ex11-1.php
web
dynamique
–
langage
php
cathy
escazut
33
/
37
variables
de
session
(4)
fichier
n°2
m2105
généralité
variables
condit°/boucles
tableau
fonction
formulaire
super
globales
session
cookies
http://iutsa.unice.fr/~escazut/ext/m2105/cours/exemples/php_ex11-2.php
web
dynamique
–
langage
php
cathy
escazut
34
/
37
cookies
(1)
●
cookie
:
fichier
texte
laisser
par
serveur
sur
disque
dur
m2105
client
dans
être
enregistrer
information
sur
visite
site
généralité
●
fonctionnement
:
–
variables
durer
de
vie
limiter
–
pendant
durée
de
vie,
valeur
rester
entre
2
condit°/boucles
visite
site
(contrairement
sessions)
tableau
●
fonction
mettre
en
œuvre
:
setcookie(<nom>,<val>,<mort>)
<nom>,
<val>
:
nom
valeur
cookie
formulaire
<mort>
:
nombre
de
secondes
avant
expiration
super
globales
–
création
d'une
entrer
(<nom>,
<val>)
dans
tableau
session
associatif
$_cookie
cookies
–
à
mettre
avant
code
html
(comme
sessions)
web
dynamique
–
langage
php
cathy
escazut
35
/
37
cookies
(2)
●
accéder
à
cookie
:
accéder
tableau
$_cookie
en
utiliser
nom
m2105
cookie
clé
●
exemple
généralité
–
création
cookie
«
id
»
:
variables
setcookie("id",
"moi",
time()+365*24*3600)
●
condit°/boucles
nom
:
id
●
tableau
valeur
:
●
durée
de
vie
:
365*24*3600
second
(=
1an)
fonction
–
accès
à
valeur
cookie
«id»
:
$_cookie['id']
formulaire
●
super
globales
attention
:
cookies
être
récupérer
(màj
de
$_cookie)
qu'au
chargement
de
l'en-tête
http
session
décalage
entre
l'écriture
d'un
cookie
utilisation
cookies
web
dynamique
–
langage
php
cathy
escazut
36
/
37
cookies
(3)
m2105
généralité
variables
condit°/boucles
tableau
fonction
formulaire
super
globales
session
cookies
http://iutsa.unice.fr/~escazut/ext/m2105/cours/exemples/php_ex12.php
web
dynamique
–
langage
php
cathy
escazut
37
/
37
document
outline
diapo
1
diapo
2
diapo
3
diapo
4
diapo
5
diapo
6
diapo
7
diapo
8
diapo
9
diapo
10
diapo
11
diapo
12
diapo
13
diapo
14
diapo
15
diapo
16
diapo
17
diapo
18
diapo
19
diapo
20
diapo
21
diapo
22
diapo
23
diapo
24
diapo
25
diapo
26
diapo
27
diapo
28
diapo
29
diapo
30
diapo
31
diapo
32
diapo
33
diapo
34
diapo
35
diapo
36
diapo
37
