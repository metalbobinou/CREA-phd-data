programmer
en
php
julien
gaulmin
julien.gaulmin@alcove.fr
version
1.44
copyright
c
2000
julien
gaulmin
julien.gaulmin@alcove.fr,
alcôve
document
pouvoir
être
reproduit,
distribuer
et/ou
modifier
selon
terme
de
licence
gnu
de
documentation
libre
(gnu
free
documentation
licence)
dans
version
1.1
ultérieure
publiée,
en
anglais,
par
free
software
foundation
;
sans
partie
invariante,
avec
premier
de
couverture
(front
cover
texts)
deux
premier
pages,
sans
partie
considérer
quatrième
de
couverture
(back
cover
texts)
copie
de
licence
être
fournir
en
annexe
pouvoir
être
consulter
à
l’url
:
http
://www.gnu.org/copyleft/fdl.html
alcôve
centre
paris
pleyel
153
bd
anatole
france
93200
saint-denis,
france
tél.
:
+33
1
49
22
68
00
fax
:
+33
1
49
22
68
01
e-mail
:
alcove@alcove.fr,
toile
:
www.alcove.fr
1

table
matière
chapitre
1
introduction
langage
1.1
programmation
web
1.2
présentation
de
php
1.3
installation
configuration
de
php
chapitrer
2
base
langage
2.1
syntaxe
langage
2.2
structure
de
contrôle
2.3
fonction
2.4
programmation
orienter
objet
chapitre
3
fonctionnalité
essentielles
3.1
connexion
utilisateur
3.2
gestion
session
3.3
autres
fonctionnalité
chapitre
4
utilisation
avancer
3
5
18
29
38
40
78
112
126
138
140
149
169
180
2
4.1
interopérabilité
avec
applicatifs
4.2
traitement
chaîne
de
caractère
4.3
fonctionnalité
utiles
4.4
conclusion
182
202
217
254
3

chapitre
1
alcôve
-
programmer
en
php
introduction
langage
4
introduction
langage
alcôve
-
programmer
en
php
objectifs
chapitre
principe
de
programmation
web
;
présentation
de
php
;
installation
configuration.
5

section
1
alcôve
-
programmer
en
php
programmation
web
6
programmation
web
alcôve
-
programmer
en
php
objectifs
de
section
rappel
d’html
;
web
interactif
;
notion
de
cgi
;
distinction
php/cgi.
7

la
programmation
web
alcôve
-
programmer
en
php
rappel
d’html
h
yper
t
ext
m
arkup
l
anguage
;
définir
structure
logique
d’un
document
web
;
composer
d’un
ensemble
de
commande
de
formatage
;
baser
sur
notion
d’
environnement
posséder
début
fin
->
délimiteur
:
tags
marqueurs.
8
programmation
web
alcôve
-
programmer
en
php
marqueur
être
définir
entre
<>
;
:
<marqueur>...</marqueur>
plupart
environnement
pouvoir
être
imbriquer
selon
règles
définir
;
:
<h1><b>mon
titre</b></h1>
n’est
permettre
de
faire
chevaucher
environnements.
:
<h1><b>mon
titre</h1></b>
9

la
programmation
web
alcôve
-
programmer
en
php
structurer
générale
d’une
page
html
:
<html>
<head>
<title>mon
titre</title>
<!
!--
commentaire
-->
</head>
<body>
<h1>mon
chapitre</h1>
<p>mon
paragraphe</p>
<address>mes
coordonnées</address>
</body>
</html>
10
programmation
web
alcôve
-
programmer
en
php
web
interactif
deux
principaux
type
d’interactions
:
–
côté
serveur
(
server-side
scripting
),
–
côté
client
(
client-side
scripting
).
type
précédents
diviser
en
sous-catégories.
11

la
programmation
web
alcôve
-
programmer
en
php
côté
client
:
–
script
embarquer
dans
page
html
(
html-embedded
scripting
)
->
javascript...,
–
applets
->
java,
activex...,
–
plugins
propriétaires.
12
programmation
web
alcôve
-
programmer
en
php
côté
serveur
:
–
cgi
->
perl,
c,
shell...,
–
interpréteur
intégrer
serveur
http
script
embarquer
dans
page
html
(
httpd
module
,
html-embedded
scripting
)
->
php
,
asp-vbscript...,
script
à
cgi
(
cgi-like
)
->
mod_perl/apache
–
servlets
->
java.
13

la
programmation
web
alcôve
-
programmer
en
php
www
interactif
server-side
scripting
cgi
(perl,
c,
shell...)
client-side
scripting
servlets
(java)
applets
(java,
activex)
httpd
module
html-embedded
scripting
(php,
asp-vbs)
html-embedded
scripting
(javascript)
cgi-like
(mod_perl
/apache)
14
programmation
web
alcôve
-
programmer
en
php
noter
de
cgi
c
ommon
g
ateway
i
nterface
;
interface
de
communication
pour
création
de
programme
capables
d’être
exécuter
par
serveur
http
;
permettre
création
dynamique
de
page
côté
serveur
;
utiliser
pour
servir
requête
en
provenance
d’une
page
de
formulaire
html.
15

la
programmation
web
alcôve
-
programmer
en
php
principe
de
cgi
:
get/post
"emballage"
formulaire
html
browser
appel
"variables"
résultat
réponse
programmer
externe
http
serveur
http
cgi
16
programmation
web
alcôve
-
programmer
en
php
if
($want_page==1){
$want_page=0
;
}
scénario
de
génération
dynamique
de
page
via
cgi
:
–
l’utilisateur
remplir
formulaire
html
valide,
–
navigateur
ouvre
connexion
vers
serveur
http
envoyer
requête
correspondante
(nom
cgi
+
paramètres),
–
serveur
http
invoquer
script
cgi
en
transmettre
paramètre
de
requête,
–
script
cgi
générer
page
correspondre
paramètres,
–
serveur
envoyer
page
navigateur
connexion,
–
navigateur
afficher
page.
17

la
programmation
web
alcôve
-
programmer
en
php
distinction
php/cgi
deux
être
situer
côté
serveur
:
php
:
code
php
être
contenir
dans
page
html
:
<
?php
$username
=
"toto"
;
?>
<html><body><h1>
bonjour
monsieur
<
?php
print
$username
?>
</h1></body></html>
cgi
:
code
html
être
contenir
dans
code
cgi
:
#!
!/usr/bin/perl
-w
$username
=
"toto"
;
print
"content-type
:
text/html\n\n"
;
<html><body><h1>bonjour
monsieur
$username</h1></body></html>"
;
18
section
2
alcôve
-
programmer
en
php
présentation
de
php
19

présentation
de
php
alcôve
-
programmer
en
php
objectifs
de
section
;
vue
d’ensemble
php
;
l’histoire
langage
;
avantage
;
inconvénients.
20
présentation
de
php
alcôve
-
programmer
en
php
vue
d’ensemble
php
a
server-side,
html-embedded
scripting
language
langage
de
script
côté
serveur
;
embarquer
dans
page
html
;
syntaxe
hériter
c
perl
;
extensible
(nombreuses
bibliothèques)
;
supporter
standard
web
;
logiciel
open
source
(licence
php
de
type
bsd).
21

présentation
de
php
alcôve
-
programmer
en
php
l’histoire
langage
créer
par
rasmus
lerdorf
en
1994
besoin
personnels
(
p
ersonnal
h
ome
p
age)
;
premier
version
publique
en
1995
sous
nom
de
personnal
home
pager
tools
capable
de
gérer
livre
d’or,
compteur
d’accès...
;
22
présentation
de
php
alcôve
-
programmer
en
php
deuxième
version
complète
(php/fi)
en
1995
avec
gestion
formulaire
html
base
msql
qu’un
nouvel
interpréteur
;
php/fi
être
utiliser
par
50000
site
web
en
1997
;
23

présentation
de
php
alcôve
-
programmer
en
php
en
1997,
projet
devenir
travail
d’équipe
l’interpréteur
être
réécrire
par
zeev
suraski
andi
gutmans
donner
version
php3
;
version
3
de
php
s’est
imposer
pour
atteindre
environ
150000
site
web
durant
l’été
1999
(source
:
netcraft)
devenir
p
hp
:
h
ypertext
p
reprocessor
;
24
présentation
de
php
alcôve
-
programmer
en
php
aujourd’hui
projet
être
chapeauter
par
zend,
société
privée
créer
par
suraskyi
gutmans,
commercialiser
logiciel
complémentaires
à
php
;
dernière
version
en
date
être
php4
(2000).
posséder
interpréteur
optimiser
par
zend
s’ouvre
à
d’autres
serveur
http
qu’apache.
25

présentation
de
php
alcôve
-
programmer
en
php
26
présentation
de
php
alcôve
-
programmer
en
php
avantage
de
php
client
n’a
accès
code
source
celui-ci
être
interpréter
avant
envoi
(!
!=
javascript)
;
client
recevoir
résultat
de
l’exécution
script
;
pouvoir
configurer
serveur
http
masquer
qualité
dynamique
page
;
code
n’est
alourdir
par
commande
destiner
à
générer
page
html
(!
!=
cgi)
;
27

présentation
de
php
alcôve
-
programmer
en
php
langage
posséder
de
nombreuses
bibliothèques/modules
:
–
calcul
mathématique,
–
création
dynamique
d’images,
–
gestion
de
sessions,
–
connexion
sécuriser
(ssl),
–
l’accès
à
plupart
sgbd,
–
l’accès
base
ldap...
28
présentation
de
php
alcôve
-
programmer
en
php
inconvénient
de
php
rapide
mod_perl
cgi
portable
;
simple
asp-vbscript
respectueux
standard
web
sous
licence
open
source
(->
extensible)
;
d’interactivité
niveau
client
(->
devoir
utiliser
javascript
dans
cas
là).
29

section
3
alcôve
-
programmer
en
php
installation
configuration
de
php
30
installation
configuration
de
php
alcôve
-
programmer
en
php
objectifs
de
section
installation
de
php
;
configuration
via
php3.ini/php.ini
;
premier
test
;
ajout
de
nouveaux
modules.
31

installation
configuration
de
php
alcôve
-
programmer
en
php
installation
trois
type
d’installation
:
–
module
dynamique
serveur
http
(ex
:
mod_php
pour
apache),
–
moduler
statique
serveur
http
(20%
rapide
mod_php)
nécessiter
de
patcher
serveur
http
de
recompiler,
–
sous
forme
de
cgi
(pour
serveur
http
supportés).
32
installation
configuration
de
php
alcôve
-
programmer
en
php
télécharger
source
sur
http
://fr.php.net
(mirroir
français
site
officiel
de
php)
;
installer
source
dans
répertoire
différent
de
serveur
http
(ex
:
/usr/local/src/php/)
avec
commande
tar
-zxvf
php-<version>.tar.gz
-c
/usr/local/src/php/
;
configuration
de
l’installation
:
–
./setup
(configuration
interactive),
–
./configure
<options>
(./configure
--help
pour
connaître
options).
33

installation
configuration
de
php
alcôve
-
programmer
en
php
compilation
installation
:
make
;
savoir
;
make
install
association
fichier
contenir
code
php
avec
l’interpréteur
php
dans
configuration
serveur
http
:
serveur
apache
(srm.conf
httpd.conf)
php3
->
addtype
application/x-httpd-php3
.php
php4
->
addtype
application/x-httpd-php
.php
sous
debian,
être
simplifier
grâce
à
l’utilitaire
apt-get
(remplacer
php3
par
php4
pour
php4)
:
–
apt-get
install
php3
pour
module
dynamique
apache,
–
apt-get
install
php3-cgi
pour
cgi.
34
installation
configuration
de
php
alcôve
-
programmer
en
php
configuration
de
php
(php3.ini/php.ini)
dans
/etc/php<version>/apache/
/usr/lib/php<version>/
;
fichier
(php3.ini
pour
php3
php.ini
pour
php4)
contrôler
principaux
comportement
de
php
;
clair
configurable
;
syntaxe
:
–
clef
=
valeur,
–
clef
=
"valeur
complexe",
–
;
commentaire,
–
booléen
->
1,
on,
true,
yes
/
0,
off,
false,
no.
35

installation
configuration
de
php
alcôve
-
programmer
en
php
segmenter
en
partie
:
–
option
langage,
–
ressource
maximales
allouer
à
php,
–
gestion
erreurs,
–
gestion
donnée
http,
–
fichier
répertoires,
–
extension
dynamiques
(modules),
–
configuration
modules.
pour
php
prendre
modification
en
compte
falloir
relancer
serveur
http
(ex
:
serveur
apache
->
apachectl
restart).
36
installation
configuration
de
php
alcôve
-
programmer
en
php
premier
test
créer
fichier
test.php
:
<
?php
phpinfo()
;
?>
placer
fichier
à
racine
serveur
http
(ou
dans
répertoire
doc_root
avoir
activer
l’option
safe_mode)
;
charger
l’url
http
://localhost/test.php
sur
navigateur
web
;
bravo!
!vous
avoir
créer
premier
page
dynamique
avec
php
résumer
fonctionnalité
php
être
configurer
sur
machine.
37

installation
configuration
de
php
alcôve
-
programmer
en
php
installer
nouveau
module
php
placer
nouveau
fichier
<nom>.so
dans
extension_dir
(par
défaut
/usr/lib/php<version>/apache
configurable
dans
php3.ini/php.ini)
utiliser
apt-get
install
php<version>_<nom>
sous
debian
;
ajouter
ligne
extension=<nom>.so
dans
php3.ini/php.ini
;
configurer
aspect
relatifs
module
dans
php3.ini/php.ini
;
redémarrer
serveur
http.
38
chapitre
2
alcôve
-
programmer
en
php
base
langage
39

les
base
langage
alcôve
-
programmer
en
php
objectifs
chapitre
syntaxe
langage
;
structure
de
contrôle
;
fonction
;
programmation
orienter
objet.
40
section
1
alcôve
-
programmer
en
php
syntaxe
langage
41

syntaxe
langage
alcôve
-
programmer
en
php
objectifs
de
section
syntaxe
de
base
;
type
de
donnée
;
variables
;
constantes
;
opérateurs.
42
syntaxe
langage
alcôve
-
programmer
en
php
syntaxe
de
base
quatre
moyen
équivalents
pour
passer
mode
html
php
:
–
standard
:
<
?php
...mon
code
php...
?>,
–
option
short_open_tag
:
<
?
...mon
code
php...
?>,
–
option
asp_tags
:
<%
...mon
code
php...
%>,
–
marqueur
script
html
:
<script
language="php">
...mon
code
php...
</script>.
43

syntaxe
langage
alcôve
-
programmer
en
php
base
de
syntaxe
hériter
c
perl
:
–
séparateur
d’instructions
->
;
–
commentaire
:
...code
/*
...mes
commentaires...
*/
code...,
...code...
//
...mes
commentaires...,
...code...
#
...mes
commentaires....
44
syntaxe
langage
alcôve
-
programmer
en
php
type
de
donnée
php
supporter
type
de
donnée
suivants
:
–
nombre
entiers,
–
nombre
à
virgule
flottante,
–
chaîne
de
caractères,
–
tableaux,
–
objet
(développés
dans
section
’programmation
orienter
objet’).
nom
de
variables
être
précéder
d’un
$
(ex
:
$toto
=
5
;)
;
45

syntaxe
langage
alcôve
-
programmer
en
php
être
possible
de
spécifier
variable
de
type
entier
de
façon
suivante
:
–
$toto
=
123
;
#
être
entier
en
base
10,
–
$toto
=
-123
;
#
être
entier
négatif,
–
$toto
=
0123
;
#
être
entier
en
base
8,
–
$toto
=
0x123
;
#
être
entier
en
base
être
possible
de
spécifier
variable
de
type
flottant
double
de
façon
suivante
:
–
$titi
=
1.234
;
#
être
nombre
à
virgule
flottante,
–
$titi
=
1.2e3
;
#
être
nombre
à
virgule
flottante.
46
syntaxe
langage
alcôve
-
programmer
en
php
être
possible
de
spécifier
variable
de
type
chaîne
de
caratères
de
façon
suivante
:
–
$personne
=
’m.
smith’
;
#
être
chaîne
de
caractères,
–
$personne
=
"m.
smith"
;
#
être
chaîne
de
caractères.
dans
deuxième
cas,
chaîne
contenir
nom
de
variables,
celles-ci
être
remplacer
par
valeur
;
:
$type
=
’m.’
;
$nom
=
"smith"
;
$personne
=
"$type
$nom"
;
equivalent
à
$personne
=
’m.
smith’
;.
47

syntaxe
langage
alcôve
-
programmer
en
php
utiliser
"..."
devoir
échapper
caractère
avec
backslash
(\)
pour
pouvoir
afficher
:
–
dollar
($)
:
\$,
–
double
quotes
(")
:
\",
–
backslash
(\)
:
\\.
de
même,
exister
caractère
spéciaux
nécessiter
d’être
échapper
:
–
nouvelle
ligne
:
\n,
–
retour
à
ligne
:
\r,
–
tabulation
:
\t.
autre
caractère
échappé
génèrera
avertissement
(
warning
)
;
48
syntaxe
langage
alcôve
-
programmer
en
php
lorsqu’une
chaîner
de
caractère
être
évaluer
valeur
numérique,
règles
suivantes
s’appliquent
:
–
chaîne
être
de
type
flottant/double
contenir
’.’,
e
e
être
de
type
entier
,
–
valeur
être
définir
par
premier
partie
de
chaîne
(0
c’est
texte),
–
premier
expression
être
chaîne,
type
de
variable
dépendre
de
second
expression.
:
$toto
=
1
+
"4.5"
;
#
$toto
valoir
5.5
$toto
=
1
+
"-1e3"
;
#
$toto
valoir
-999
$toto
=
1
+
"titi
+
149"
;
#
$toto
valoir
1
$toto
=
1
+
"149
+
titi"
;
#
$toto
valoir
150
49

syntaxe
langage
alcôve
-
programmer
en
php
tableau
de
php
ressembler
tableau
associatifs
(
hash-tables
)
perl
;
l’index
dans
tableau
être
appellé
clé
pouvoir
être
entier
chaîne
de
caractère
;
valeur
associer
à
clé
être
appeler
valeur
;
pouvoir
utiliser
fonction
array()
pour
créer
tableau
;
pouvoir
affecter
valeur
tableau
;
fonction
list()
permettre
d’affecter
variables
constituer
tableau
;
50
syntaxe
langage
alcôve
-
programmer
en
php
:
$tab[0]
=
1
;
$tab[1]
=
"toto"
;
#
pouvoir
mélanger
contenu
$tab["toto"]
=
"titi"
;
#
pouvoir
mélanger
clé
$tab["toto"][8]
;
#
tableau
à
deux
dimension
$tab["toto"][8]["encore"][2]
;
#
quatre
dimension
$suite
=
array(1,
2,
3,
4)
;
$personne
=
array("type"
=>
"m.",
"nom"
=>
"smith")
;
list($num1,
$num2)
=
$suite
;
#
$num1
valoir
1
$num2
valoir
2
51

syntaxe
langage
alcôve
-
programmer
en
php
pouvoir
connaître
nombre
d’éléments
d’un
tableau
grâce
fonction
:
–
sizeof()
:
retourner
nombre
d’éléments
d’un
tableau,
–
count()
:
retourner
nombre
d’éléments
d’un
tableau
s’il
existe,
1
variable
n’est
tableau
0
variable
n’existe
pas.
52
syntaxe
langage
alcôve
-
programmer
en
php
tableau
entretenir
pointeur
courant
servir
à
naviguer
en
sein
grâce
fonction
:
–
reset()
:
placer
pointeur
interne
sur
premier
élément
retourner
valeur,
–
current()
:
retourner
valeur
de
l’
élément
courir
,
–
next()
:
placer
pointeur
interne
sur
l’
élément
suivre
retourner
valeur,
–
prev()
:
placer
pointeur
interne
sur
l’
élément
précédent
retourner
valeur,
–
each()
:
retourner
paire
clé/valeur
courante
tableau
avance
pointeur
sur
l’élément
suivant
(c’est
seule
fonction
retourner
faux
l’élément
valoir
0
"").
53

syntaxe
langage
alcôve
-
programmer
en
php
tableau
pouvoir
être
trier
en
utiliser
fonction
suivantes
:
–
asort()/arsort()
:
trier
tableau
en
ordre
croissant/décroissant
de
valeur
,
–
ksort()/rsort()
:
trier
tableau
en
ordre
croissant/décroissant
de
clé
,
–
sort()
:
trier
tableau
en
ordre
croître
clé
valeur
(on
perdre
correspondance
clé/valeur),
–
uasort()/uksort()/usort()
:
trier
tableau
de
même
façon
quasi-homonymes
(u
pour
user
)
avec
fonction
de
comparaison
fournir
par
l’utilisateur.
54
syntaxe
langage
alcôve
-
programmer
en
php
:
function
cmp($a,
$b)
{
if
($a
==
$b)
return
0
;
return
($a
>
$b)
?
-1
:
1
;
}
$tab
=
array(3,2,5,6,1)
;
usort($tab,
cmp)
;
while(list($cle,
$valeur)
=
each($tab))
{
echo
"tab[$cle]
=
$valeur<br>\n"
;
}
programme
être
équivalent
à
rsort().
55

syntaxe
langage
alcôve
-
programmer
en
php
variables
portée
d’une
variable
dépendre
contexte
dans
être
définir
;
plupart
variables
avoir
portée
s’étend
sur
l’intégralité
script
php,
être
globales
;
cependant,
variables
être
locales
sein
d’une
fonction
;
56
syntaxe
langage
alcôve
-
programmer
en
php
:
$toto
=
1
;
#
porter
globale
function
afficher
()
{
echo
$toto
;
#
porter
locale
}
affiche()
;
exemple
n’affichera
rien
echo()
utiliser
variable
local
$toto.
57

syntaxe
langage
alcôve
-
programmer
en
php
deux
façon
exister
pour
accéder
à
variable
globale
sein
d’un
bloc
:
–
déclarer
variable
global
sein
bloc,
–
utiliser
tableau
associatif
$globals
avec
clé
nom
de
variable
globale.
58
syntaxe
langage
alcôve
-
programmer
en
php
:
$toto
=
1
;
#
porter
globale
$titi
=
2
;
#
porter
globale
function
afficher
()
{
global
$toto
;
#
porter
globale
echo
"$toto
$globals[’titi’]"
;}
affiche()
;
exemple
afficher
1
59

syntaxe
langage
alcôve
-
programmer
en
php
variables
statiques
:
variable
statique
être
variable
locale
perdre
valeur
à
fois
bloc
être
exécuter
;
utilise,
en
c,
l’attribut
static
pour
déclarer
tel
variable
:
:
static
$toto
;
type
de
variables
être
utile
pour
création
de
fonction
récursives
;
60
syntaxe
langage
alcôve
-
programmer
en
php
:
compter
récursivement
jusqu’à
10
function
compter
()
{
static
$compteur
=
0
;
$compteur++
;
echo
"$compteur
"
;
if
($compteur
<
10)
compte()
;
}
compte()
;
affiche
1
2
3
4
5
6
7
8
9
61

syntaxe
langage
alcôve
-
programmer
en
php
variables
dynamiques
:
variable
dynamique
prendre
valeur
d’une
variable
l’utilise
nom
d’une
autre
variable
;
:
$toto
=
"hello"
;
#
$toto
valoir
hello
$$toto
=
"world"
;
#
$hello
valoir
world
echo
"$toto
$hello!
!"
;
#
affiche
hello
world!
!
echo
"$toto
${$toto}!
!"
;
#
affiche
hello
world!
!
62
syntaxe
langage
alcôve
-
programmer
en
php
nom
d’une
variable
pouvoir
être
placer
entre
accolade
pour
éviter
ambiguïté
;
:
$a[1]
=
"v1"
;
$a
=
"v2"
;
$b
=
"a"
;
$b[1]
=
"a"
;
résultat
:
${$b}[1]
==
"v1"
résultat
:
${$b[1]}
==
"v2"
conclusion
:
${$b}[1]
${$b[1]}
s’utilisent
dans
2
contexte
différents.
63

syntaxe
langage
alcôve
-
programmer
en
php
variables
extérieures
:
variables
transmettre
par
méthode
post
get
être
accessibles
via
tableau
associatifs
$http_post_vars
$http_get_vars
(si
l’option
track_vars
être
activer
dans
php3.ini/php.ini)
;
variables
d’environnement
être
accessibles
variables
php
classiques
(ex
:
$home)
;
pouvoir
utiliser
fonction
getenv()
putenv()
pour
manipuler
variables
d’environnement
;
64
syntaxe
langage
alcôve
-
programmer
en
php
variables
prédéfinies
:
variables
être
prédéfinies
par
php,
être
disponibles
pendant
l’exécution
script.
php_self
uri
script
en
cours
d’exécution.
globals
tableau
variables
globales.
http_get_vars
tableau
variables
issue
de
get.
http_post_vars
tableau
variables
issue
de
post.
http_cookie_vars
tableau
variables
issue
cookies.
65

syntaxe
langage
alcôve
-
programmer
en
php
variables
d’environnement
cgi
:
server_software
server_name
gateway_interface
server_protocol
server_port
request_method
path_info
path_translated
script_name
query_string
remote_host
remote_addr
auth_type
remote_user
remote_ident
content_type
content_length
http
://hoohoo.ncsa.uiuc.edu/cgi/env.html
66
syntaxe
langage
alcôve
-
programmer
en
php
pour
déterminer
type
d’une
variable
pouvoir
utiliser
fonction
suivantes
:
–
gettype()
:
retourner
chaine
décrire
type
de
variable
passée
en
argument
(
integer
,
double
,
string
,
array
,
object
,
unknown
type
),
–
is_long()/is_int()/is_integer()
:
retourne
true
variable
passée
en
argument
être
entier
false
dans
cas
contraire,
–
is_double()/is_float
:
avec
flottants/doubles,
–
is_string()
:
avec
chaîne
de
caractères,
–
is_array()
:
avec
tableaux,
–
is_object()
:
avec
objets.
67

syntaxe
langage
alcôve
-
programmer
en
php
constantes
php
définir
constante
proposer
mécanisme
en
définir
d’autres
durant
l’exécution
script
;
définir
constante
en
utiliser
fonction
define()
;
:
define("ma_constante",
"bonjour")
;
echo
ma_constante
;
#
affiche
bonjour
68
syntaxe
langage
alcôve
-
programmer
en
php
principal
constantes
définir
par
php
être
suivantes
:
–
__file__
:
nom
fichier
exécuté,
–
__line__
:
numéro
de
ligne
être
exécutée,
–
php_version
:
présentation
de
version
php
utiliser
(ex
:
3.0.8-dev),
–
php_os
:
système
d’exploitation
utiliser
par
machine
faire
tourner
php
(ex
:
linux),
–
true
:
vrai,
–
false
:
faux,
–
e_*
:
gestion
erreur
(cf.
section
correspondante).
69

syntaxe
langage
alcôve
-
programmer
en
php
opérateur
opérateur
arithmétiques
:
–
addition
:
$a
+
$b,
–
soustraction
:
$a
-
$b,
–
multiplication
:
$a
*
$b,
–
division
:
$a
/
$b,
–
modulo
(reste
de
division
entière)
:
$a
%
$b.
70
syntaxe
langage
alcôve
-
programmer
en
php
l’opérateur
sur
chaîne
de
caractère
:
–
concaténation
:
chaine1
.
chaine2
:
$jour
=
"lundi"
;
echo
’nous
sommes
’
.
$jour
.
"!
!"
;
afficher
sommes
lundi!
!
71

syntaxe
langage
alcôve
-
programmer
en
php
opérateur
sur
bit
:
–
bit
à
bit
:
$a
&
$b,
–
bit
à
bit
:
$a
|
$b,
–
ou-exclusif/xor
bit
à
bit
:
$a
ˆ
$b,
–
bit
à
bit
:
˜$a,
–
décalage
à
droite
de
$b
bit
:
$a
>
>
$b,
–
décalage
à
gauche
de
$b
bit
:
$a
<
<
$b.
72
syntaxe
langage
alcôve
-
programmer
en
php
opérateur
logiques
:
–
(vrai
$a
$b
vrais)
:
$a
and
$b,
$a
&&
$b.
–
(vrai
$a
$b
vrai(s))
:
$a
or
$b,
$a
||
$b.
–
ou-exclusif/xor
(vrai
seul
$a
$b
vrai)
:
$a
xor
$b,
–
(vrai
$a
être
faux)
:!
!$a.
73

syntaxe
langage
alcôve
-
programmer
en
php
opérateur
d’affectation
:
–
l’opérateur
d’affectation
simple
être
signe
=,
–
signifier
"égal
à"
l’opérande
à
gauche
signe
=
voir
affecter
de
valeur
de
l’opérande
de
droite,
–
valeur
retourner
par
expression
d’assignement
être
valeur
assignée,
:
$a
=
($b
=
4)
+
3
;
#
$a
valoir
7
$b
valoir
4
74
syntaxe
langage
alcôve
-
programmer
en
php
–
exister
en
opérateur
combiner
pour
opérateur
arithmétiques,
opérateur
bit
à
bit
l’opérateur
de
concaténation,
+=
-=
*=
/=
%=
.=
&=
|=
ˆ=
<
<=
>
>=
˜=
–
ceux-ci
permettre
d’utiliser
valeur
d’une
variable
dans
expression
d’affecter
résultat
de
expression
à
variable,
:
$toto
+=
3
#
équivaloir
à
$toto
=
$toto
+
3
75

syntaxe
langage
alcôve
-
programmer
en
php
–
l’opérateur
++
être
équivalent
à
+=
1,
–
l’opérateur
--
être
équivalent
à
-=
1,
–
deux
opérateur
pouvoir
être
placer
avant
(pré-exécution)
après
(post-exécution)
variable
à
s’appliquent.
:
$toto
=
0
;
echo
++$toto
;
#
affiche
1
echo
$toto++
;
#
affiche
1
echo
$toto
;
#
affiche
2
76
syntaxe
langage
alcôve
-
programmer
en
php
opérateur
de
comparaison
:
–
égal
à
:
$a
==
$b,
–
différent
de
:
$a!
!=
$b,
–
supérieur
à
:
$a
>
$b,
–
inférieur
à
:
$a
<
$b,
–
supérieur
égal
à
:
$a
>=
$b,
–
inférieur
égal
à
:
$a
<=
$b.
77

syntaxe
langage
alcôve
-
programmer
en
php
l’opérateur
ternaire
:
–
issu
langage
c,
–
(condition)
?
(expression1)
:
(expression2)
;,
–
renvoyer
expression1
condition
être
vraie
expression2
dans
cas
contraire.
:
echo
$toto
==
0
?
"nul"
:
"non
nul"
;
#
affiche
nul
$toto
valoir
0
nul
78
section
2
alcôve
-
programmer
en
php
structure
de
contrôle
79

les
structure
de
contrôle
alcôve
-
programmer
en
php
objectifs
de
section
introduction
;
instruction
conditionnelles
;
boucle
;
inclusions.
80
structure
de
contrôle
alcôve
-
programmer
en
php
introduction
script
php
être
suite
d’instructions
;
instruction
pouvoir
être
:
–
assignement,
–
appel
de
fonction,
–
instruction
conditionnelle,
–
instruction
faire
(une
instruction
vide).
instruction
terminer
par
point
virguler
(
;)
;
81

les
structure
de
contrôle
alcôve
-
programmer
en
php
instruction
pouvoir
être
regrouper
en
bloc
,
délimiter
par
accolade
({...})
;
bloc
être
considérer
instruction
;
différents
type
d’instructions
être
décrire
dans
chapitre.
82
structure
de
contrôle
alcôve
-
programmer
en
php
instruction
conditionnelles
l’instruction
if
être
importantes
instruction
de
langages,
php
inclure
;
permettre
l’exécution
conditionnelle
d’une
partir
de
code
;
fonctionnalité
de
l’instruction
if
être
mêmes
en
php
qu’en
c;
83

les
structure
de
contrôle
alcôve
-
programmer
en
php
prototyper
:
if
(condition)
{
#
instruction
à
exécuter
condition
être
vraie...
}
chaine
de
caractère
contenir
0
être
évaluer
fausse
;
84
structure
de
contrôle
alcôve
-
programmer
en
php
souhaiter
exécuter
instruction
condition
être
remplie,
autre
instruction
condition
n’est
remplir
;
c’est
rôle
else
;
prototype
:
if
(condition)
{
#
instruction
à
exécuter
condition
être
vraie...
}
else
{
#
instruction
à
exécuter
condition
être
fausse...
}
85

les
structure
de
contrôle
alcôve
-
programmer
en
php
elseif
permet,
l’expression
else,
d’exécuter
instruction
après
if
dans
cas
dernier
être
évaluer
faux
;
a
différence
de
l’expression
else,
n’exécutera
instruction
l’expression
condionnelle
elseif
être
évaluer
vraie
;
86
structure
de
contrôle
alcôve
-
programmer
en
php
prototyper
:
if
(condition1)
{
#
instruction
à
exécuter
condition1
être
vraie...
}
elseif
(condition2)
{
#
instruction
à
exécuter
condition2
être
vraie...
}
elseif
(condition3)
{
#
instruction
à
exécuter
condition3
être
vraie...
...
}
else
{
#
instruction
à
exécuter
condition
n’est
vraie...
}
87

les
structure
de
contrôle
alcôve
-
programmer
en
php
syntaxe
if
venir
de
voir
être
hériter
langage
c
;
adapter
pour
mélanger
code
php
html
;
php
proposer
autre
syntaxe
pour
if
permettre
d’améliorer
lisibilité
;
88
structure
de
contrôle
alcôve
-
programmer
en
php
prototyper
simplifier
:
if
(condition1)
:
#
instruction
à
exécuter
condition1
être
vraie...
elseif
(condition2)
:
#
instruction
à
exécuter
condition2
être
vraie...
elseif
(condition3)
:
#
instruction
à
exécuter
condition3
être
vraie...
...
else
:
#
instruction
à
exécuter
condition
n’est
vraie...
endif
;
89

les
structure
de
contrôle
alcôve
-
programmer
en
php
:
if
($type
==
"femme")
{
echo
"bonjour
madame"
;
}
elseif
($type
==
"homme")
{
echo
"bonjour
monsieur"
;
}
else
{
echo
"bonjour,
être
bizarre!
!"
;
}
90
structure
de
contrôle
alcôve
-
programmer
en
php
boucler
boucle
while
être
moyen
simple
d’implémenter
boucle
en
php
;
boucle
comporter
de
même
manière
qu’en
c
:
instruction
être
exécuter
l’expression
être
vraie
;
valeur
de
l’expression
être
vérifier
à
début
de
boucle
;
91

les
structure
de
contrôle
alcôve
-
programmer
en
php
valeur
changer
durant
l’exécution
de
l’instruction,
l’exécution
s’arrêtera
qu’à
fin
de
l’itération
;
avec
if,
php
définir
syntaxe
simplifiée,
en
de
hériter
langage
c
;
92
structure
de
contrôle
alcôve
-
programmer
en
php
prototyper
:
while
(condition)
{
#
instruction
à
exécuter
condition
être
vraie...
}
prototyper
simplifier
:
while
(condition)
:
#
instruction
à
exécuter
condition
être
vraie...
endwhile
;
93

les
structure
de
contrôle
alcôve
-
programmer
en
php
:
compter
jusqu’à
10
$i
=
1
;
while
($i
<=
10)
{
echo
"$i
"
;
$i++
;
}
affiche
1
2
3
4
5
6
7
8
9
10.
94
structure
de
contrôle
alcôve
-
programmer
en
php
boucle
do..while
ressembler
à
boucle
while
;
différence
être
l’expression
être
tester
à
fin
de
itération
lieu
début
;
premier
itération
de
boucle
être
exécuter
;
n’y
avoir
qu’une
syntaxe
possible
pour
boucle
do..while
est,
aussi,
hériter
langage
c
;
95

les
structure
de
contrôle
alcôve
-
programmer
en
php
prototyper
:
do
{
#
instruction
à
exécuter
premier
fois
condition
être
vraie...
}
while
(condition)
;
96
structure
de
contrôle
alcôve
-
programmer
en
php
:
compter
jusqu’à
10
$i
=
1
;
do
{
echo
"$i
"
;
$i++
;
}
while
($i
<=
10)
;
affiche
1
2
3
4
5
6
7
8
9
97

les
structure
de
contrôle
alcôve
-
programmer
en
php
boucle
for
est,
en
php
en
c,
boucle
complexe
puissante
;
fonctionner
boucle
for
langage
c
;
prototype
:
for
(expression1
;
condition
;
expression2)
{
#
instruction
à
exécuter
condition
être
vraie...
}
98
structure
de
contrôle
alcôve
-
programmer
en
php
l’expression1
être
évaluer
(exécutée)
qu’il
arriver
début
de
boucle
;
début
de
itération,
condition
être
évaluer
;
–
être
vraie,
boucle
continue
instruction
être
à
nouveau
exécutées,
–
être
fausse,
l’exécution
de
boucle
s’arrête.
a
fin
de
itération,
l’expression2
être
évaluer
(exécutée)
;
99

les
structure
de
contrôle
alcôve
-
programmer
en
php
expressions/conditions
pouvoir
être
laissées
vides
(->
attention
boucle
infinies)
;
avec
if
while,
php
définir
syntaxe
simplifiée,
en
de
hériter
langage
c
;
prototype
simplifier
:
for
(expression1
;
condition
;
expression2)
:
#
instruction
à
exécuter
condition
être
vraie...
endfor
;
100
structure
de
contrôle
alcôve
-
programmer
en
php
:
compter
jusqu’à
10
for
($i
=
1
;
$i
<=
10
;
$i++)
{
echo
"$i
"
;
}
ex2
:
compter
jusqu’à
10
for
($i
=
1
;
$i
<=
10
;
print
"$i
",
$i++)
;
ex3
:
compter
jusqu’à
10
for
($i
=
1
;
$i
<=
10
;
print
$i++)
;
3
exemple
afficher
1
2
3
4
5
6
7
8
9
101

les
structure
de
contrôle
alcôve
-
programmer
en
php
php4
définir
boucle
foreach,
en
perl,
pour
réaliser
boucle
sur
élément
d’un
tableau
;
en
php3
pouvoir
réaliser
l’équivalent
avec
boucle
while
fonction
list()
each()
avoir
voir
;
:
afficher
argument
d’un
formulaire
post
while
(list($cle,
$valeur)
=
each($http_post_vars))
{
echo
"$cle
=>
$valeur,
"
;
}
102
structure
de
contrôle
alcôve
-
programmer
en
php
avec
l’instruction
foreach
boucle
devenir
:
foreach
($http_post_vars
avoir
$cle
=>
$valeur)
{
echo
"$cle
=>
$valeur,
"
;
}
bien,
l’on
vouloir
récupérer
valeur
:
foreach
($http_post_vars
avoir
$valeur)
{
echo
"$valeur,
"
;
}
103

les
structure
de
contrôle
alcôve
-
programmer
en
php
l’instruction
break
permettre
de
sortir
d’une
boucle
à
n’importe
moment
;
:
compter
jusqu’à
10
for
($i
=
1,
,
$i++)
{
if
($i
>
10)
break
;
echo
"$i
"
;
}
affiche
1
2
3
4
5
6
7
8
9
10.
104
structure
de
contrôle
alcôve
-
programmer
en
php
l’instruction
continuer
permettre
d’ignorer
instruction
restantes
dans
boucle
de
passer
à
l’itération
suivante
;
:
compter
2
par
2
jusqu’à
10
for
($i
=
1,
$i
<=
10,
$i++)
{
if
($i
%
2)
continue
;
#
$i
impaire
echo
"$i
"
;
}
affiche
2
4
6
8
105

les
structure
de
contrôle
alcôve
-
programmer
en
php
l’instruction
switch
équivaloir
à
serie
d’instructions
if..elseif..elseif....else
;
être
utiliser
pour
comparer
variable
(ou
expression)
avec
grand
nombre
de
valeur
différentes
d’exécuter
différentes
partir
de
code
suivre
valeur
à
être
égale
;
106
structure
de
contrôle
alcôve
-
programmer
en
php
prototyper
:
switch
(expression)
{
case
resultat1
:
#
instruction
à
exécuter
l’expression
valoir
resultat1...
break
;
case
resultat2
:
#
instruction
à
exécuter
l’expression
valoir
resultat2...
break
;
...
default
:
#
instruction
à
exécuter
en
dernier
recours...
}
107

les
structure
de
contrôle
alcôve
-
programmer
en
php
l’instruction
switch
exécuter
clause
dans
l’ordre
d’écriture
;
être
exécuter
ligne
par
ligne
;
code
n’est
exécuter
jusqu’à
premier
case
être
vérifier
;
108
structure
de
contrôle
alcôve
-
programmer
en
php
lorsqu’il
trouver
premier
case
vérifié,
php
exécuter
instruction
correspondantes
continue
jusqu’à
fin
bloc
switch
;
pour
reproduire
fonctionnement
d’un
if..elseif..elseif....else,
falloir
terminer
case
par
break
;
pouvoir
définir
case
exécuter
par
défaut
(équivalent
else)
grâce
à
default
;
109

les
structure
de
contrôle
alcôve
-
programmer
en
php
:
switch
($type)
{
case
"femme"
:
echo
"bonjour
madame"
;
break
;
case
"homme"
:
echo
"bonjour
monsieur"
;
break
;
default
:
echo
"bonjour,
être
bizarre!
!"
;
}
110
structure
de
contrôle
alcôve
-
programmer
en
php
inclusion
fonction
require()
substituer
avec
contenu
fichier
spécifier
en
argument
;
substitution
s’opère
avant
l’interprétation
code
;
ressembler
à
#include
c
;
l’utilise
sein
d’une
boucle,
c’est
fichier
qu’il
être
à
premier
itération
être
réutiliser
à
itération
(même
s’il
avoir
changer
entre
temps)
;
de
plus,
être
déconseiller
d’utiliser
require()
avec
nom
de
fichier
dynamique
(contenant
variable)
;
111

les
structure
de
contrôle
alcôve
-
programmer
en
php
fonction
include()
inclure
évaluer
fichier
spécifier
en
argument
;
être
faire
à
fois
fonction
être
rencontrer
;
pouvoir
utiliser
fonction
sein
d’une
boucle
pour
inclure
fichier
différent
à
fois
par
exemple
(ex
:
include("toto_$i")
;).
112
section
3
alcôve
-
programmer
en
php
fonction
113

fonctions
alcôve
-
programmer
en
php
objectifs
de
section
présentation
fonction
php
;
valeur
de
retour
;
arguments.
114
fonction
alcôve
-
programmer
en
php
présentation
fonction
php
fonction
pouvoir
être
définir
en
utiliser
syntaxe
suivante
:
function
ma_fonction
($arg_1,
$arg_2,
...,
$arg_n)
{
#
corps
de
fonction...
return
$valeur_de_retour
;
}
coder
php
correct
syntaxiquement
pouvoir
apparaître
dans
fonction
dans
définition
de
classe
;
en
php3
fonction
devoir
être
définir
avant
d’être
utiliser
(idem
langage
c).
pouvoir
être
définir
n’importe
en
php4.
115

fonctions
alcôve
-
programmer
en
php
valeur
de
retour
valeur
être
renvoyer
en
utiliser
instruction
de
retour
optionnelle
;
type
de
variables
pouvoir
être
renvoyer
(tableaux
objet
compris)
;
:
function
carre($nombre)
{
return
$nombre
*
$nombre
;
}
echo
carre(3)
;
#
affiche
valeur
9
116
fonction
alcôve
-
programmer
en
php
pouvoir
renvoyer
valeur
en
même
temps
pouvoir
obtenir
résultat
identique
en
renvoyer
tableau
;
:
function
couleurs()
{
return
array("coeur",
"pique",
"trèfle",
"carreau")
;
}
list($c1,
$c2,
$c3,
$c4)
=
couleurs()
;
117

fonctions
alcôve
-
programmer
en
php
php4
permettre
retour
de
fonction
par
référence
;
mécanisme
être
utile
l’on
chercher
à
utiliser
fonction
pour
trouver
variable
l’on
vouloir
lier
;
a
différence
passage
par
référence,
falloir
utiliser
un
&
à
deux
endroit
:
–
pour
indiquer
l’on
retourner
référence
(et
copie
à
l’habitude),
–
pour
indiquer
qu’une
liaison
à
référence
simple
assignement
de
variable
devoir
avoir
lieu
avec
variable
de
retour.
118
fonction
alcôve
-
programmer
en
php
:
function
&
trouve_variable
($param)
{
#
...recherche
de
variable
$toto...
return
$toto
;
}
$titi
=
&
trouve_variable($tata)
;
$titi->x
=
2
;
propriété
de
l’objet
retourner
par
fonction
trouve_variable()
être
lier
à
$titi.
s’agit
d’une
copie
de
$toto.
119

fonctions
alcôve
-
programmer
en
php
argument
information
pouvoir
être
passer
à
fonction
en
utiliser
tableau
d’arguments
élément
être
séparer
par
virgule
;
élément
pouvoir
être
variable
constante
;
php
supporter
:
–
passage
d’arguments
par
valeur
(méthode
par
défaut),
–
passage
d’arguments
par
référence,
–
valeur
par
défaut
arguments.
liste
d’arguments
nombre
être
variable
fonctionner
en
php
résultat
similaire
pouvoir
être
obtenir
en
utiliser
tableau
;
120
fonction
alcôve
-
programmer
en
php
passager
d’arguments
par
valeur
:
c’est
méthode
par
défaut
;
variables
être
affecter
par
changement
sein
de
fonction
;
pouvoir
changer
valeur
argument
sein
de
fonction
sans
avoir
répercussion
à
l’extérieur
de
celle-ci
;
121

fonctions
alcôve
-
programmer
en
php
:
function
ajoute_deux($nombre)
{
$nombre
+=
2
;
echo
$nombre
;
}
$toto
=
3
;
ajoute_deux($toto)
;
#
affiche
5
echo
$toto
;
#
affiche
3
122
fonction
alcôve
-
programmer
en
php
passager
d’arguments
par
référence
:
variables
être
affecter
par
changement
sein
de
fonction
;
deux
possibilité
:
–
de
façon
permanente
en
ajouter
&
devant
nom
de
variable
dans
définition
de
fonction,
–
de
façon
ponctuelle
en
ajouter
&
devant
nom
de
variable
de
l’appel
à
fonction.
123

fonctions
alcôve
-
programmer
en
php
:
function
retranche_deux(
&
$nombre)
{
$nombre
-=
2
;
echo
$nombre
;
}
$toto
=
3
;
ajoute_deux(
&
$toto)
;
#
affiche
5
echo
$toto
;
#
affiche
5
retranche_deux($toto)
;
#
affiche
3
echo
$toto
;
#
affiche
3
124
fonction
alcôve
-
programmer
en
php
valeur
par
défaut
argument
:
php
permet,
en
c++,
de
spécifier
valeur
par
défaut
pour
argument
de
type
scalaire
;
suffire
de
spécifier
valeur
par
défaut
avec
=
dans
déclaration
de
fonction
;
valeur
devoir
être
constante
(pas
de
variables
d’attributs
de
classes)
argument
par
défaut
devoir
être
dernier
dans
liste
;
125

fonctions
alcôve
-
programmer
en
php
:
function
annotation($type
=
"assez
bien")
{
echo
"vous
avoir
$type
travaillé"
;
}
annotation("mal")
;
#
affiche
avoir
travailler
annotation()
;
#
affiche
avoir
travailler
126
section
4
alcôve
-
programmer
en
php
programmation
orienter
objet
127

programmation
orienter
objet
alcôve
-
programmer
en
php
objectifs
de
section
rappel
sur
programmation
orienter
objet
;
classe
en
php
;
objet
en
php
;
particularité
de
php.
128
programmation
orienter
objet
alcôve
-
programmer
en
php
rappel
sur
programmation
orienter
objet
poo
->
raisonner
en
terme
de
fonctionnalité
de
propriété
en
terme
de
traitement
;
l’
encapsulation
:
l’objet
représenter
abstraction
d’une
entité
abstraite
concrète
regrouper
en
même
structure
donnée
traitement
;
objet
posséder
caractéristique
fonctionnalité
l’utilise
sans
savoir
être
implémentées
(ex
:
téléphone)
;
129

programmation
orienter
objet
alcôve
-
programmer
en
php
caractéristiques/fonctionnalités
utiles
pour
manipulation
de
l’objet
utiles
à
fonctionnement
être
masquer
à
l’utilisateur
(ex
:
composants
interne
téléphone)
;
l’
héritage
:
objet
pouvoir
dériver
d’un
autre
objet
posséder
caractéristiques/fonctionnalités
supplémentaires
en
hériter
caractéristiques/fonctionalités
de
aïeul
(ex
:
téléphone
sans
fils
être
téléphone
particulier)
;
130
programmation
orienter
objet
alcôve
-
programmer
en
php
polymorphisme
:
lorsqu’on
invoquer
méthode
d’un
objet,
programme
savoir
retrouver
méthode
parmis
aïeux
de
l’objet
celle-ci
n’est
définir
pour
qu’il
avoir
hériter
(ex
:
méthode
"décrocher
téléphone"
pour
un
sans
fils)
;
131

programmation
orienter
objet
alcôve
-
programmer
en
php
a
création
(
instanciation
)
de
l’objet,
méthode
(qui
porter
même
nom
classe)
être
appellée
:
c’est
constructeur
;
parfois,
à
destruction
de
l’objet,
méthode
(qui
porter
même
nom
classe
précéder
d’un
˜)
être
appellée
:
c’est
destructeur
;
132
programmation
orienter
objet
alcôve
-
programmer
en
php
classe
être
collection
de
variables
(
attribut
)
de
fonction
(
méthode
)
s’appliquent
à
variables
;
objet
être
instance
d’une
classe.
type
de
donnée
être
classe
d’objets
à
appartenir
(un
$toto
=
123
;
être
instance
type
entier
).
133

programmation
orienter
objet
alcôve
-
programmer
en
php
classe
en
php
en
php,
définir
classe
d’objets
de
façon
suivante
:
macler
{
#
attribut
var
$monattribut
;
#
méthode
function
mamethode($argument)
{
#
...traitement
de
$monattribut
avec
$argument...
}
}
134
programmation
orienter
objet
alcôve
-
programmer
en
php
objet
en
php
être
possible
de
spécifier
variable
objet
de
façon
suivante
:
$monobjet
=
new
macler
;
accéder
à
attribut
à
méthode
de
façon
suivante
:
$monobjet->monattribut
=
"toto"
;
$monobjet->mamethode(23)
;
135

programmation
orienter
objet
alcôve
-
programmer
en
php
particularité
de
php
attribut
méthode
être
publics
;
objet
être
libérer
être
utiliser
(
garbage
collector
)
;
de
destructeur.
136
programmation
orienter
objet
alcôve
-
programmer
en
php
:
caddie
class
caddie
{
var
$elements
;
#
élément
de
caddie
#
constructeur
ajouter
cadeau
à
nouveau
caddie
function
caddie()
{
$this->ajoute(1,
"cadeau")
;
}
#
ajout
de
$nombre
article
de
type
$type
caddie
function
ajoute($nombre,
$type)
{
$this->elements[$type]
+=
$nombre
;
}
137

programmation
orienter
objet
alcôve
-
programmer
en
php
#
retraire
de
$nombre
article
de
type
$type
caddie
function
enleve($nombre,
$type)
{
if
($this->elements[$type]
>
$nombre)
{
$this->elements[$type]
-=
$nombre
;
return
true
;
}
else
{
return
false
;
}
}
}
138
chapitre
3
alcôve
-
programmer
en
php
fonctionnalité
essentielles
139

fonctionnalités
essentielles
alcôve
-
programmer
en
php
objectifs
chapitre
gestion
connexion
utilisateur
;
gestion
session
;
autres
fonctionnalité
essentielles.
140
section
1
alcôve
-
programmer
en
php
connexion
utilisateur
141

connexions
utilisateurs
alcôve
-
programmer
en
php
objectifs
de
section
gestion
utilisateur
-
authentification
;
gestion
connexions.
142
connexion
utilisateurs
alcôve
-
programmer
en
php
gestion
utilisateur
-
authentification
fonction
d’authentification
http
être
disponibles
php
être
exécuter
moduler
apache
(et
cgi)
;
utiliser
fonction
header()
pour
demander
authentification
(authentication
required)
client,
générer
l’apparition
d’une
fenêtre
de
demande
de
nom
d’utilisateur
de
mot
de
passe
;
143

connexions
utilisateurs
alcôve
-
programmer
en
php
fois
champ
avoir
être
remplis,
l’url
être
de
nouveau
appelée
avec
variables
suivantes
mettre
à
jour
:
–
$php_auth_user
:
utilisateur,
–
$php_auth_pw
:
mot
de
passe,
–
$php_auth_type
:
type
d’authentification.
actuellement,
seule
l’authentification
basique
(basic)
être
supporter
;
144
connexion
utilisateurs
alcôve
-
programmer
en
php
:
page
d’authentification
<
?php
if(!
!isset($php_auth_user))
{
header("www-authenticate
:
basic
realm=’titre’")
;
header("http/1.0
401
unauthorized")
;
echo
"texte
à
envoyer
client
en
cas
d’annulation"
;
exit
;
}
else
{
echo
"bonjour
$php_auth_user.<br>"
;
echo
"votre
mot
de
passe
être
$php_auth_pw."
;
}
?>
145

connexions
utilisateurs
alcôve
-
programmer
en
php
gestion
connexion
statut
connexion
être
conserver
en
interne
par
php
;
avoir
trois
état
possibles
:
–
0
/
normal
:
script
php
travaille,
–
1
/
aborted
:
client
distant
s’est
déconnecté,
–
2
/
timeout
:
durée
maximale
d’exécution
être
dépassée.
146
connexion
utilisateurs
alcôve
-
programmer
en
php
par
défaut,
script
php
terminer
dès
client
déconnecter
pouvoir
changer
politique
de
différentes
façon
:
–
continuer
script
client
être
en
activant
l’option
:
ignore_user_abort
dans
php3.ini/php.ini,
[php3_ignore_user_abort/ignore_user_abort
dans
apache.conf.
–
exécuter
fonction
de
fermeture
enregistrer
grâce
à
fonction
register_shutdown_function().
147

connexions
utilisateurs
alcôve
-
programmer
en
php
fonction
enregistrer
avec
register_shutdown_function()
être
appeler
à
fin
script
celui-ci
terminer
;
pour
pouvoir
avoir
comportement
différent
suivant
l’état
script
de
finalisation
pouvoir
tester
l’état
déconnecter
script
avec
fonction
connection_aborted()
;
fonction
connection_status()
permettre
de
retourner
l’état
script
(0,
1,
2
3)
;
148
connexion
utilisateurs
alcôve
-
programmer
en
php
pouvoir
modifier
délai
de
timeout
(30
seconder
par
défaut)
de
manière
:
–
fonction
set_time_limit(),
–
max_execution_time
dans
php3.ini/php.ini,
–
php3_max_execution_time/max_execution_time
dans
apache.conf.
fonction
enregistrer
avec
register_shutdown_function()
être
appeler
lorsqu’un
timeout
intervenir
;
pouvoir
tester
l’état
timeout
script
avec
fonction
connection_timeout()
;
149

section
2
alcôve
-
programmer
en
php
gestion
session
150
gestion
session
alcôve
-
programmer
en
php
objectifs
de
section
principe
;
session
avec
phplib
;
session
avec
php4.
151

gestion
session
alcôve
-
programmer
en
php
principe
gestion
session
avec
php
être
moyen
de
sauver
information
entre
deux
accès
(requêtes
http)
;
permettre
de
construire
application
personnalisées,
d’accroître
fonctionnalité
de
site
;
malheureusement,
gestion
session
n’était
inclure
dans
fonctionnalité
standard
de
php
jusqu’à
version
php4
;
bibliothèque
complémentaire
avoir
être
développer
pour
gérer
session
avec
php3,
c’est
phplib
;
152
gestion
session
alcôve
-
programmer
en
php
session
avec
phplib
phplib
être
bibliothèque
php
libre
viser
à
faciliter
création
de
site
avec
php
;
être
utilisable
avec
php4
présente
d’ailleurs
fonctionnalité
dernier
posséder
en
natif
;
composer
de
classe
de
fonction
permettre
:
–
suivi
sessions,
–
l’utilisation
de
variables
persistantes
niveau
utilisateur
niveau
session,
–
l’authentification
gestion
permissions,
–
génération
rapide
de
code
html...
153

gestion
session
alcôve
-
programmer
en
php
installation
:
–
récupérer
l’archive
(http
://phplib.netuse.de),
–
décompresser
dans
répertoire
quelconque
(ex
:
/usr/lib/phplib/),
–
éditer
fichier
php3.ini/php.ini
fixer
option
de
façon
suivante
:
magic_quotes_gpc
=
off
magic_quotes_runtime
=
off
magic_quotes_sybase
=
off
track_vars
=
auto_prepend_file
=
<répertoire
contenir
prepend.php>
include_path
=
<répertoire
d’installation>
154
gestion
session
alcôve
-
programmer
en
php
pour
l’utilisation
de
phplib,
falloir
créer
fichier
en
script
php
:
–
prepend.php
servir
à
définir
librairie
phplib
à
inclure
avant
fichier,
–
local.inc
servir
à
définir
classe
aller
être
utiliser
par
scripts.
155

gestion
session
alcôve
-
programmer
en
php
pour
gérer
session
variables
persistantes,
librairie
servir
d’une
base
de
données,
d’un
annuaire
ldap
d’un
simple
fichier
;
base
de
donnée
différentes
table
être
utiliser
par
script
utiliser
phplib
devoir
être
créer
par
soin
grâce
fichier
de
configuration
fournir
(généralement
dans
/usr/lib/phplib/stuff/)
;
:
base
de
donnée
mysql
mysql
-h
<ma_machine_hote>
<ma_base>
<create_database.mysql
156
gestion
session
alcôve
-
programmer
en
php
pour
gérer
session,
phplib
utiliser
identifier
être
transmettre
de
script
en
script
cours
de
navigation
;
pour
session
sans
reprise,
identifier
pouvoir
être
transmettre
dans
l’url
;
pour
gérer
reprise
de
sessions,
phplib
pouvoir
stocker
l’identifiant
dans
cookie
qu’il
transmettre
client
à
fin
de
script
(fonction
page_close())
;
157

gestion
session
alcôve
-
programmer
en
php
phplib
définir
classe
pour
accéder
base
de
donnée
gérer
session
;
devoir
définir
propres
classe
dériver
classe
génériques
de
phplib
;
classe
être
stocker
dans
fichier
local.inc
;
158
gestion
session
alcôve
-
programmer
en
php
page
gérer
session
devoir
être
encadrer
par
:
–
page_open(array("sess"
=>
"masession")),
–
page_close()
;
souhaiter
utiliser
l’option
auto_prepend_file
pour
inclure
fichier
prepend.php,
pouvoir
commencer
script
par
include()
de
fichier
;
pour
rendre
variable
persistante,
utiliser
méthode
register()
de
classe
masession
;
159

gestion
session
alcôve
-
programmer
en
php
:
session.php
<
?php
page_open(array("sess"
=>
"masession"))
;
if(!
!isset($toto))
$toto
=
1
;
print
++$toto
;
$sess->register("toto")
;
page_close()
;
?>
160
gestion
session
alcôve
-
programmer
en
php
(suite)
:
local.php
<
?php
mabasesql
extends
db_sql
{
var
$host
=
"ma_machine_hote"
;
var
$database
=
"ma_base"
;
var
$user
=
"mon_utilisateur"
;
var
$password
=
"mon_password"
;
}
moncontainersql
extends
ct_sql
{
var
$database_class
=
"mabasesql"
;
var
$database_table
=
"ma_table"
;
}
161

gestion
session
alcôve
-
programmer
en
php
class
masession
extends
session
{
var
$classname
=
"masession"
;
var
$mode
=
"cookie"
;
var
$lifetime
=
6000
;
var
$that_class
=
"moncontainersql"
;
}
?>
162
gestion
session
alcôve
-
programmer
en
php
(fin)
:
prepend.php
<
?php
if
(!
!is_array($_phplib))
$_phplib["libdir"]
=
""
;
require($_phplib["libdir"]
.
"db_mysql.inc")
;
require($_phplib["libdir"]
.
"ct_sql.inc")
;
require($_phplib["libdir"]
.
"session.inc")
;
require($_phplib["libdir"]
.
"local.inc")
;
require($_phplib["libdir"]
.
"page.inc")
;
?>
163

gestion
session
alcôve
-
programmer
en
php
session
avec
php4
principe
être
même
qu’avec
phplib
:
attribuer
à
nouvel
utilisateur
identificateur
de
session
(sid)
;
numéro
être
transmettre
sous
forme
de
cookie
dans
urls
;
visiteur
accéder
à
page,
php4
vérifier
identificateur
de
session
avoir
être
transmettre
avec
requête
;
164
gestion
session
alcôve
-
programmer
en
php
vérification
pouvoir
être
faire
de
trois
manière
différentes
:
–
l’option
session.auto_start
être
activer
dans
php.ini,
–
par
l’appel
de
fonction
session_start(),
–
par
l’appel
de
fonction
session_register().
dans
cas
numéro
de
session
être
valide,
l’environnement
de
celle-ci
être
restaurer
;
165

gestion
session
alcôve
-
programmer
en
php
l’option
register_globals
de
php.ini
autoriser
variables
globales
à
être
sauvegarder
dans
session
;
:
<
?php
session_register("toto")
;
$toto++
;
?>
l’option
track_vars
de
php.ini
(qui
être
bloquer
à
1
pour
version
de
php4
supérieures
à
4.0.3)
autoriser
variables
de
$http_session_vars
à
être
sauvegarder
dans
session
;
:
<
?php
session_register("toto")
;
$http_session_vars["toto"]++
;
?>
166
gestion
session
alcôve
-
programmer
en
php
exister
deux
manière
pour
transmettre
numéro
de
session
sein
de
l’url
:
–
grâce
à
constante
sid
être
chaîne
de
caractère
de
forme
session_name=session_id
(ou
vide),
–
php4
avoir
être
compiler
avec
l’option
--enable-trans-sid.
167

gestion
session
alcôve
-
programmer
en
php
:
compteur
de
visite
<
?php
session_register("compteur")
;
$compteur++
;
?>
avoir
voir
page
<
?
echo
$compteur
;
?>
fois.
<!
!--
<
?=sid
?>
servir
à
conserver
numéro
de
session
cas
cookies
être
desactivés
-->
pour
continuer
cliquer
<a
href="compteur.php
?<
?=sid
?>">ici</a>
168
gestion
session
alcôve
-
programmer
en
php
fonction
utiliser
être
:
–
session_start()
:
créer
restaurer
session,
–
session_destroy()
:
détruire
session,
–
session_register()/session_unregister()
:
sauvegarde/oublie
variable,
–
session_set_save_handler()
:
permettre
de
définir
propres
fonction
de
sauvegarde
de
session
(pour
stocker
donnée
dans
base
de
donnée
par
exemple).
169

section
3
alcôve
-
programmer
en
php
autres
fonctionnalité
170
autres
fonctionnalité
alcôve
-
programmer
en
php
objectifs
de
section
récupération
traitement
erreur
;
cookies.
171

autres
fonctionnalité
alcôve
-
programmer
en
php
récupération
traitement
erreur
exister
4
type
d’erreurs
d’alertes
php
:
–
e_error
(1)
:
erreur
d’exécution
–
e_warning
(2)
:
alerte
–
e_parse
(4)
:
erreur
d’analyse
–
e_notice
(8)
:
note
(alertes
pouvoir
être
ignorées)
pour
définir
niveau
d’erreur,
ajouter
chiffre
erreur
l’on
souhaiter
prendre
en
compte
(bitmask
par
défaut
7
=
4
+
2
+
1)
;
172
autres
fonctionnalité
alcôve
-
programmer
en
php
niveau
pouvoir
être
changer
de
trois
manière
:
–
directive
error_reporting
dans
php3.ini/php.ini,
–
directive
php3_error_reporting/error_reporting/error_reporting
dans
httpd.conf,
–
fonction
error_reporting().
173

autres
fonctionnalité
alcôve
-
programmer
en
php
expression
php
pouvoir
être
appeler
avec
préfixe
@
permettre
d’ignorer
rapport
d’erreur
pour
fonction
particulière
;
erreur
survenir
dans
tel
expression,
l’option
track_errors
être
activer
dans
php3.ini/php.ini,
retrouver
message
d’erreur
dans
variable
globale
$php_errormsg
;
fonction
error_reporting()
établir
niveau
d’erreur
à
prendre
en
compte
renvoyer
l’ancien
niveau
;
174
autres
fonctionnalité
alcôve
-
programmer
en
php
fonction
error_log()
envoyer
message
d’erreur
:
–
dans
logs
serveur,
–
à
port
tcp,
–
à
fichier.
prendre
paramètre
:
–
message
:
message
devoir
être
envoyé,
–
message_type
:
type
de
transmission
choisir
:
0
:
système
standard
de
log
de
php,
1
:
mail,
2
:
machine
distante
(tcp/ip),
3
:
fichier
local.
:
error_log("alerte
rouge",
1,
"webmaster@monsite.fr")
;
175

autres
fonctionnalité
alcôve
-
programmer
en
php
cookies
cookies
être
mécanisme
d’enregistrement
d’informations
sur
disque
client
de
relecture
de
information
;
système
permettre
d’authentifier
de
suivre
visiteur
;
php
supporter
cookies
de
manière
transparente
;
176
autres
fonctionnalité
alcôve
-
programmer
en
php
pour
envoyer
cookie,
utiliser
commande
setcookie()
;
cookies
faire
partie
de
l’entête
http,
imposer
setcookie()
être
appeler
avant
affichage
sur
client
(idem
header())
;
avec
php4,
pouvoir
contourner
limitation
en
bufferisant
sortie
standard
grâce
à
fonction
ob_start()
libérer
celle-ci
grâce
à
fonction
ob_end_flush
;
pouvoir
indiquer
à
php4
de
bufferiser
sortie
grâce
à
l’option
output_buffering
de
php.ini
ralentir
php4
;
177

autres
fonctionnalité
alcôve
-
programmer
en
php
cookies
être
envoyer
client
être
retourner
script
php
placer
dans
tableau
associatif
$http_cookie_vars
;
seuls
cookies
correspondre
nom
de
domaine
de
page
demander
être
envoyer
serveur
par
navigateur
;
pour
affecter
valeur
à
seul
cookie
falloir
ajouter
[]
nom
cookie
;
178
autres
fonctionnalité
alcôve
-
programmer
en
php
:
cookie_ecriture.php
<
?php
setcookie("moncookie",
"contenu",
time()
+
3600)
;
?>
<html><body><h1>
maintenant,
l’avez!
!<br>
aller
sur
page
<a
href
=
"cookie_lecture.php">précédente</a>.
</h1></body></html>
179

autres
fonctionnalité
alcôve
-
programmer
en
php
(suite)
:
cookie_lecture.php
<html><body><h1>
<
?php
if
(isset($http_cookie_vars["moncookie"]))
:
?>
cookie
moncookie
contenir
:
<
?php
print
$http_cookie_vars["moncookie"]
;
else
:
?>
n’avez
cookie
moncookie.<br>
aller
chercher
<a
href
=
"cookie_ecriture.php">ici</a>.
<
?php
endif
;
?>
</h1></body></html>
180
chapitre
4
alcôve
-
programmer
en
php
utilisation
avancer
181

utilisation
avancer
alcôve
-
programmer
en
php
objectifs
chapitre
interopérabilité
avec
applicatifs
;
traitement
chaîne
de
caractère
;
fonctionnalité
utiles.
182
section
1
alcôve
-
programmer
en
php
interopérabilité
avec
applicatifs
183

interopérabilité
avec
applicatifs
alcôve
-
programmer
en
php
objectifs
de
section
utilisation
sgbds
;
interfaçage
avec
l’api
apache
;
utilisation
de
ldap.
184
interopérabilité
avec
applicatifs
alcôve
-
programmer
en
php
utilisation
sgbds
grand
nombre
de
s
ystèmes
de
g
estion
de
b
ases
de
d
onnées
(
sgbd
)
être
supporter
par
php
;
plupart
être
accessibles
via
langage
sql
(
s
tructured
q
uery
l
angage)
;
celui-ci
permet,
nom
l’indique,
de
réaliser
requête
sur
base
de
donnée
de
façon
structurée
standardiser
;
l’utilisation
base
donnée
être
clé
de
voûte
site
dynamiques
de
commerce
électronique
;
185

interopérabilité
avec
applicatifs
alcôve
-
programmer
en
php
baser
sql
supporter
:
adabas
d
empress
ibm
db2
informix
interbase
msql
mysql
odbc
(access,
ms-sql,
iodbc...)
oracle
postgresql
raima
velocis
solid
sybase
autres
sgbd
supporter
:
–
dbase,
–
filepro
(lecture
seule),
–
dbm
(ndbm,
gdbm,
berkeley
db).
186
interopérabilité
avec
applicatifs
alcôve
-
programmer
en
php
principales
commande
sql
:
–
create
table
:
créer
nouvelle
table,
–
delete
:
supprimer
ligne
d’une
table,
–
insert
:
insérer
nouvelle
ligne
dans
table,
–
select
:
récupérer
ligne
d’une
table
d’une
vue,
–
update
:
modifier
valeur
dans
champs.
187

interopérabilité
avec
applicatifs
alcôve
-
programmer
en
php
:
création
alimentation
d’une
table
create
tabler
(secu
int8
not
null
primary
key,
nom
varchar(20)
not
null,
prenom
varchar(20)
not
null)
insert
into
valoir
(’132456789’,
’smith’,
’john’)
insert
into
valoir
(’987654321’,
’gates’,
’bill’)
188
interopérabilité
avec
applicatifs
alcôve
-
programmer
en
php
(suite)
:
affichage
de
table
suppression
d’une
entrer
select
*
from
secu
nom
prenom
132456789
smith
john
987654321
gates
bill
delete
from
personne
where
nom
=
’gates’
189

interopérabilité
avec
applicatifs
alcôve
-
programmer
en
php
base
sql
posséder
propre
api
mécanisme
de
consultation
être
mêmes
pour
:
–
connexion
serveur
de
base
de
donnée
(machine,
utilisateur,
mot
de
passe),
–
sélection
de
base
à
utiliser
(nom
de
base),
–
requête
sql,
–
exploitation
de
requête
(affichage...),
–
déconnexion.
sûr
avant
d’utiliser
base
de
donnée
particulière,
falloir
s’assurer
librairie
correspondante
être
charger
dans
php
;
190
interopérabilité
avec
applicatifs
alcôve
-
programmer
en
php
pour
base
de
donnée
mysql,
falloir
ajouter
ligne
extension=mysql.so
dans
fichier
php3.ini/php.ini
vérifier
fichier
mysql.so
trouver
dans
répertoire
extension_dir
;
fonction
mysql
utiliser
être
suivantes
:
–
mysql_connect()
:
ouvre
connexion
à
serveur
mysql,
–
mysql_list_*()
:
retourner
liste
bases,
table
champ
disponibles
sur
serveur,
–
mysql_select_db()
:
selectionne
base
de
donnée
sur
serveur,
191

interopérabilité
avec
applicatifs
alcôve
-
programmer
en
php
–
mysql_query()
:
envoyer
requête
sql
sur
base
de
donnée
active
sur
serveur
renvoyer
identifier
de
résultat
:
mysql_result()
:
exploiter
résultat,
mysql_fetch_*()
:
exploiter
manipuler
résultat,
mysql_field_*()
:
permettre
de
naviguer
sein
résultat.
–
mysql_close()
:
connexion
serveur
mysql
(fait
par
défaut
à
fin
script).
192
interopérabilité
avec
applicatifs
alcôve
-
programmer
en
php
être
possible
de
réaliser
connection
persistante
à
serveur
mysql
en
utiliser
fonction
mysql_pconnect()
;
connexion
être
fermer
à
fin
script
;
accélérer
script
connexion
à
base
être
fréquentes
;
connexion
être
refermer
après
temps
d’inutilisation
;
193

interopérabilité
avec
applicatifs
alcôve
-
programmer
en
php
:
<
?php
mysql_pconnect("db.mon-server.com",
"username",
"password")
;
mysql_select_db("ma_base")
;
$resultat
=
mysql_query("select
*
from
ma_table")
;
if
($resultat)
:
?>
<table>
<tr><th>nom</th>
<th>description</th></tr>
194
interopérabilité
avec
applicatifs
alcôve
-
programmer
en
php
<
?php
while
($tableau
=
mysql_fetch_array($resultat))
echo
"<tr><td>",
$tableau["nom"],
"</td>
<td>",
$tableau["descr"],
"</td></tr>\n"
;
?>
</table>
<
?php
else
:
echo
"votre
table
être
vide"
;
endif
;
?>
195

interopérabilité
avec
applicatifs
alcôve
-
programmer
en
php
exister
outil
d’administration
de
base
de
donnée
écrire
en
php
;
–
phpmyadmin
pour
base
mysql
(http
://www.phpwizard.net/phpmyadmin/),
–
phppgadmin
pour
base
postgresql
(http
://www.phpwizard.net/phppgadmin/).
outil
être
utiles
pour
créer
base
de
donnée
avant
de
utiliser
dans
script
php
;
être
pratique
pour
maintenir
base
;
outil
être
libres,
coder
source
pouvoir
servir
de
référence
pour
accéder
base
de
donnée
avec
php
;
196
interopérabilité
avec
applicatifs
alcôve
-
programmer
en
php
interfaçage
avec
l’api
apache
fonction
getallheaders()
permettre
de
récupérer
en-tête
http
correspondre
à
requête
courante
;
en-tête
être
stocker
dans
tableau
associatif
;
:
$headers
=
getallheaders()
;
while
(list($header,
$valeur)
=
each($headers))
{
echo
"$header
:
$valeur
<br>\n"
;
}
197

interopérabilité
avec
applicatifs
alcôve
-
programmer
en
php
utilisation
de
ldap
l
ightweight
d
irectory
a
ccess
p
rotocol
;
protocole
normaliser
d’accès
service
d’annuaires
;
annuaire
être
équivalent
à
base
de
donnée
information
être
ranger
de
manière
hiérarchique
;
caractéristique
de
ldap
:
–
organisation
globale,
–
standard
ouvert,
–
extensible
paramétrable,
–
stockage
de
données
hétérogènes,
–
sécurisé.
198
interopérabilité
avec
applicatifs
alcôve
-
programmer
en
php
ldap
utiliser
syntaxe
à
nom
distincts
(dn
:
distinguished
names
)
;
:
dn
signification
dn
=
"cn=linus
torvalds,
ou=devel,
o=transmeta,
c=usa"
country
=
user
organization
=
transmeta
organizationunit
=
devel
commonname
=
linus
torvalds
199

interopérabilité
avec
applicatifs
alcôve
-
programmer
en
php
avant
de
pouvoir
utiliser
ldap
avec
php,
falloir
ajouter
ligne
extension
=
ldap.so
dans
php3.ini/php.ini
vérifier
librairie
ldap.so
trouver
dans
répertoire
extension_dir
;
séquence
type
de
consultation/modification
d’une
base
ldap
avec
php
prendre
forme
suivante
:
–
ldap_connect()
:
établir
connexion
avec
serveur
ldap,
–
ldap_bind()
:
liaison
authentification
sur
serveur,
–
ldap_get_*()/ldap_add()/ldap_modify()...
:
consultation/modification
de
base,
–
ldap_close()
:
déconnexion.
200
interopérabilité
avec
applicatifs
alcôve
-
programmer
en
php
:
recherche
de
dn
commançant
par
l
<
?php
$ds
=
ldap_connect("ldap.mon-serveur.com")
;
if
($ds)
{
ldap_bind($ds)
;
$sr
=
ldap_search($ds,
"ou=devel,
o=transmeta,
c=usa",
"dn=l*")
;
$info
=
ldap_get_entries($ds,
$sr)
;
201

interopérabilité
avec
applicatifs
alcôve
-
programmer
en
php
for
($i=0
;
$i
<
$info["count"]
;
$i++)
{
echo
"dn
valoir
:
"
.
$info[$i]["dn"]
.
"<br>"
;
echo
"première
entrer
cn
valoir
:
"
.
$info[$i]["cn"][0]
.
"<br>"
;
echo
"première
email
valoir
:
"
.
$info[$i]["mail"][0]
.
"<br>"
;
}
ldap_close($ds)
;
}
else
{
echo
"<h4>impossible
de
connecter
serveur
ldap</h4>"
;
}
?>
202
section
2
alcôve
-
programmer
en
php
traitement
chaîne
de
caractère
203

traitement
chaîne
de
caractère
alcôve
-
programmer
en
php
objectifs
de
section
manipulation
chaîne
de
caractère
;
expression
régulières.
204
traitement
chaîne
de
caractère
alcôve
-
programmer
en
php
manipulation
chaîne
de
caractère
affichage
:
–
echo()
:
afficher
chaîne
séparer
par
virgules,
–
print()
:
afficher
chaîne,
–
printf()
:
afficher
chaîne
selon
chaîne
de
formatage
(idem
langage
c).
:
$nom
=
"toto"
;
echo
"bonjour",
$nom
;
#
affiche
bonjour
toto
print
"bonjour
$nom"
;
#
affiche
bonjour
toto
printf("bonjour
%s",
$nom)
;
#
affiche
bonjour
toto
205

traitement
chaîne
de
caractère
alcôve
-
programmer
en
php
substitution
:
–
addslashes()
:
ajouter
backslash
devant
caractère
spéciaux,
–
stripslashes()
:
enlever
backslashs
ajouter
par
fonction
addslashes,
–
str_replace()
:
remplacer
occurrence
d’une
chaîne
par
autre,
:
print
addslashes(’\’
\
"’)
;
#
affiche
\’
\
\"
print
str_replace("toto",
"titi",
"bonjour
toto!
!")
;
#
affiche
bonjour
titi!
!
206
traitement
chaîne
de
caractère
alcôve
-
programmer
en
php
découpage
:
–
explode()
:
scinder
chaîne
en
morceau
grâce
à
délimiteur,
–
implode()/join()
:
regrouper
élément
d’un
tableau
dans
chaîne
en
ajouter
chaîne
de
jointure,
–
ltrim()/chop()
:
enlever
espace
de
début/fin
de
chaîne.
:
$composants
=
"resistance,
condensateur,
transistor
"
;
$composants
=
chop($composants)
;
$tableau
=
explode(",
",
$composants)
;
print
$tableau[2]
.
"."
;
#
affiche
transistor.
207

traitement
chaîne
de
caractère
alcôve
-
programmer
en
php
web
:
–
rawurlencode()/rawurldecode()
:
encode/décode
chaîne
en
url
selon
rfc1738,
–
htmlspecialchars()/htmlentities()
:
convertir
caractère
spéciaux
en
équivalent
html.
:
$url
=
rawurlencode(’bonjour@toi
/toto/’)
;
print
$url
;
#
affiche
bonjour%40toi%20%2ftoto%2f
$html
=
htmlentities("2
<
3")
;
print
$html
;
#
affiche
2
<
3
source
html
contenir
2
<
3
208
traitement
chaîne
de
caractère
alcôve
-
programmer
en
php
comparaison
:
–
parse_str()
:
analyser
chaîne
déduire
variables
valeur,
–
strcmp()
:
comparaison
sensible
à
casse,
–
strlen()
:
retourner
longueur
de
chaîne.
:
parse_str("toto=23&
tab[]=ceci+fonctionne
&
tab[]=aussi")
;
print
"$toto,
$tab[0],
$tab[1]"
;
affiche
23,
fonctionner
,
209

traitement
chaîne
de
caractère
alcôve
-
programmer
en
php
casser
:
–
strtolower()/strtoupper()
:
mettre
caractère
en
minuscule/majuscule,
–
ucfirst()
:
force
premier
caractère
d’une
chaîne
en
majuscule,
–
ucwords()
:
force
premier
caractère
de
mot
d’une
chaîne
en
majuscule.
:
$nom
=
"bill
gatez"
;
print
$nom
=
strtolower($nom)
;
#
affiche
bill
gatez
print
strtolower($nom)
;
#
affiche
bill
gatez
210
traitement
chaîne
de
caractère
alcôve
-
programmer
en
php
expression
régulières
expression
régulières
(abrv
:
regex
)
être
utiliser
pour
faire
manipulation
complexes
sur
chaîne
de
caractère
(ex
:
substitution
recherche
complexes)
;
php
gérer
deux
type
d’expressions
régulières
:
–
expression
régulières
avancer
de
posix,
–
expression
régulières
modifier
langage
perl.
211

traitement
chaîne
de
caractère
alcôve
-
programmer
en
php
principe
de
base
expression
régulières
:
–
recherche
de
séquence
de
caractère
sein
d’une
chaîne,
–
besoin
d’expressions
pour
décrire
séquences,
–
utilisation
d’une
syntaxe
puissante,
–
équivaloir
à
définition
de
condition
de
recherche.
212
traitement
chaîne
de
caractère
alcôve
-
programmer
en
php
signification
principales
expression
régulières
:
–
c
:
caractère
c
(sauf
caractère
spéciaux),
–
\c
:
caractère
spécial
c
(sauf
chiffre
de
1
à
9),
–
ˆ
:
début
de
ligne,
–
$
:
fin
de
ligne,
–
.
:
n’importe
caractère,
–
[s]
:
caractère
appartenir
à
l’ensemble
s,
s
être
suite
de
caractère
et/ou
échelle
de
caractère
([c-c]),
213

traitement
chaîne
de
caractère
alcôve
-
programmer
en
php
–
[ˆs]
:
caractère
n’appartenant
à
l’ensemble
s,
–
r*
:
0,
1
occurrence
successives
de
l’expression
régulière
r,
–
rx
:
r,
suivre
de
l’expression
régulière
x
(concaténation),
–
r{m,n}
:
nombre
(entre
m
n)
d’occurrences
successives
de
r,
–
r{m}
:
m
occurrence
successives
de
r,
–
r{m,}
:
m
occurrence
successives
de
l’expression
régulière
r.
214
traitement
chaîne
de
caractère
alcôve
-
programmer
en
php
utilisation
avec
php
:
–
ereg()/eregi()
:
expression
régulière
standard
sensible/insensible
à
casse,
–
ereg_replace()/eregi_replace()
:
expression
régulière
de
substitution
sensible/insensible
à
casse,
–
split()
:
découper
chaîne
grâce
à
délimiteur
définir
par
expression
régulière,
–
sql_regcase()
:
préparer
expression
régulière
insensible
à
casse
(utile
pour
fonction
supporter
recherche
insensible
à
casse).
215

traitement
chaîne
de
caractère
alcôve
-
programmer
en
php
:
<
?php
$personne
=
"nom
:
smith,
prénom
:
john,
age
:
52,
divers
:
blond"
;
if
(ereg("blond",
$personne))
print
"cette
être
blonde."
;
#
affiche
personne
être
blonde.
if
(eregi("age
:
*([0-9]+)",
$personne,
$resultat))
print
"cette
avoir
$resultat[1]
ans."
;
else
print
"cette
n’a
d’age."
;
#
affiche
personne
avoir
52
ans.
216
traitement
chaîne
de
caractère
alcôve
-
programmer
en
php
print
eregi_replace("(age
:)
*[0-9]+.*",
"\1
68",
$personne)
;
#
affiche
nom
:
smith,
prénom
:
john,
age
:
68
print
sql_regcase("john
smith")
;
#
affiche
[jj][oo][hh][nn]
[ss][mm][ii][tt][hh]
?>
217

section
3
alcôve
-
programmer
en
php
fonctionnalité
utiles
218
fonctionnalité
utiles
alcôve
-
programmer
en
php
objectifs
de
section
manipulation
traitement
fichier
;
argument
gestion
urls
;
création
dynamique
d’images
;
fonction
mathématiques
;
php
xml
;
templates
avec
phplib
;
utilisation
de
php
langage
de
script.
219

fonctionnalités
utiles
alcôve
-
programmer
en
php
manipulation
traitement
fichier
langage
de
programmation,
gestion
fichier
être
importante
pour
stockage
de
donnée
;
gestion
fichier
en
php
être
issue
langage
c
comporter
fonction
supplémentaires
utiles
(comme
gestion
fichier
distants
par
exemple)
;
220
fonctionnalité
utiles
alcôve
-
programmer
en
php
principales
fonction
de
manipulation
de
fichier
être
suivantes
:
–
fopen()
:
ouverture
d’un
fichier
(possibilité
de
fournir
url
http
ftp
pour
fichier
distants),
–
fclose()
:
fermeture
fichier,
–
fpassthru()
:
lire
fichier
en
entier
l’affiche,
–
fread()/fgets()
:
lire
n
caractère
dans
fichier,
–
fwrite()/fputs()
:
écrire
chaîne
dans
fichier,
–
rewind()/fseek()/ftell()
:
positionnement
sein
fichier.
221

fonctionnalités
utiles
alcôve
-
programmer
en
php
:
affichage
de
l’image
image.png
<
?php
header("content-type
:
image/png")
;
if
(!
!$fd
=
fopen("image.png",
"rb"))
echo
"impossible
d’ouvrir
fichier."
;
else
fpassthru($fd)
;
?>
222
fonctionnalité
utiles
alcôve
-
programmer
en
php
ex2
:
fichier
de
log
<
?php
...
if
(!
!$fd
=
fopen("mon_error.log",
"a"))
echo
"impossible
d’ouvrir
fichier."
;
else
fputs($fd,
"erreur
:
$errormsg\n")
;
#
ecrit
dernier
message
d’erreur
renvoyer
dans
mon_error.log
...
?>
223

fonctionnalités
utiles
alcôve
-
programmer
en
php
principales
fonction
de
gestion
de
fichier
être
suivantes
:
–
file_exists()
:
test
de
l’existence
d’un
fichier,
–
copy()
:
copier
fichier,
–
rename()
:
renommer
fichier,
–
unlink()
:
effacer
fichier.
:
<
?php
$fichier
=
"toto.html"
if
(file_exists($fichier))
copy($fichier,
"/tmp/"
.
$fichier)
;
else
echo
"impossible
d’ouvrir
fichier."
;
?>
224
fonctionnalité
utiles
alcôve
-
programmer
en
php
principales
fonction
de
manipulation
répertoire
être
suivantes
:
–
chdir()
:
changement
de
répertoire
courant,
–
opendir()
:
ouverture
d’un
répertoire,
–
closedir()
:
fermeture
répertoire,
–
readdir()
:
lire
l’entrée
suivante
dans
répertoire,
–
rewinddir()
:
revenir
début
répertoire,
–
mkdir()
:
créer
nouveau
répertoire,
–
rmdir()
:
supprimer
répertoire,
–
dir()
:
instanciation
d’un
objet
répertoire
pour
manipulation
objet
de
celui-ci,
225

fonctionnalités
utiles
alcôve
-
programmer
en
php
:
équivaloir
de
commande
ls
<
?php
chdir("/tmp")
;
$dir
=
dir(".")
;
$dir->rewind()
;
while
($fichier
=
$dir->read())
echo
"$fichier<br>"
;
$dir->close()
;
?>
226
fonctionnalité
utiles
alcôve
-
programmer
en
php
argument
gestion
urls
gestion
urls
être
importante
pour
encoder/décoder
information
sein
même
de
celles-ci
;
pouvoir
utiliser
l’url
pour
transmettre
information
(variables...)
d’un
script
à
l’autre
;
mécanisme
pouvoir
constituer
mini-gestion
de
session
par
exemple
;
227

fonctionnalités
utiles
alcôve
-
programmer
en
php
principales
fonction
utiliser
pour
gestion
urls
être
suivantes
:
–
parse_url
:
analyser
url
retourner
composant
sous
forme
d’un
tableau
associatif,
–
urlencode/urldecode
:
encode/décode
chaîne
en
remplacer
caractère
spéciaux
par
%xx
espace
par
+
(application/x-www-form-urlencode),
–
base64_encode/base64_decode
:
encode/décode
chaîne
en
base64
pour
permettre
à
système
de
manipuler
information
binaires
sur
8
bit
(ex
:
corps
de
mail).
228
fonctionnalité
utiles
alcôve
-
programmer
en
php
:
transmission
d’une
variable
par
l’url
<
?php
$chaine
=
"bonjour
monde
?"
;
?>
<a
href="mon-cgi
?chaine=<
?php
echo
urlencode($chaine)
;
?>">envoyer</a>
appeler
script
cgi
mon-cgi
avec
l’url
"mon-cgi
?chaine=bonjour+tout+le+monde+%3f"
229

fonctionnalités
utiles
alcôve
-
programmer
en
php
création
dynamique
d’images
php
n’est
limiter
à
création
de
fichier
html,
pouvoir
servir
à
générer
image
(png,
jpeg,
gif)
;
image
pouvoir
être
émettre
vers
client
sauvegarder
sur
serveur
;
être
pratiques
pour
dessiner
graphique
à
partir
de
donnée
dynamiques
(ex
:
statistiques
site,
résultat
d’un
sondage...)
;
230
fonctionnalité
utiles
alcôve
-
programmer
en
php
pour
générer
images,
php
utiliser
librairie
gd
;
celle-ci
composer
d’un
ensemble
de
fonction
permettre
de
créer
image
dynamiques
de
qualité
avec
de
code
;
historiquement,
format
gif
être
premier
à
avoir
être
supporter
aujourd’hui
prefère
format
jpeg
png,
format
ouvrir
de
;
sûr
avant
d’utiliser
librairie
falloir
préalable
charger
dans
php
en
ajouter
ligne
extension=gd.so
dans
fichier
php3.ini/php.ini
vérifier
fichier
gd.so
trouver
dans
extension_dir
;
231

fonctionnalités
utiles
alcôve
-
programmer
en
php
l’api
être
intuitive
:
–
imagecreate*()
:
pour
créer
image
blanche
à
partir
d’une
image
existante,
–
imagecolor*()
:
pour
définir
couleur
transparence,
–
imagestring()
:
pour
écrire
texte,
–
image<forme>()
:
pour
dessiner
forme
géométrique
connaître
(rectangle,
arc,
ligne,
polygone...),
–
imagefill*()
:
pour
colorier
formes,
–
image<attribut>()
:
pour
connaître
attribut
(largeur,
hauteur,
taille...)
de
l’image,
–
image<type>()
:
pour
envoyer
image
de
type
png,
jpeg
gif
navigateur,
–
imagedestroy()
:
pour
détruire
l’image...
232
fonctionnalité
utiles
alcôve
-
programmer
en
php
fonction
de
l’api
manipuler
pointeur
sur
l’image
courante
;
pointeur
être
retourner
par
fonction
imagecreate*()
à
création
de
l’image
;
typiquement,
créer
fichier
php
seul
but
être
de
retourner
image
dynamique
;
233

fonctionnalités
utiles
alcôve
-
programmer
en
php
argument
pour
créer
l’image
être
passer
dans
l’url
à
manière
formulaire
en
mode
get
par
exemple
(ex
:
<img
src
=
"bouton.php
?texte=titre+bouton">)
fichier
devoir
retourner
en-tête
correspondre
à
l’image
retourner
(ex
:
header("content-type
:
image/gif")
;)
navigateur
pouvoir
l’afficher
;
pouvoir
créer
fonction
générer
l’image
technique
être
facile
à
utiliser
falloir
s’occuper
de
stocker
l’image
de
détruire
par
suite
;
234
fonctionnalité
utiles
alcôve
-
programmer
en
php
:
génération
dynamique
de
boutons,
bouton.php
<
?php
header("content-type
:
image/gif")
;
if
(!
!isset($texte))
$texte
=
""
;
$image
=
imagecreatefromgif("images/bouton.gif")
;
$couleur
=
imagecolorallocate($image,
255,
255,
255)
;
$espace
=
(imagesx($image)
-
7.5
*
strlen($texte))
/
2;
imagestring($image
,
5,
$espace,
9,
$texte,
$couleur)
;
imagegif($image)
;
imagedestroy($image)
;
?>
235

fonctionnalités
utiles
alcôve
-
programmer
en
php
:
<img
src
=
"bouton.php
?texte=mon+titre">
:
236
fonctionnalité
utiles
alcôve
-
programmer
en
php
fonction
mathématiques
exister
deux
type
de
fonction
mathématiques
dans
php
:
–
fonction
standards,
s’appliquent
sur
entiers
long
(double),
–
fonction
de
précision
nombre
être
représenter
par
chaîne
de
caractères.
constante
m_pi
être
définir
pour
nombre
pi
;
237

fonctionnalités
utiles
alcôve
-
programmer
en
php
fonction
standard
utiliser
être
suivantes
:
–
abs()
:
valeur
absolue,
–
number_format()
:
formater
nombre
par
groupe
de
milliers,
–
round()/ceil()/floor()
:
arrondis,
–
max()/min()
:
encadrements,
–
pow()/sqrt()
:
puissances,
–
exp()/log()/log10()
:
exponentielles
logarithmes,
238
fonctionnalité
utiles
alcôve
-
programmer
en
php
–
cos()/sin()/tan()/acos()/asin()/atan()
:
trigonométrie,
–
base_convert()/bindec()/decbin()/hexdec()/
dechex()/octdec()/decoct()
:
changement
de
bases,
–
rand()/srand()/getrandmax()
:
nombre
pseudo-aléatoires
(les
fonction
mt_*
être
meilleures
rapides).
239

fonctionnalités
utiles
alcôve
-
programmer
en
php
:
$x
=
-12
;
print
sqrt(pow($x,
2))
.
"
=
"
.
abs($x)
;
#
affiche
12
=
12
print
number_format(round(12550.49999999),
3,
",",
"
")
;
#
affiche
12
550,000
print
cos(m_pi/4)
.
"
=
"
.
1/sqrt(2)
;
#
affiche
0.70710678118655
=
0.70710678118655
240
fonctionnalité
utiles
alcôve
-
programmer
en
php
php
xml
e
x
tensible
m
arkup
l
anguage
;
standard
ouvrir
de
description
de
donnée
;
utiliser
marqueur
qui,
à
différence
autres
ml,
décrire
donnée
manière
celles-ci
devoir
être
afficher
(ex
:
html)
;
l’utilisation
de
xml
avec
php
nécessiter
l’installation
de
librairie
expat
(http
://www.jclark.com/xml/)
compilation
de
php
avec
l’option
--with-xml
;
depuis
version
1.3.7
d’apache,
librairie
expat
être
intégrer
serveur
web
;
241

fonctionnalités
utiles
alcôve
-
programmer
en
php
module
xml
permettre
de
créer
parseur
xml
appeler
fonction
définir
par
l’utilisateur
permettre
de
traiter
donnée
incluses
dans
tags
xml
;
fonction
principales
:
–
xml_parser_create()
:
créer
parseur
xml
retourner
descripteur
de
parseur
être
utiliser
par
autres
fonctions,
–
xml_set_element_handler()
:
modifier
option
associer
à
parseur
(sensibilité
à
casse,
encodage
caractères...),
–
xml_set_character_data_handler()
:
définir
fonction
à
appeler
à
l’ouverture
à
fermeture
d’un
tag
xml
spécifique,
–
xml_parse()
:
parseur
xml,
–
xml_parser_free()
:
élimination
d’un
parseur
xml
de
mémoire.
242
fonctionnalité
utiles
alcôve
-
programmer
en
php
pouvoir
manipuler
parseur
xml
à
l’intérieur
d’un
objet
php
;
falloir
pour
définir
parseur
variable
d’instance
de
l’objet
passer
l’objet
par
référence
à
fonction
xml_set_object()
;
:
xml_set_object(parser,
&
object)
;
par
suite,
falloir
utiliser
fonction
xml_set_*()
avec
$this->parser
identifier
de
parseur.
243

fonctionnalités
utiles
alcôve
-
programmer
en
php
utilisation
templates
phplib
phplib
proposer
classe
template
permettre
de
séparer
squelette
html
d’une
page,
traitement
donnée
permettre
de
modifier
page
;
partie
dynamiques
de
page
être
représenter
dans
code
html
par
identifiants
entourer
d’accolades
;
identifiants
être
remplacer
par
valeur
calculer
par
script
php
;
244
fonctionnalité
utiles
alcôve
-
programmer
en
php
:
template
(expl.ihtml)
<html><head>
<title>{letitre}</title>
</head
>
<body>
<br>un
exemple
de
variable
:{ici}
</body></html>
245

fonctionnalités
utiles
alcôve
-
programmer
en
php
(suite)
:
code
php
utiliser
template
expl.ihtml
include("template.inc")
$tmpl
=
new
template("rep-template")
;
$tmpl->set_file("main",
"expl.ihtml")
;
$tmpl->set_var(array(
"letitre"=>"exemple
de
titre",
"ici"=>"un
message"))
;
$tpml->parse("out",
"main")
;
$tmpl->p("out")
;
246
fonctionnalité
utiles
alcôve
-
programmer
en
php
fonction
associer
templates
:
–
template()
:
retourner
objet
template
associer
répertoire
être
stocker
squelette
html,
–
set_file()
:
associer
fichier
template
à
variable
représenter
celui-ci,
–
set_var()
:
affecter
valeur
à
nom
de
variable
template,
deux
dernières
fonction
pouvoir
être
appeler
avec
unique
argument
tableau
contenir
paires
clefs/valeurs
;
247

fonctionnalités
utiles
alcôve
-
programmer
en
php
–
parse()
:
fonction
substituer
valeur
de
variables
définir
dans
variable
de
référence
stocker
(ou
ajoute)
résultat
dans
variable
cible,
–
p()
:
fonction
afficher
valeur
de
variable
passée
en
argument
dans
navigateur.
248
fonctionnalité
utiles
alcôve
-
programmer
en
php
de
pouvoir
traiter
élément
répétitifs
(tableaux,
liste
de
sélection...),
pouvoir
déclarer
bloc
dans
variables
manipuler
par
classe
template
;
définition
utiliser
commentaire
html
;
:
<form
action
=
"{phpself}">
<select
name
=
"variable">
<!
!--
begin
monbloc
->
<option>{mul}
<!
!--
end
monbloc
->
</select>
<br><input
type="submit"></form>
249

fonctionnalités
utiles
alcôve
-
programmer
en
php
(suite)
:
$tmpl
=
new
template("rep-template")
;
$tmpl->set_file("main",
"expl.ihtml")
;
$tmpl->set_bloc("main",
"monbloc",
"toto")
;
$tmpl->set_var("phpself",
$php_self)
;
for
($i
=
1
;
$i
<
10
;
$i++)
{
$tmpl->set_var("mul",
$i)
;
$tmpl->parse("toto",
"monbloc",
true)
;
}
$tpml->parse("out",
"main")
;
$tmpl->p("out")
;
250
fonctionnalité
utiles
alcôve
-
programmer
en
php
fois
bloc
défini,
pouvoir
répéter
en
spécifier
true
dernier
argument
de
fonction
parse
;
fonction
set_block($parent,
$blocname,
$name)
indique
variable
$parent
contenir
bloc
nommer
$blocname.
fonction
enlever
bloc
de
$parent
remplacer
par
variable
$name.
251

fonctionnalités
utiles
alcôve
-
programmer
en
php
utilisation
de
php
langage
de
script
pouvoir
utiliser
puissance
richesse
fonction
de
php
pour
faire
script
orienter
web
;
falloir
avoir
préalable
compiler
php
cgi
(la
cohabitation
entre
forme
de
php
être
possible
sur
même
machine)
;
commande
php
donner
accès
à
shell
php
commander
php
taper
être
interpréter
;
252
fonctionnalité
utiles
alcôve
-
programmer
en
php
sûr,
seules
commande
encadrer
par
<
?php
...
?>
être
interpréter
autres
étant
afficher
telles-quelles
;
l’option
-q
permettre
d’éviter
d’avoir
en-tête
http
envoyer
avant
premier
affichage
;
pour
réaliser
script
classiques
en
php
suffire
de
faire
commencer
fichier
par
ligne
:
#!
!/usr/bin/php<version>
-q
253

fonctionnalités
utiles
alcôve
-
programmer
en
php
:
script
d’invite
login,
login.php
#!
!/usr/bin/php<version>
-q
bonjour
monsieur
<
?php
echo
$user,
"\n"
?>,
être
sur
machine
<
?php
echo
$hostname,
"\n"
?>
vérifier
variables
$user
$hostname
être
exporter
par
shell
en
rendre
script
login.php
exécutable
(chmod
+x
login.php)
commander
./login.php
affiche
:
bonjour
monsieur
nom_login,
être
sur
machine
nom_machine.
254
section
4
alcôve
-
programmer
en
php
conclusion
255

conclusion
alcôve
-
programmer
en
php
objectifs
chapitre
conseil
de
programmation
php
;
l’avenir
de
php
;
référence
;
glossaire.
256
conclusion
alcôve
-
programmer
en
php
conseil
de
programmation
php
penser
en
matière
de
réutilisabilité
code
;
lésiner
sur
commentaires,
aider
autres
à
comprendre
code
(on
être
seul
à
travailler
sur
site
web)
;
segmenter
code
php
pour
rendre
clair
:
–
préférer
fonction
courtes
mono-tâches,
–
utiliser
fichier
différents...
257

conclusion
alcôve
-
programmer
en
php
essayer
de
séparer
maximum
aspect
graphiques
(charte
graphique,
feuille
de
styles...),
contenir
(gestion
donnée
dynamiques...)
mettre
en
forme
(affichage
donnée
dynamiques...)
:
–
utilisation
de
fichier
d’en-têtes,
de
barre
de
navigation
de
pied
de
page
séparés,
–
utilisation
de
fichier
contenir
classe
manipuler
par
scripts...
258
conclusion
alcôve
-
programmer
en
php
l’avenir
de
php
de
en
utiliser
sur
internet
(plusieurs
million
de
domaine
différents)
;
php4
depuis
début
de
l’année
2000
;
version
être
contester
(ex
:
fsf)
à
cause
de
nouvelles
licence
;
apporter
de
rapidité
(ex
:
analyseur
zend)
de
nouvelles
fonctionnalité
natives
(ex
:
gestion
sessions...)
;
259

conclusion
alcôve
-
programmer
en
php
référencer
livre
:
–
professional
php
programming
(wrox),
–
programmation
web
avec
php
(eyrolles),
–
php,
précis
&
concis
(o’reilly),
–
programmation
php
(campuspress)...
260
conclusion
alcôve
-
programmer
en
php
urls
:
–
site
officiel
de
php
(http
://www.php.net),
–
documentation
officielle
en
anglais
(http
://www.php.net/manual),
–
traduction
française
de
documentation
officielle
(http
://dev.nexen.net/docs),
–
site
de
zend
(http
://www.zend.com),
–
développement
php/mysql
chez
nexen
(http
://dev.nexen.net)
261

conclusion
alcôve
-
programmer
en
php
–
projet
libres
de
php
(http
://www.phpwizard.net),
–
article
techniques
sur
php
(http
://www.phpbuilder.com/),
–
site
officiel
de
phplib
(http
://phplib.netuse.de),
–
site
francophone
pour
l’aide
à
programmation
en
php
(http
://www.phpfr.org)...
262
conclusion
alcôve
-
programmer
en
php
glossaire
–
apache
:
serveur
web
(http)
utiliser
sur
internet,
–
browser
:
navigateur/butineur
de
page
web,
–
cgi
(
common
gateway
interface
)
:
interface
de
communication
pour
création
de
programme
capables
d’être
exécuter
par
serveur
http,
permettre
création
dynamique
de
page
côté
serveur,
–
get
:
méthode
http
de
transmission
de
formulaire
via
urls
(données
encoder
dans
l’url),
263

conclusion
alcôve
-
programmer
en
php
–
gif
(
graphics
interchanger
format
)
:
format
breveté
d’images
compressés,
utiliser
sur
web,
–
html
(
hyper
text
markup
language
)
:
langage
de
description
structurale
de
documents,
baser
sur
notion
d’environnement
de
délimiteurs,
utiliser
pour
créer
page
web,
–
http
(
hypertext
transfer
protocol
)
:
protocole
de
transfert
de
fichier
utiliser
sur
web,
–
httpd
(
http
daemon
)
:
partie
principale
d’un
serveur
web
échange,
via
http,
fichier
avec
client
web
(navigateurs),
264
conclusion
alcôve
-
programmer
en
php
–
jpeg
:
format
d’images
compresser
utiliser
sur
web,
–
ldap
(
lightweight
directory
access
protocol
)
:
protocole
normaliser
d’accès
service
d’annuaires,
–
php
(
php
:
hypertext
preprocessor
)
:
langage
de
script
côté
serveur,
embarquer
dans
page
html,
–
png
(
portable
network
graphics
)
:
format
libre
d’images
compresser
créer
pour
fournir
alternative
libre
format
gif,
265

conclusion
alcôve
-
programmer
en
php
–
post
:
méthode
http
de
transmission
de
formulaire
dans
corps
de
requête
(alternative
à
méthode
get),
–
regex
:
raccourcir
pour
regular
expression
,
syntaxe
pour
réaliser
manipulation
complexes
sur
chaîne
de
caractères,
–
session
php
:
mécanisme
de
sauvegarde
d’informations
entre
deux
accès
(requêtes
http),
–
sgbd
:
système
de
gestion
de
base
de
données,
266
conclusion
alcôve
-
programmer
en
php
–
sql
(
structured
query
langage
)
:
langage
structurer
de
requête
pour
interroger
sgbds,
–
url
(
uniform
resource
locator
)
:
syntaxe
utiliser
pour
localiser
ressource
(fichier)
sur
web
(ex
:
http
://www.php.net/index.html)
–
www
(
world
wide
web
)
:
appellé
web,
c’est
nom
donner
réseau
internet,
–
xml
(
extensible
markup
language
)
:
standard
ouvrir
de
description
de
donnée
baser
sur
l’utilisation
de
marqueur
decrivant
données
qu’ils
encapsulent.
267


