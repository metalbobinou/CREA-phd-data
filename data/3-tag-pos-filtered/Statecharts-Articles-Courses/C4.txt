embedded
systems
lecture
4:
statecharts
björn
franke
university
edinburgh

overview
•
statecharts
•
definition
•
depth
•
history,
default
•
concurrency
•
broadcast
•
example

statecharts
•
statecharts
introduced
david
harel
1987
•
d.
harel,
“statecharts:
a
visual
formalism
complex
systems”,
science
computer
programming
8,
1987,
page
231-274.
•
statecharts
useful
describing
large,
complex,
reactive
system
•
a
reactive
system
one
continuously
react
external
internal
stimulus
•
a
graphic
notation
(“visual”)
•
lecture
based
kendra
cooper’s

d.
harel,
“statecharts:
a
visual
formalism
complex
systems”,
sci
computer
programming
8,
1987,
page
231-274.
definition•
based
onarefsm
statecharts
useful
describing
large,
complex,
reactive
system
•
a
reactive
system
one
continuously
external
internal
stimulus
•
a
graphic
notation
(“visual”)
statechart
=
state-diagrams
+
depth
(also
known
abstraction)
+
orthogonality
(also
known
concurrency)
+
broadcast
communication
the
statechart
notation
a
kind
extended
fsm
abstraction,
concur
communication
state
the
statechart
notation
a
kind
extended
fsm
abstraction,
composed
states,
transition
concurrency,•
communication.
•
transition
one
state
another
happen
the
event
labeled
the
arc
(if
any)
the
condition
(if
any)
true
•
an
output
associated
the
transition
o
the
diagram
below,
the
state
change
a
b

state
diagram
•
composed
states,
transition
•
transition
one
state
another
happen
the
event
labeled
the
arc
(if
any)
the
condition
(if
any)
true
•
an
output
associated
the
transition

example
•
state
change
a
b
event
b
the
condition
p
true;
the
output
c
•
c
global
(can
seen
everywhere
the
statechart
model)
•
c
used
an
input
a
transition
communication
the
model
•
this
support
communication
!
!this
support
the
model
b(p)/c
a
a
b

depth
(hierarchie)
•
statecharts
extend
this
with:
•
refinement,
clustering
•
and,
decomposition
state
(actually
xor,
not
or)

statecharts
extend
this
with:
o
refinement,
clustering
o
and,
decomposition
state
(actually
xor,
not
or)
e(p)
b
d
a
b
d
c
b
b
•
the
semantics
(aka
meaning)
superstate
a
d
•
•
d
called
a
superstate.
the
semantics
(aka
meaning)
superstate
d
o
a
xor
c
d•
is:
the
arc
labeled
b
a
common
property
the
a
•
a
xor
c
e(p)
d
c
b
b
c
b
clustered
this:
a
a
e(p)
•
d
called
a
superstate.
d
d
clustered
this:
e
(clustering,
bottom
approach)
e(p)
b
c
example
(bottom-up
clustering)
a
a
b
•
the
arc
labeled
b
a
common
property
the
superstate
d

a
d
b
b
c
b
example
(top-down
refinement)
d
b
d
ple
(refinement,
top-down
approach)
•
the
event
a,d
underspecified
(which
one
-
fixed
this
example,
start
state
d
b
state
d
refined
include
state
a
cthe
transition
a
c
also
specified
th
a
d
a
a
b
b
b
c
d
d
a
d
a
d
b
b
e(p)
c
d
d
refined
include
state
a
andthe
c
event
a,d
underspecified
(which
one
where?)
-
fixed
•
the
event
a,d
underspecified
•
state
d
refined
the
transition
a
c
also
specified
the
example
a
d
(which
one
where?)
include
state
a
c
d
a
a
b
a
b
b
e(p)
b
c
•
fixed
d
c
d
a,d
underspecified
(which
one
where?)
-
fixed
ansition
a
c
also
specified
the
example
d
a
•
the
transition
a
c
also
specified
the
example
b

default
state
•
substates
a,
b,
c
want
enter
state
a
default
default
state
•
specify
this
using
a
small
arrow:
substates
a,
b,
c
want
enter
state
a
default,
specify
this
using
a
small
arrow:
d
d
a
b
c
a
b
c
history
state
use
a
history
entrance
the
state
entered
the
last
state
the
level
existed.
•
the
h
entrance
a
default
state
•
the
scope
the
h
entrance
the
current
level
the
diagram

history
state
•
use
a
history
entrance
(h).
•
the
state
entered
the
last
state
the
level
existed.
•
the
h
entrance
a
default
state
•
the
scope
the
h
entrance
the
current
level
the
diagram
•
the
scope
the
h*
entrance
the
lowest
level
the
diagram.

or
b
example
b
c
c
history
state
•
a
timer
count
the
state
entered
exited
use
a
history
entrance
the
state
entered
the
last
state
the
level
entrance
default
state
•
the
timer
•notthe
gethreset
whenoverrides
the
statea
entered
•
the
scope
the
h
entrance
the
current
level
the
diagram
•
the
scope
the
h*
entrance
the
lowest
level
the
diagram.
d
a
h
b
c
example:
a
timer
count
the
state
entered
exit
(the
timer
not
get
reset
the
state
entered)

orthogonality
(concurrency)
nality
(concurrency)
d
ple
•
•
y
the
orthogonal
product
a
d
e
orthogonal
product
a
d
y
•
the
default
states:
d
a
a
a
e
b
c
u
g
d
g
•
event
‘a’
then
the
diagram
move
state
a,f
state
c,g
the
same
time
(a
synchronised
d)
f
a
•
event
‘u’
then
only
d
aﬀected
the
diagram
move
a,f
state
a,
e
(a
independent
d)
default
states:
occurs,
then
the
diagram
move
state
a,f
state
c,g
the
e
(a
synchronized
d)

broadcast
communication
•
an
event
seen
everywhere
the
diagram
the
same
time.

example
•
specify
the
behaviour
an
alarm
clock
using
statecharts.
•
assumptions:
the
alarm
clock
2
buttons.

example
•
start
setting
the
current
time.
•
need
set
hours,
minutes,
second
•
need
decide
button
(one,
both
together)
do
set
current
time
button
1&2
blink
hour
button
1
increment
button
2
hour
button
2
button
1
button
1&2
blink
minutes
button
2
button
2
button
1
button
1&2
blink
second
button
2
currenttime
set
button
1
increment
minutes
button
1
increment
second
button
1

example
(continued)
now,
consider
setting
the
alarm
time.
set
alarm
time
button
1&2
blink
hour
button
1
button
2
button
2
button
1
button
1&2
blink
minutes
button
2
button
2
button
1
button
1&2
blink
second
button
2
increment
hour
button
1
increment
minutes
button
1
increment
second
button
1
alarm
time
set
now,
consider
these
superstates
relate
one
another?

seconds
button
2
second
alarm
time
set
example
(continued)
now,
consider
these
superstates
relate
one
another?
•
xor
clock
display
time
button
1
set
current
time
display
alarm
time
button
2
set
alarm
time
now,
extend
the
statechart
describe
the
alarm
going
off.

button
1
button
2
example
(continued)
set
current
time
set
alarm
time
now,
extend
the
statechart
describe
the
alarm
going
off.
clock
display
time
alarm
time
alarm
button
1
button
1
set
current
time
button
2
set
alarm
now,
validate
the
behavior
the
statechart
(i.e.,
the
statechart
specify
the
system
the
way
want
work)
question:
the
alarm
5
minutes?

button
1
set
current
time
button
2
set
alarm
example
(validation)
now,
validate
the
behavior
the
statechart
(i.e.,
the
statechart
specify
the
system
the
way
want
work)
question:
the
alarm
5
minutes?
display
maintain
the
time?
maintaining
the
time
occur
concurrently
with:
•
the
alarm
going
•
setting
the
alarm
time
question:
possible
display
maintain
the
current
time
concurrently?
next
step
fix
the
statechart.
fixed,
need
re-validate
the
statechart.
other
thing
consider:
there
a
radio?

example
(other
thing
consider)
•
there
a
radio?
•
there
a
snooze
button?
•
there
a
battery
backup?
•
....

5.1
example
statecharts
one-shot
state
diagram
chess
game
184

5.1
example
statecharts
vending
machine
model
187

5.1
example
statecharts
an
aggregation
concurrent
state
diagram
(1)
190

summary
•
statecharts
•
state-diagrams,
depth,
orthogonality,
broadcast
communication

preview
•
imperative
programming
language
•
c,
ada,
real-time
java,
...


