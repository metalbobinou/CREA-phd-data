statecharts
(hierarchical
fsms)

hierarchical
fsms
(statecharts)
introduced
d
harel
(1987)
uml
notation
stateflow
notation

hierarchical
fsms
(statecharts)
the
fsm
model
presented
now
extended
allowing
–
guard
(conditions)
–
action
transition
the
original
statechart
proposal
added
–
–
–
–
–
hierarchy
concurrency
communication
transition
history
deep
history
state
completed
–
entry,
–
exit,
–
do
(while)
action
state

transitions,
condition
action
(stateflow)
•
the
following
example
the
general
label
format
a
transition
entering
a
state:
event
[condition]
{condition_action}
/
transition_action
s1
1
s2
•
an
event
(combination
events),
the
condition
the
transition
a
matching
event
([condition])
evaluated.
•
the
condition
condition
true,
the
condition
action
condition_action
({condition_action})
executed.
•
the
destination
state
determined
a
valid
destination,
the
transition
taken.
state
s1
exited.
–
the
difference
condition
transition
action
clear
junction
involved
•
the
transition
action
transition_action
executed
the
transition
taken.
•
state
s2
entered.

uml
transition
•
uml
transition
associated
a
trigger
event
(or
trigger
a
guard
an
action
(optional)

hierarchical
fsms
(statecharts)
motivation
hierarchy:
a
complex
system
described
naively
a
flat,
unstratified
multitude
states,
the
very
large
number
such
states.
a
state-based
approach
modular,
hierarchical
well
structured,
represent
explicitly
the
combination
all
state
need
handle
statement
as
–
“in
all
airborne
states,
yellow
handle
pulled,
the
seat
ejected”
(cluster
state
superstates)
–
“gearbox
change
state
independent
braking
system”
(independence
orthogonality)
–
“when
selection
button
pressed,
enter
selection
mode”
(general
transitions)
–
display
mode
time-display,
date-display
stopwatch-display
(refinement
states)

hierarchical
fsms
(statecharts)
or-clustering
state
d
abstraction
d
a
…
b
β
α
b
β
γ
α,δ
c
a
α
δ
β
γ
same
…
(saves
arrows)
b
β
c
δ

hierarchical
fsms
(statecharts)
transition
apply
the
state
a
superstate
k
a
k
β
α
b
γ
c
β
a
φ
ε
α
d
b
c
ε
γ
d
φ
ε
δ
e
φ
ε
δ
h
ε
φ
apply
all
state
k
(a
b
c
d
e
f
)
same
…
(saves
arrows)
φ
φ
ε
e
φ,
ε

hierarchical
fsms
(statecharts)
and-clustering
state
y
y
a
e
d
µ
b
d
µ
bg
γ
f
δ
γ
α
β
c
δ
g
α
α
β
α
ce
γ
β
cg
bf
α
δ
β
cf
α
µ
(uml
notation)
the
subsystem
explicitly
defined
a
number
fsm
evolving
parallel
same
…
a
considerable
reduction
the
number
state
transitions.
α
taken
synchronously!
!

statecharts:
(parallel)states
•
stateflow
notation
state

hierarchical
fsms
(statecharts)
transition
action
inheritance
inner
state
inherit
the
transition
action
parent
state
subs1
active
event
ev1
ev2
processed
according
the
definition
the
parent
state
all
action
the
hierarchy
executed

inner
outer
junction
difference
inner
outer
transition
•
inner
transition
exit
entry
statement
not
executed
•
outer
transitions,
the
state
exited
re-entered
•
uml
not
inner
transition

default
transition,
history
deep
history
state
history
state
(h):
the
last
active
state
the
current
subchart
a
default
transition
taken
a
chart
(subchart)
entered
first.
the
concept
initial
state
providing
an
initial
transition
several
option
possible
subcharted
state
deep
history
state
(h*):
the
last
active
state
the
current
subchart
subcharts
(recursively)

state
action
states
different
action
types,
include
entry,
during,
exit,
bind,
and,
event_name
actions.
stateflow,
the
action
state
assigned
using
the
following
general
format:
name/
entry:entry
action
during:during
action
exit:exit
action
bind:data_name,
event_name
event_name:on
event_name
action

state
action
stateflow
syntax
action
preceded
the
prefix
the
short
prefix,
followed
a
required
colon
(:),
followed
one
more
actions.
separate
multiple
action
a
carriage
return,
semicolon
(;),
a
comma
(,).
enter
the
name
slash
followed
directly
actions,
the
action
interpreted
entry
action(s).

state
action
entry
action
(entry:
en:)
entry
action
executed
a
state
the
state
entered
(becomes
active).
exit
action
(exit:
ex:)
exit
action
a
state
executed
the
state
active
a
transition
the
state
taken.
action
(during:
du:)
action
executed
a
state
active
an
event
no
valid
transition
another
state
available.
event_name
action
(on
event
event_name:)
there
multiple
event_name
line
different
events.
event_name
action
executed
the
state
active
the
event
event_name
received
the
state.
this
also
accompanied
the
execution
any
action
the
state.

state
action
uml
entry
action
exit
action
do
activity
state
invariant

transition
junction
•
transition
junction
additional
shortcut
allow
group
together
conditions/actions
apply
multiple
transition

connective
junction
•
to/from
and

connective
junction
other
types:
mathworks’
definition:
the
connective
junction
representation
different
possible
transition
path
a
single
transition.
connective
junction
used
help
represent
the
following:
–
variation
an
if-then-else
decision
construct,
specifying
condition
some
all
the
outgoing
transition
the
connective
junction
–
a
self-loop
transition
back
the
source
state
none
the
outgoing
transition
valid

connective
junction
other
types:
–
…
–
variation
a
loop
construct,
a
self-loop
transition
the
connective
junction
back
–
transition
a
common
source
multiple
destination
–
transition
multiple
source
a
common
destination
–
transition
a
source
a
destination
based
common
event

connective
junction
•
connective
junction
used
define
a
program
dataflow

backtracking
junction
transition
junction
force
backtracking.
initially,
state
a
active
condition
c1,
c2,
c3
true.
–
–
–
–
condition
c1
true,
therefore
action
a1
executed.
condition
c3
true,
therefore
action
a3
executed.
condition
c4
not
true,
therefore
control
flow
backtracked
state
a.
the
stateflow
diagram
root
check
see
another
valid
transition
state
a.
a
valid
transition
segment
marked
the
condition
c2
state
a
a
connective
junction.
–
condition
c2
true,
therefore
action
a2
executed.
–
condition
c3
true,
therefore
action
a3
executed.
–
condition
c4
not
true,
therefore
control
flow
backtracked
state
a.
a1
a2
executed,
a3
executed
twice.

backtracking
junction
resolve
this
problem,
consider
the
following.
the
previous
example
amended
two
terminating
junction
allow
flow
terminate
either
c3
c4
not
true.
this
leaf
state
a
active
taking
any
unnecessary
actions.

transition
junction
transition
connective
junction
action
used
achieve
the
same
expressive
power
dataflows
standard
program
(transition
graphs).
–
this
often
not
recommended
(unless
truly
needed)
{delta
=
in1
–
in1_hist;}
set
ramp
down
rate
[delta
<
tran_factor]
{
skip_sw_cycle
=
0;
rate
=
(ts*ramp_50ms)
+
in1;}
set
ramp
rate
[skip_sw_cycle
=
0
||
skip_sw_cycle
>=
2]
{
skip_sw_cycle
=
1;}
find
min
rate
[cl_clim
<
in1]
{rate=(ts*ramp_100ms)
+
cl_clim;}
{
rate=(ts*ramp_100ms)
+
in1;}
set
output
hold
ramp
up
{
skip_sw_cycle
=
skip_sw_cycle
+
1;}
{
rate_out=rate;
tran_out
=
delta;
in1_hist=in1;}

stateflow
model
•
comment:
not
recommended
*many*
reason
–
–
–
–
–
typically
not
a
specification,
an
algorithmic
description
hides
the
state
view
hides
side
effect
difficult
debug
simulate
program!
!
not
necessary

run
completion
interruptible
•
simulink
not
a
rtc
semantics
(uml
does)
the
end
result
outval
0

stateflow
semantics
issue
•
possible
infinite
loop
(recursion)
•
possible
side
effect

stateflow
–
safety
model
•
absence
multi-segment
loop
using
junctions;
•
acyclicity
triggering
emitted
events;
–
avoid
internal
events?
•
no
assignment
value
variable
intermediate
transition
segments;
•
outgoing
junction
condition
form
a
cover;
•
outgoing
junction
condition
disjoint;
•
assignment
different
value
the
same
variable
not
occur
concurrent
state
(confluence);
•
the
model
free
early
return
logic.
•
more,
check
the
maab
guidelines…

statecharts
harel’s
stopwatch

stateflow
•
a
summary
the
notation
….

sysml
sysml
diagram
behavior
diagram
activity
state
diagram
requirement
diagram
block
definition
diagram
sequence
diagram
use
case
diagram
structure
diagram
internal
block
diagram
parametric
diagram
package
diagram

uml

state
machine
•
used
represent
the
life
cycle
a
block
•
event-based
behavior
(generally
asynchronous)
transition
trigger,
guard,
action
•
state
entry,
exit,
do-activity
•
include
nested
sequential
concurrent
state
•
send/receive
signal
communicate
block
state
transitions,
etc.
•
event
type
–
change
event
–
time
event
–
signal
event

elements
state

elements
state
state:
a
condition
the
(sub)system
typically
characterized
an
invariant,
summarizing
the
history
the
previous
input
defining
mode
operation

elements
state
composite
state:
least
one
region.
each
region
a
concurrent
superstate

elements
state
diagram
submachine
state:
a
superstate
the
behavior
defined
an
internal
state
machine

elements
state
diagram
orthogonal
state:
a
superstate
the
behavior
defined
two
concurrently
executing
submachines,
each
region
composite
state:
least
one
region.
each
region
a
concurrent
superstate

elements
state
initial
(pseudo)
state:
indicating
the
initial
state
the
system,
most
one
each
region

elements
state
a
pseudo-state
signifying
the
leaving
state
an
object
the
termination
the
enclosing
region
final
state
a
reference
the
target
a
transition
entry
point
a
reference
the
source
a
transition
exit
point
used
a
source
target
a
transition.
represent
entry
the
submachine
machine
referenced
the
superstate.
connection
point

elements
state
split
an
incoming
transition
two
more
transition
terminating
orthogonal
target
vertices
fork
merge
transition
emanating
source
vertices
different
orthogonal
region
join
split
transition
path
(or
decomposition)
choice
point
chain
together
multiple
transition
junction

state
diagram
vs
protocol
state
diagram

example
state
diagram


